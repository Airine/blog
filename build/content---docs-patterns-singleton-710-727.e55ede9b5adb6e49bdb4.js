(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{143:function(n,e,t){"use strict";t.r(e),t.d(e,"frontMatter",function(){return o}),t.d(e,"rightToc",function(){return l}),t.d(e,"default",function(){return u});t(0);var r=t(283);function a(){return(a=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function c(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},c=Object.keys(n);for(r=0;r<c.length;r++)t=c[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(r=0;r<c.length;r++)t=c[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var o={title:"javascript 单例模式",sidebar_label:"单例模式"},l=[],i={rightToc:l},s="wrapper";function u(n){var e=n.components,t=c(n,["components"]);return Object(r.b)(s,a({},i,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("p",null,"单例模式就是一个类只有一个实例。比如整个网站的登陆弹出框，系统window对象等。"),Object(r.b)("p",null,"实现"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-javascript"}),"class SingleObject{\n\n}\n\nSingleObject.getInstance = (function(){\n    let instance\n    return function(){\n        if(!instance){\n            instance = new SingleObject()\n        }\n        return instance\n    }\n})()\n\nlet o1 = SingleObject.getInstance()\nlet o2 = SingleObject.getInstance()\no1 == o2  // true\n\n// 但是还是可以new SingleObject\nlet o3 = new SingleObject()\n")),Object(r.b)("p",null,"实例"),Object(r.b)("p",null,"比如现在需要实现一个登陆弹出框。"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-javascript"}),"class LoginForm{\n    show(){}\n    hide(){}\n}\n\nLoginForm.getInstance = (function(){\n    let instance = null\n    return function(){\n        if(!instance){\n            instance = new LoginForm()\n        }\n        return instance\n    }\n})()\n")),Object(r.b)("p",null,"显然，可以将 getInstance 抽出来，因为其他组件也可能是单例，比如遮罩。"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-javascript"}),"class LoginForm {\n    show() { }\n    hide() { }\n}\n\nclass Singleton { }\nSingleton.getInstance = function (fn) {\n    let instance = null\n    return function () {\n        return instance || (instance = fn.apply(this, arguments))\n    }\n}\n\nlet createLogin = Singleton.getInstance(function () {\n    return new LoginForm()\n})\n\nlet login1 = createLogin()\nlet login2 = createLogin()\n\nclass Mask { }\nlet createMask = Singleton.getInstance(function () {\n    return new Mask()\n})\n\nlet mask1 = createMask()\nlet mask2 = createMask()\n\nconsole.log(login1 === login2)  // true\nconsole.log(mask1 === mask2)    // true\nconsole.log(login1 === mask1)   // false\n")),Object(r.b)("p",null,"看上面代码，单例就是获取实例的时候总是那个实例。"),Object(r.b)("p",null,"总结"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"符合单一职责原则，只实例化唯一的对象。"),Object(r.b)("li",{parentName:"ul"},"没法具体开放封闭原则，但是不违反开发封闭原则。")))}u.isMDXComponent=!0},283:function(n,e,t){"use strict";t.d(e,"a",function(){return l}),t.d(e,"b",function(){return p});var r=t(0),a=t.n(r),c=a.a.createContext({}),o=function(n){var e=a.a.useContext(c),t=e;return n&&(t="function"==typeof n?n(e):Object.assign({},e,n)),t},l=function(n){var e=o(n.components);return a.a.createElement(c.Provider,{value:e},n.children)};var i="mdxType",s={inlineCode:"code",wrapper:function(n){var e=n.children;return a.a.createElement(a.a.Fragment,{},e)}},u=function(n){var e=n.components,t=n.mdxType,r=n.originalType,c=n.parentName,l=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&-1===e.indexOf(r)&&(t[r]=n[r]);return t}(n,["components","mdxType","originalType","parentName"]),i=o(e),u=t,p=i[c+"."+u]||i[u]||s[u]||r;return e?a.a.createElement(p,Object.assign({},l,{components:e})):a.a.createElement(p,l)};function p(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var c=t.length,o=new Array(c);o[0]=u;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l[i]="string"==typeof n?n:r,o[1]=l;for(var p=2;p<c;p++)o[p]=t[p];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);