(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{206:function(n,e,t){"use strict";t.r(e),t.d(e,"frontMatter",function(){return a}),t.d(e,"rightToc",function(){return c}),t.d(e,"default",function(){return u});t(0);var r=t(251);function o(){return(o=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function i(n,e){if(null==n)return{};var t,r,o=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(o[t]=n[t]);return o}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(o[t]=n[t])}return o}var a={title:"react-native-video 使用总结",date:new Date("2018-06-16T15:18:39.000Z"),toc:!0},c=[{value:"全屏播放",id:"全屏播放",children:[]}],s={rightToc:c},l="wrapper";function u(n){var e=n.components,t=i(n,["components"]);return Object(r.b)(l,o({},s,t,{components:e,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"全屏播放"},"全屏播放"),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"import React, {Component} from 'react';\nimport {Button, Platform, StyleSheet, Dimensions, View} from 'react-native';\nimport Video from 'react-native-video';\nimport Orientation from 'react-native-orientation';\n\nconst {width, height} = Dimensions.get('window')\n\ntype Props = {};\nexport default class App extends Component<Props> {\n    constructor(props) {\n        super(props)\n        this.state = {\n            videoWidth: width,\n            videoHeight: height,\n            isFullScreen: true,\n            videoUrl:'http://v8.yongjiu8.com/20180802/kzCulbjS/index.m3u8'\n        }\n    }\n\n    onBuffer = () => {\n\n    }\n\n    onEnd = () => {\n    }\n\n    videoError = () => {\n\n    }\n\n    componentWillMount() {\n\n    }\n\n    componentDidMount() {\n        // this locks the view to Portrait Mode\n\n\n        Orientation.addOrientationListener(this._onLayout);\n\n        Orientation.lockToLandscapeLeft()\n    }\n\n    _onLayout = (event) => {\n        //获取根View的宽高\n        let {width, height} = event.nativeEvent.layout;\n        console.log('通过onLayout得到的宽度：' + width);\n        console.log('通过onLayout得到的高度：' + height);\n\n        // 一般设备横屏下都是宽大于高，这里可以用这个来判断横竖屏\n        let isLandscape = (width > height);\n        if (isLandscape){\n            this.setState({\n                videoWidth: width,\n                videoHeight: height,\n                isFullScreen: true,\n            })\n        } else {\n            this.setState({\n                videoWidth: width,\n                videoHeight: width * 9/16,\n                isFullScreen: false,\n            })\n        }\n    }\n\n\n    render() {\n\n        return (\n            <View style={styles.container} onLayout={this._onLayout}>\n                <Video\n                    ref={(ref) => this.videoPlayer = ref}\n                    source={{uri: this.state.videoUrl}}\n                    rate={1.0}\n                    volume={1.0}\n                    muted={false}\n                    resizeMode={'cover'}\n                    playWhenInactive={false}\n                    playInBackground={false}\n                    ignoreSilentSwitch={'ignore'}\n                    progressUpdateInterval={250.0}\n                    style={{width: this.state.videoWidth, height: this.state.videoHeight}}\n                />\n            </View>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex:1\n    },\n    backgroundVideo: {\n        width: width,\n        height: height,\n    }\n});\n\n")))}u.isMDXComponent=!0},251:function(n,e,t){"use strict";t.d(e,"a",function(){return c}),t.d(e,"b",function(){return p});var r=t(0),o=t.n(r),i=o.a.createContext({}),a=function(n){var e=o.a.useContext(i),t=e;return n&&(t="function"==typeof n?n(e):Object.assign({},e,n)),t},c=function(n){var e=a(n.components);return o.a.createElement(i.Provider,{value:e},n.children)};var s="mdxType",l={inlineCode:"code",wrapper:function(n){var e=n.children;return o.a.createElement(o.a.Fragment,{},e)}},u=function(n){var e=n.components,t=n.mdxType,r=n.originalType,i=n.parentName,c=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&-1===e.indexOf(r)&&(t[r]=n[r]);return t}(n,["components","mdxType","originalType","parentName"]),s=a(e),u=t,p=s[i+"."+u]||s[u]||l[u]||r;return e?o.a.createElement(p,Object.assign({},c,{components:e})):o.a.createElement(p,c)};function p(n,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof n||r){var i=t.length,a=new Array(i);a[0]=u;var c={};for(var l in e)hasOwnProperty.call(e,l)&&(c[l]=e[l]);c.originalType=n,c[s]="string"==typeof n?n:r,a[1]=c;for(var p=2;p<i;p++)a[p]=t[p];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);