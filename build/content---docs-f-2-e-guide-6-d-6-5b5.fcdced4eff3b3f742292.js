(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{111:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",function(){return i}),n.d(t,"rightToc",function(){return c}),n.d(t,"default",function(){return p});n(0);var a=n(301);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i={title:"前端项目规范总结"},c=[{value:"代码格式",id:"代码格式",children:[{value:"校验 ESLint",id:"校验-eslint",children:[]},{value:"格式化 Prettier",id:"格式化-prettier",children:[]}]},{value:"git",id:"git",children:[{value:"git 规范",id:"git-规范",children:[]},{value:"Changelog生成",id:"changelog生成",children:[]},{value:"增加 commitlint",id:"增加-commitlint",children:[]}]}],o={rightToc:c},b="wrapper";function p(e){var t=e.components,n=r(e,["components"]);return Object(a.b)(b,l({},o,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"代码格式"},"代码格式"),Object(a.b)("h3",{id:"校验-eslint"},"校验 ESLint"),Object(a.b)("h3",{id:"格式化-prettier"},"格式化 Prettier"),Object(a.b)("h2",{id:"git"},"git"),Object(a.b)("h3",{id:"git-规范"},"git 规范"),Object(a.b)("p",null,"良好的 Git commit 规范优势："),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"加快 Code Review 流程"),Object(a.b)("li",{parentName:"ul"},"根据 Git Commit 的元数据生成 Changelog"),Object(a.b)("li",{parentName:"ul"},"后续维护者可以知道 Feature 被修改的原因")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"技术方案")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"统一团队 Git commit 日志标准，便于后续代码 review 和版本发布"),Object(a.b)("li",{parentName:"ul"},"使用 ",Object(a.b)("a",l({parentName:"li"},{href:"https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#heading=h.greljkmo14y0"}),"angular")," 的 Git commit 日志作为基本规范",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"提交格式限制为：feat, fix, docs, style, refactor, perf, test, chore, revert 等"),Object(a.b)("li",{parentName:"ul"},"提交信息分为两部分：标题(首字母不大写，末尾不加标点)、主体内容(正常描述即可)"))),Object(a.b)("li",{parentName:"ul"},"日志提交时友好的类型选择提示： 使用",Object(a.b)("inlineCode",{parentName:"li"},"commitize"),"工具进行",Object(a.b)("inlineCode",{parentName:"li"},"git commit"),"命令。"),Object(a.b)("li",{parentName:"ul"},"不符合要求格式的日志拒绝提交的保障机制",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"使用 ",Object(a.b)("a",l({parentName:"li"},{href:"https://github.com/conventional-changelog/commitlint"}),"commitlint")," 工具"),Object(a.b)("li",{parentName:"ul"},"需要同时在客户端、gitlab server hook 做"))),Object(a.b)("li",{parentName:"ul"},"统一 changelog 文档信息生成： 使用 ",Object(a.b)("a",l({parentName:"li"},{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli"}),"conventional-changelog-cli")," 工具")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"提交格式要求")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{}),"<type>(<scope>): <subject>\n<BLANK LINE>\n<body>\n<BLANK LINE>\n<footer>\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"type 表示提交的类型，所有类型如下：",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"feat: 新增 feature"),Object(a.b)("li",{parentName:"ul"},"fix: 修复 bug"),Object(a.b)("li",{parentName:"ul"},"docs: 仅仅修改了文档，比如README, CHANGELOG, CONTRIBUTE 等"),Object(a.b)("li",{parentName:"ul"},"style: 仅仅修改了空格、格式缩进、逗号等，不改变代码逻辑"),Object(a.b)("li",{parentName:"ul"},"refactor: 代码重构，没有加新功能或者修复 bug"),Object(a.b)("li",{parentName:"ul"},"perf: 优化相关，比如提升性能、体验"),Object(a.b)("li",{parentName:"ul"},"test: 测试用例，包括单元测试、集成测试等"),Object(a.b)("li",{parentName:"ul"},"chore: 改变构建流程、或者增加依赖库、工具等"),Object(a.b)("li",{parentName:"ul"},"revert: 回滚到上一个版本")))),Object(a.b)("h3",{id:"changelog生成"},"Changelog生成"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"安装",Object(a.b)("inlineCode",{parentName:"li"},"conventional-changelog-cli"),"。")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{}),"npm i conventional-changelog-cli -D\n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"在",Object(a.b)("inlineCode",{parentName:"li"},"package.json"),"文件增加配置")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-json"}),'"script": {\n  "changelog": "conventional-changelog -p angular -i CHANGELOG.md -s -r 0"\n}\n')),Object(a.b)("h3",{id:"增加-commitlint"},"增加 commitlint"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"安装 husky")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{}),"npm i husky -D\n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"安装 commitlint")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{}),"npm install --save-dev @commitlint/{config-conventional,cli}\n\necho \"module.exports = {extends: ['@commitlint/config-conventional']}\" > commitlint.config.js\n")),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"在",Object(a.b)("inlineCode",{parentName:"li"},"package.json"),"文件中增加钩子配置。")),Object(a.b)("pre",null,Object(a.b)("code",l({parentName:"pre"},{className:"language-json"}),'{\n  "husky": {\n    "hooks": {\n      "commit-msg": "commitlint -E"\n    }\n  }\n}\n')),Object(a.b)("p",null,"上面的配置，在运行 git commit 时，commitlint 会自动找配置文件 commitlint.config.js 检查信息是否符合规范，不符合则报错。"))}p.isMDXComponent=!0},301:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return m});var a=n(0),l=n.n(a),r=l.a.createContext({}),i=function(e){var t=l.a.useContext(r),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},c=function(e){var t=i(e.components);return l.a.createElement(r.Provider,{value:t},e.children)};var o="mdxType",b={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},p=function(e){var t=e.components,n=e.mdxType,a=e.originalType,r=e.parentName,c=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),o=i(t),p=n,m=o[r+"."+p]||o[p]||b[p]||a;return t?l.a.createElement(m,Object.assign({},c,{components:t})):l.a.createElement(m,c)};function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var c={};for(var b in t)hasOwnProperty.call(t,b)&&(c[b]=t[b]);c.originalType=e,c[o]="string"==typeof e?e:a,i[1]=c;for(var m=2;m<r;m++)i[m]=n[m];return l.a.createElement.apply(null,i)}return l.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);