(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{293:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return b});var a=n(0),r=n.n(a),o=r.a.createContext({}),i=function(e){var t=r.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},l=function(e){var t=i(e.components);return r.a.createElement(o.Provider,{value:t},e.children)};var c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=function(e){var t=e.components,n=e.mdxType,a=e.originalType,o=e.parentName,l=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(n[a]=e[a]);return n}(e,["components","mdxType","originalType","parentName"]),c=i(t),s=n,b=c[o+"."+s]||c[s]||p[s]||a;return t?r.a.createElement(b,Object.assign({},l,{components:t})):r.a.createElement(b,l)};function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=s;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[c]="string"==typeof e?e:a,i[1]=l;for(var b=2;b<o;b++)i[b]=n[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"},95:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",function(){return i}),n.d(t,"rightToc",function(){return l}),n.d(t,"default",function(){return s});n(0);var a=n(293);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i={title:"关于本博客的制作"},l=[{value:"添加评论功能 gitalk",id:"添加评论功能-gitalk",children:[]}],c={rightToc:l},p="wrapper";function s(e){var t=e.components,n=o(e,["components"]);return Object(a.b)(p,r({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"博客从最初的 hexo，到现在换成使用",Object(a.b)("a",r({parentName:"p"},{href:"https://v2.docusaurus.io"}),"docusaurus"),"。"),Object(a.b)("h2",{id:"添加评论功能-gitalk"},"添加评论功能 gitalk"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"首先要将模版组件弹出，然后再进行修改。模版组件再",Object(a.b)("inlineCode",{parentName:"li"},"node_modules/@docusaurus/theme-classic"),"下。")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),"npm run swizzle @docusaurus/theme-classic BlogPostPage\nnpm run swizzle @docusaurus/theme-classic DocLegacyItem\n")),Object(a.b)("p",null,"使用上面命令后，文件将会弹出到项目的",Object(a.b)("inlineCode",{parentName:"p"},"src/theme"),"下。"),Object(a.b)("ol",{start:2},Object(a.b)("li",{parentName:"ol"},"在",Object(a.b)("inlineCode",{parentName:"li"},"src/theme"),"下添加 GitalkComment.js。代码如下：")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-js"}),"import React, {Component} from 'react'\nimport 'gitalk/dist/gitalk.css'\nimport Gitalk from 'gitalk'\n\nclass GitalkComment extends Component{\n  componentDidMount(){\n    var gitalk = new Gitalk({\n      clientID: '92f9ff606fd031145a24',\n      clientSecret: '92e5c59ae06a2ce34caeecf85a9d1666a20f36c0',\n      repo: 'blog_comment',  // 仓库名称\n      owner: 'banli17',      // 仓库作者\n      admin: ['banli17'],\n      id: location.pathname,      // Ensure uniqueness and length less than 50\n      distractionFreeMode: false  // Facebook-like distraction free mode\n    })\n    \n    gitalk.render('gitalk-container')\n  }\n  render(){\n    return <div id=\"gitalk-container\"></div>\n  }\n}\nexport default GitalkComment;\n")),Object(a.b)("p",null,"具体的gittalk配置，需要到 ",Object(a.b)("a",r({parentName:"p"},{href:"https://github.com/settings/applications/new"}),"https://github.com/settings/applications/new")," 去注册一个应用。"),Object(a.b)("p",null,"注册时",Object(a.b)("inlineCode",{parentName:"p"},"Homepage URL"),"、",Object(a.b)("inlineCode",{parentName:"p"},"Authorization callback URL"),"都填写网站域名即可，如",Object(a.b)("inlineCode",{parentName:"p"},"https://www.banli17.com/"),"。"),Object(a.b)("p",null,"注册完成后，就可以看到 ID 了。"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"clientID、clientSecret: 注册应用后，可以看到。也可以在 github 的",Object(a.b)("inlineCode",{parentName:"li"},"settings -> Developer settings -> OAuth Apps"),"看到。"),Object(a.b)("li",{parentName:"ul"},"repo: 在 github 新建一个项目",Object(a.b)("inlineCode",{parentName:"li"},"blog_comment"),"(名字可随意，注意填写的不是github地址，而是项目名)，评论会保存到这个项目的 issue 中。")),Object(a.b)("ol",{start:3},Object(a.b)("li",{parentName:"ol"},"插入代码",Object(a.b)("inlineCode",{parentName:"li"},"<GitalkComment>"),"到合适位置。")),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"src/theme/DocLegacyItem/index.js")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-jsx"}),'<div className="margin-top--xl margin-bottom--lg">\n    <DocLegacyPaginator\n        docsMetadata={docsMetadata}\n        metadata={metadata}\n    />\n    <GitalkComment />   \n</div>\n')),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"src/theme/BolgPostPage/index.js")),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{className:"language-jsx"}),'<div className="margin-vert--xl">\n    <BlogPostPaginator nextItem={nextItem} prevItem={prevItem} />\n    <GitalkComment />\n</div>\n')),Object(a.b)("ol",{start:4},Object(a.b)("li",{parentName:"ol"},"发布到线上，就可以看到评论框。注意每个页面都需要管理员登录后打开一下，即初始化创建后，其它用户才能在这个页面评论。")))}s.isMDXComponent=!0}}]);