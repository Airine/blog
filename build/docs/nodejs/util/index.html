<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.d719e73e126f22665d27.css","/main.477abd2e0f7ae11842aa.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.7f8bb42332d3fb863b06.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.8e2d2ee446add4b2b98b.js"],"content---blog-2019-08-12-think-house-362-b31":["/content---blog-2019-08-12-think-house-362-b31.9dd4d64cef8935947cc6.js"],"metadata---blog-2019-08-12-think-house-3-b-6-904":["/metadata---blog-2019-08-12-think-house-3-b-6-904.d9830d5a5942cab785a0.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.0a21799c9e5ea3fceb3b.js"],"content---bloga-55-f4d":["/content---bloga-55-f4d.489c2054c790952ef46d.js"],"metadata---blog-92-a-15c":["/metadata---blog-92-a-15c.5ff7289cd93f83a7673d.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css","/component---theme-doc-legacy-page-9-e-7-ca5.1085c0ca4dac1d879092.js"],"docsMetadata---docs-9-a-9-239":["/docsMetadata---docs-9-a-9-239.efc62167d7e7e974bd14.js"],"component---theme-doc-legacy-item-031-769":["/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css","/component---theme-doc-legacy-item-031-769.63af36fb5b293fb44f17.js"],"content---docs-about-3-d-8-538":["/content---docs-about-3-d-8-538.b22f4002fb1de87b1230.js"],"metadata---docs-about-443-9ff":["/metadata---docs-about-443-9ff.73c084d649e4c149a16d.js"],"content---docs-base-compute-combinef-7-f-933":["/content---docs-base-compute-combinef-7-f-933.bbe804fc4e1766f967d3.js"],"metadata---docs-base-compute-combine-480-a12":["/metadata---docs-base-compute-combine-480-a12.3f3c4e034751065ae378.js"],"content---docs-database-mongo-2-c-4-a31":["/content---docs-database-mongo-2-c-4-a31.e91455dcec407920091d.js"],"metadata---docs-database-mongo-0-c-2-f76":["/metadata---docs-database-mongo-0-c-2-f76.af6ba28657bd992ab268.js"],"content---docs-algo-indexb-4-f-54a":["/content---docs-algo-indexb-4-f-54a.f544321e6098b7e21cb2.js"],"metadata---docs-algo-index-812-55b":["/metadata---docs-algo-index-812-55b.967a6c554af6d0ec71c7.js"],"content---docs-database-mysql-561-697":["/content---docs-database-mysql-561-697.8d9b06089ed38971996c.js"],"metadata---docs-database-mysql-2-f-1-3e5":["/metadata---docs-database-mysql-2-f-1-3e5.b8ec8aff626a76d0b3f1.js"],"content---docs-database-redise-5-d-9ae":["/content---docs-database-redise-5-d-9ae.8da280d7a5afc1ada019.js"],"metadata---docs-database-redis-4-a-0-66e":["/metadata---docs-database-redis-4-a-0-66e.1e20f9eb218cd3aaa120.js"],"content---docs-demo-index-648-2ab":["/content---docs-demo-index-648-2ab.7a9097eea3f4eb857d5f.js"],"metadata---docs-demo-indexa-04-089":["/metadata---docs-demo-indexa-04-089.d02205114cc145ec515a.js"],"content---docs-base-h-5586-54d":["/content---docs-base-h-5586-54d.2258338422d575187d27.js"],"metadata---docs-base-h-515-a-1cb":["/metadata---docs-base-h-515-a-1cb.50cde03a6341136d8e1e.js"],"content---docs-linux-fileec-1-765":["/content---docs-linux-fileec-1-765.b668459315fc826dbf36.js"],"metadata---docs-linux-file-65-c-c93":["/metadata---docs-linux-file-65-c-c93.06f1005462e771673c93.js"],"content---docs-linux-service-49-b-272":["/content---docs-linux-service-49-b-272.88cddff68450d2d288ad.js"],"metadata---docs-linux-serviceac-8-d7f":["/metadata---docs-linux-serviceac-8-d7f.a8db4496c4521adf47a9.js"],"content---docs-linux-soft-422-6cf":["/content---docs-linux-soft-422-6cf.5f724b64dea651a6dd94.js"],"metadata---docs-linux-softe-01-10b":["/metadata---docs-linux-softe-01-10b.dd8a48e3918d13d73eb8.js"],"content---docs-linux-indexcb-8-9a7":["/content---docs-linux-indexcb-8-9a7.f47eeb5f2d9d73fc2a84.js"],"metadata---docs-linux-index-73-e-38c":["/metadata---docs-linux-index-73-e-38c.753c4d1a4f0cce68c442.js"],"content---docs-nginx-index-16-d-468":["/content---docs-nginx-index-16-d-468.d2297635196c4020956c.js"],"metadata---docs-nginx-index-4-a-2-2e4":["/metadata---docs-nginx-index-4-a-2-2e4.0ab02bb90f0c7bc8d6bd.js"],"content---docs-nodejs-async-7-f-4-0af":["/content---docs-nodejs-async-7-f-4-0af.5454ce07fa8ff7325eaa.js"],"metadata---docs-nodejs-asyncc-40-22b":["/metadata---docs-nodejs-asyncc-40-22b.f8e18069e6bfba6ea18c.js"],"content---docs-nodejs-testaf-7-5fa":["/content---docs-nodejs-testaf-7-5fa.c53522930b8dc8c26e7c.js"],"metadata---docs-nodejs-testbf-0-08d":["/metadata---docs-nodejs-testbf-0-08d.a9a72c6fab71ce5736fd.js"],"content---docs-nodejs-safee-0-a-532":["/content---docs-nodejs-safee-0-a-532.656a522f1e2499551386.js"],"metadata---docs-nodejs-safe-287-46f":["/metadata---docs-nodejs-safe-287-46f.a48c917a3ab21d94ff84.js"],"content---docs-other-blogaab-295":["/content---docs-other-blogaab-295.90b83606127347166591.js"],"metadata---docs-other-blogc-8-f-558":["/metadata---docs-other-blogc-8-f-558.85a843134419b7762136.js"],"content---docs-nodejs-utild-25-062":["/content---docs-nodejs-utild-25-062.7abc674669aa1b8e7b27.js"],"metadata---docs-nodejs-util-0-fd-711":["/metadata---docs-nodejs-util-0-fd-711.d07acf2cb8f71bdf235d.js"],"content---docs-other-maced-3-b03":["/content---docs-other-maced-3-b03.144f24782733bff7f170.js"],"metadata---docs-other-macc-8-c-bc8":["/metadata---docs-other-macc-8-c-bc8.f1056687ee296d57433a.js"],"content---docs-other-kindle-rss-789-941":["/content---docs-other-kindle-rss-789-941.191a58e9a0d6983d3b18.js"],"metadata---docs-other-kindle-rssb-06-572":["/metadata---docs-other-kindle-rssb-06-572.56dbcb3d237d53220829.js"],"content---docs-patterns-action-61-d-c76":["/content---docs-patterns-action-61-d-c76.1db7f876e899fec516eb.js"],"metadata---docs-patterns-action-124-4bd":["/metadata---docs-patterns-action-124-4bd.81816e08d7e197fbc992.js"],"content---docs-other-resourceea-2-ecf":["/content---docs-other-resourceea-2-ecf.79aff6c31eaaa438938c.js"],"metadata---docs-other-resource-348-7b5":["/metadata---docs-other-resource-348-7b5.f36a0245c8152f928000.js"],"content---docs-patterns-bridge-335-1e9":["/content---docs-patterns-bridge-335-1e9.b15592c2851328564e6b.js"],"metadata---docs-patterns-bridgefbb-495":["/metadata---docs-patterns-bridgefbb-495.36847cfe0994f3493cb7.js"],"content---docs-patterns-adapter-555-7ec":["/content---docs-patterns-adapter-555-7ec.2112961b332c479ac795.js"],"metadata---docs-patterns-adapter-464-f76":["/metadata---docs-patterns-adapter-464-f76.5b7ed24c6f3769df781c.js"],"content---docs-patterns-chain-of-responsibility-579-dfa":["/content---docs-patterns-chain-of-responsibility-579-dfa.66dea4296433b6cf98c9.js"],"metadata---docs-patterns-chain-of-responsibility-014-8a0":["/metadata---docs-patterns-chain-of-responsibility-014-8a0.3df75643a5b906e0e95e.js"],"content---docs-patterns-builder-5-e-5-e3a":["/content---docs-patterns-builder-5-e-5-e3a.e6629fbefca8e3a8aac2.js"],"metadata---docs-patterns-builderead-d21":["/metadata---docs-patterns-builderead-d21.d2361792867897216584.js"],"content---docs-patterns-commande-85-4af":["/content---docs-patterns-commande-85-4af.2c197182cb87c0ae1f68.js"],"metadata---docs-patterns-command-80-a-50e":["/metadata---docs-patterns-command-80-a-50e.9f9dded3c382b0277e99.js"],"content---docs-patterns-composite-33-e-80d":["/content---docs-patterns-composite-33-e-80d.2dd077321435164de2fc.js"],"metadata---docs-patterns-composite-238-38a":["/metadata---docs-patterns-composite-238-38a.0501a960cff28811d86b.js"],"content---docs-patterns-decorator-944-f6d":["/content---docs-patterns-decorator-944-f6d.231b091ccecdcf27e54c.js"],"metadata---docs-patterns-decorator-142-9e2":["/metadata---docs-patterns-decorator-142-9e2.af6480bb05e36aaf5bbc.js"],"content---docs-patterns-facade-4-ef-b2f":["/content---docs-patterns-facade-4-ef-b2f.2f3608c06db80e48fffa.js"],"metadata---docs-patterns-facade-7-a-8-297":["/metadata---docs-patterns-facade-7-a-8-297.8994ec660f8979f26d3f.js"],"content---docs-patterns-factoryf-00-197":["/content---docs-patterns-factoryf-00-197.a5183b1395d1ee6b4c04.js"],"metadata---docs-patterns-factory-659-5cc":["/metadata---docs-patterns-factory-659-5cc.64975baaafd3bc6b0d9a.js"],"content---docs-patterns-flyweighte-43-831":["/content---docs-patterns-flyweighte-43-831.e3ac10a150bc7e94cbc5.js"],"metadata---docs-patterns-flyweightaba-d18":["/metadata---docs-patterns-flyweightaba-d18.e87d091a67e991b4cbee.js"],"content---docs-patterns-index-90-d-78a":["/content---docs-patterns-index-90-d-78a.40dac31f5fafd19ace72.js"],"metadata---docs-patterns-index-63-b-9e3":["/metadata---docs-patterns-index-63-b-9e3.3a645f801826c6531d22.js"],"content---docs-patterns-interpreterc-34-4ff":["/content---docs-patterns-interpreterc-34-4ff.b26bdf0f10f33e86db6e.js"],"metadata---docs-patterns-interpreter-484-b15":["/metadata---docs-patterns-interpreter-484-b15.8bf5662275ef37990978.js"],"content---docs-patterns-mediator-685-4ef":["/content---docs-patterns-mediator-685-4ef.af8aaa2f6c46fba56ffa.js"],"metadata---docs-patterns-mediator-421-d91":["/metadata---docs-patterns-mediator-421-d91.37e0d59a654f39db1d68.js"],"content---docs-patterns-iterator-3-bc-1d4":["/content---docs-patterns-iterator-3-bc-1d4.553678cbac18b755d2c1.js"],"metadata---docs-patterns-iterator-288-f03":["/metadata---docs-patterns-iterator-288-f03.096363b38361bcc943f6.js"],"content---docs-patterns-memento-740-286":["/content---docs-patterns-memento-740-286.883958ef8d16f3e8537c.js"],"metadata---docs-patterns-memento-098-f69":["/metadata---docs-patterns-memento-098-f69.a737176f488438f1d246.js"],"content---docs-patterns-observer-73-f-441":["/content---docs-patterns-observer-73-f-441.ab60d4d039ef9ba8920d.js"],"metadata---docs-patterns-observere-90-4f8":["/metadata---docs-patterns-observere-90-4f8.6ced65f460928095c70c.js"],"content---docs-patterns-proxyb-6-e-4ef":["/content---docs-patterns-proxyb-6-e-4ef.cca080c448d090f41be7.js"],"metadata---docs-patterns-proxye-47-a3c":["/metadata---docs-patterns-proxye-47-a3c.234134dcae7db5ad9a43.js"],"content---docs-patterns-singleton-710-727":["/content---docs-patterns-singleton-710-727.45783f8b86cf328f4660.js"],"metadata---docs-patterns-singletonb-35-b33":["/metadata---docs-patterns-singletonb-35-b33.e4410205e4b63b2b0192.js"],"content---docs-patterns-prototype-93-c-d70":["/content---docs-patterns-prototype-93-c-d70.28f4edaac5325115ccb2.js"],"metadata---docs-patterns-prototype-8-ac-89b":["/metadata---docs-patterns-prototype-8-ac-89b.81c1926ddca4c0ee17c5.js"],"content---docs-patterns-stated-4-a-502":["/content---docs-patterns-stated-4-a-502.aff490fbcfbd4d613e22.js"],"metadata---docs-patterns-stateb-04-819":["/metadata---docs-patterns-stateb-04-819.dbfb7b76a5f0bf1070ef.js"],"content---docs-patterns-strategy-9-e-9-61c":["/content---docs-patterns-strategy-9-e-9-61c.2154ac691f82d145481e.js"],"metadata---docs-patterns-strategy-6-ce-04f":["/metadata---docs-patterns-strategy-6-ce-04f.dc13e188379edea75baf.js"],"content---docs-patterns-templateee-1-6e8":["/content---docs-patterns-templateee-1-6e8.99542a775d4d7331ab97.js"],"metadata---docs-patterns-template-3-bc-bf3":["/metadata---docs-patterns-template-3-bc-bf3.daecb8563311a626ef0b.js"],"content---docs-patterns-visitorff-6-bda":["/content---docs-patterns-visitorff-6-bda.4551872699bc75006cb1.js"],"metadata---docs-patterns-visitore-38-a38":["/metadata---docs-patterns-visitore-38-a38.6c1f416beb83d0fa4cc5.js"],"content---docs-base-net-tcpd-0-c-487":["/content---docs-base-net-tcpd-0-c-487.ded6692aa2655c6522aa.js"],"metadata---docs-base-net-tcp-212-c6f":["/metadata---docs-base-net-tcp-212-c6f.8dd35e78bad2b65b9006.js"],"content---docs-f-2-e-browser-cache-260-909":["/content---docs-f-2-e-browser-cache-260-909.edf99a580762ddae6c5e.js"],"metadata---docs-f-2-e-browser-cache-361-a94":["/metadata---docs-f-2-e-browser-cache-361-a94.28e7216342319a1a6962.js"],"content---docs-base-net-http-1-cc-352":["/content---docs-base-net-http-1-cc-352.8c0532a7b7d2b66979ee.js"],"metadata---docs-base-net-http-373-f55":["/metadata---docs-base-net-http-373-f55.a21647d861d5aaf9bd51.js"],"content---docs-f-2-e-browser-eventa-5-d-93e":["/content---docs-f-2-e-browser-eventa-5-d-93e.ecfddb3e4b879bc8d4a6.js"],"metadata---docs-f-2-e-browser-event-0-cc-f3c":["/metadata---docs-f-2-e-browser-event-0-cc-f3c.eb85d5e63ff050f42c82.js"],"content---docs-f-2-e-browser-devtool-850-efc":["/content---docs-f-2-e-browser-devtool-850-efc.5b23ab4200958d1b3637.js"],"metadata---docs-f-2-e-browser-devtool-3-ab-d05":["/metadata---docs-f-2-e-browser-devtool-3-ab-d05.9fe5ea30673d765636ce.js"],"content---docs-f-2-e-browser-eventloop-473-bc4":["/content---docs-f-2-e-browser-eventloop-473-bc4.88281ef36c33f14955d2.js"],"metadata---docs-f-2-e-browser-eventloopcbb-9eb":["/metadata---docs-f-2-e-browser-eventloopcbb-9eb.44ebbe5e3e5a0be45b22.js"],"content---docs-f-2-e-browser-fetch-147-732":["/content---docs-f-2-e-browser-fetch-147-732.73df2df1c899b03dcdb5.js"],"metadata---docs-f-2-e-browser-fetch-918-58f":["/metadata---docs-f-2-e-browser-fetch-918-58f.67ea03597bbedee8f8cb.js"],"content---docs-f-2-e-browser-storage-0-e-2-cd2":["/content---docs-f-2-e-browser-storage-0-e-2-cd2.e4c1c246ee4ee3ef5ef5.js"],"metadata---docs-f-2-e-browser-storagea-21-a7b":["/metadata---docs-f-2-e-browser-storagea-21-a7b.2693ccc675c0f98748f7.js"],"content---docs-f-2-e-browser-dom-018-426":["/content---docs-f-2-e-browser-dom-018-426.407ac50822c262f3ea09.js"],"metadata---docs-f-2-e-browser-domb-41-90c":["/metadata---docs-f-2-e-browser-domb-41-90c.40c3d9385d9932dc62ef.js"],"content---docs-f-2-e-browser-v-8-c-83-515":["/content---docs-f-2-e-browser-v-8-c-83-515.25aa6d0bfec445cd0539.js"],"metadata---docs-f-2-e-browser-v-8-e-60-c45":["/metadata---docs-f-2-e-browser-v-8-e-60-c45.772e0b55782ed70ec81e.js"],"content---docs-f-2-e-browser-work-31-f-d77":["/content---docs-f-2-e-browser-work-31-f-d77.a0c465be0361c3dbe22c.js"],"metadata---docs-f-2-e-browser-work-9-d-7-1ef":["/metadata---docs-f-2-e-browser-work-9-d-7-1ef.259c8c7b2df2b3dead04.js"],"content---docs-f-2-e-css-indexf-55-541":["/content---docs-f-2-e-css-indexf-55-541.f41dc6a33da05bec58f8.js"],"metadata---docs-f-2-e-css-indexe-08-461":["/metadata---docs-f-2-e-css-indexe-08-461.621a33c5d05c74a2bd99.js"],"content---docs-f-2-e-html-index-9-d-1-79a":["/content---docs-f-2-e-html-index-9-d-1-79a.aa737df8610ee0edd562.js"],"metadata---docs-f-2-e-html-index-24-f-1e4":["/metadata---docs-f-2-e-html-index-24-f-1e4.70a9dd97a9cd531129d0.js"],"content---docs-f-2-e-javascript-grammer-447-369":["/content---docs-f-2-e-javascript-grammer-447-369.f7b80ec1b5e8db94c92a.js"],"metadata---docs-f-2-e-javascript-grammer-6-df-3af":["/metadata---docs-f-2-e-javascript-grammer-6-df-3af.23d93ed5348e42d4d908.js"],"content---docs-f-2-e-javascript-modulee-10-ff1":["/content---docs-f-2-e-javascript-modulee-10-ff1.e8c585a2b0b180b14c2f.js"],"metadata---docs-f-2-e-javascript-moduleee-6-b43":["/metadata---docs-f-2-e-javascript-moduleee-6-b43.a7967cffe7804555bfc9.js"],"content---docs-f-2-e-monitor-index-391-ad0":["/content---docs-f-2-e-monitor-index-391-ad0.503db2e8f3fe2efaa097.js"],"metadata---docs-f-2-e-monitor-indexa-56-d7f":["/metadata---docs-f-2-e-monitor-indexa-56-d7f.970c636d0c0ec47b0bf0.js"],"content---docs-f-2-e-javascript-asynceb-2-d37":["/content---docs-f-2-e-javascript-asynceb-2-d37.1d92b62388af21ab94de.js"],"metadata---docs-f-2-e-javascript-async-09-f-030":["/metadata---docs-f-2-e-javascript-async-09-f-030.25a7228490d4cf49f2b2.js"],"content---docs-f-2-e-javascript-oop-3-a-2-e5a":["/content---docs-f-2-e-javascript-oop-3-a-2-e5a.c65260e27d9db92b251e.js"],"metadata---docs-f-2-e-javascript-oopaa-3-9b9":["/metadata---docs-f-2-e-javascript-oopaa-3-9b9.e942231bbc0e495f0e6a.js"],"content---docs-f-2-e-javascript-skill-687-c8f":["/content---docs-f-2-e-javascript-skill-687-c8f.74bd2f75577a97336731.js"],"metadata---docs-f-2-e-javascript-skilld-97-3a2":["/metadata---docs-f-2-e-javascript-skilld-97-3a2.cd114e7df341a974907b.js"],"content---docs-f-2-e-javascript-regexp-987-85e":["/content---docs-f-2-e-javascript-regexp-987-85e.42bab3214e526417d3cf.js"],"metadata---docs-f-2-e-javascript-regexp-239-ff9":["/metadata---docs-f-2-e-javascript-regexp-239-ff9.ba4fb34bdc5dcc94e0bf.js"],"content---docs-f-2-e-javascript-type-58-e-e47":["/content---docs-f-2-e-javascript-type-58-e-e47.5ad3368307959460988d.js"],"metadata---docs-f-2-e-javascript-typef-33-dde":["/metadata---docs-f-2-e-javascript-typef-33-dde.e96ec684ec8263d46c9d.js"],"content---docs-f-2-e-performance-indexaef-e1d":["/content---docs-f-2-e-performance-indexaef-e1d.a19b9d087cde8aa1b16c.js"],"metadata---docs-f-2-e-performance-index-3-de-87c":["/metadata---docs-f-2-e-performance-index-3-de-87c.fa958c859c38b85285c6.js"],"content---docs-f-2-e-react-index-0-cb-3f0":["/content---docs-f-2-e-react-index-0-cb-3f0.815aee0de96f4a421b3b.js"],"metadata---docs-f-2-e-react-indexc-85-6a6":["/metadata---docs-f-2-e-react-indexc-85-6a6.c4cf5f74ba2e693a1574.js"],"content---docs-f-2-e-react-native-alert-6-d-1-303":["/content---docs-f-2-e-react-native-alert-6-d-1-303.a904ff079c64362e4f44.js"],"metadata---docs-f-2-e-react-native-alert-5-f-9-3e3":["/metadata---docs-f-2-e-react-native-alert-5-f-9-3e3.7968965bd72899a9fafe.js"],"content---docs-f-2-e-react-native-androide-34-3a4":["/content---docs-f-2-e-react-native-androide-34-3a4.117d7a94fad5167e51ad.js"],"metadata---docs-f-2-e-react-native-android-0-b-3-456":["/metadata---docs-f-2-e-react-native-android-0-b-3-456.1636cbe5df919bbf3734.js"],"content---docs-f-2-e-react-native-camera-597-89d":["/content---docs-f-2-e-react-native-camera-597-89d.59bbc0f5548e77f8f4dd.js"],"metadata---docs-f-2-e-react-native-camera-27-a-253":["/metadata---docs-f-2-e-react-native-camera-27-a-253.3005b4f4738ea37d8732.js"],"content---docs-f-2-e-react-native-bugly-8-d-4-ab2":["/content---docs-f-2-e-react-native-bugly-8-d-4-ab2.d2acf37aa28e499cfb67.js"],"metadata---docs-f-2-e-react-native-buglyadb-596":["/metadata---docs-f-2-e-react-native-buglyadb-596.3394199ee5fbf770c1f4.js"],"content---docs-f-2-e-react-native-deploy-500-e54":["/content---docs-f-2-e-react-native-deploy-500-e54.fbe7dc438cca9b471128.js"],"metadata---docs-f-2-e-react-native-deploy-4-cf-03c":["/metadata---docs-f-2-e-react-native-deploy-4-cf-03c.42e8179692e50d9f2fa9.js"],"content---docs-f-2-e-react-native-code-pusha-39-174":["/content---docs-f-2-e-react-native-code-pusha-39-174.a2b0a669c96b1cdfaf9c.js"],"metadata---docs-f-2-e-react-native-code-push-7-b-7-231":["/metadata---docs-f-2-e-react-native-code-push-7-b-7-231.d1b2c854735aec9d02de.js"],"content---docs-f-2-e-react-native-form-7-a-1-0fb":["/content---docs-f-2-e-react-native-form-7-a-1-0fb.2edc8f77f59028df5ad3.js"],"metadata---docs-f-2-e-react-native-form-69-e-589":["/metadata---docs-f-2-e-react-native-form-69-e-589.7d39120ee98e8a5d6192.js"],"content---docs-f-2-e-react-native-fetch-756-af5":["/content---docs-f-2-e-react-native-fetch-756-af5.18e0f039ff3be3fe54ec.js"],"metadata---docs-f-2-e-react-native-fetchd-41-27d":["/metadata---docs-f-2-e-react-native-fetchd-41-27d.56ddedd34e8ac926dcc9.js"],"content---docs-f-2-e-react-native-issue-0-f-6-864":["/content---docs-f-2-e-react-native-issue-0-f-6-864.2d17cdbc4910fa8fe779.js"],"metadata---docs-f-2-e-react-native-issue-214-5cd":["/metadata---docs-f-2-e-react-native-issue-214-5cd.50942c03421bf7c141a7.js"],"content---docs-f-2-e-react-native-gitf-9-e-d83":["/content---docs-f-2-e-react-native-gitf-9-e-d83.dd440a13b75c0c6c9de6.js"],"metadata---docs-f-2-e-react-native-git-3-f-0-1e2":["/metadata---docs-f-2-e-react-native-git-3-f-0-1e2.1303c9e04bf2f36d0e06.js"],"content---docs-f-2-e-react-native-loading-84-c-73a":["/content---docs-f-2-e-react-native-loading-84-c-73a.65ca63a01b7b73bce402.js"],"metadata---docs-f-2-e-react-native-loadingf-98-f5d":["/metadata---docs-f-2-e-react-native-loadingf-98-f5d.63d4a7c73f4e5252a780.js"],"content---docs-f-2-e-react-native-index-889-a61":["/content---docs-f-2-e-react-native-index-889-a61.6cf777c526246692245b.js"],"metadata---docs-f-2-e-react-native-indexb-92-e43":["/metadata---docs-f-2-e-react-native-indexb-92-e43.e937a026ddf6a55d3c88.js"],"content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b":["/content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b.c1714b30c6abed71a055.js"],"metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a":["/metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a.48c72ec3aec362b7906f.js"],"content---docs-f-2-e-react-native-react-native-videoc-1-d-e43":["/content---docs-f-2-e-react-native-react-native-videoc-1-d-e43.cfbf91fed2c4623a6b3a.js"],"metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa":["/metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa.6710af3d91d98cca7324.js"],"content---docs-f-2-e-react-native-size-5-b-4-c24":["/content---docs-f-2-e-react-native-size-5-b-4-c24.65d77f6a064b0605331f.js"],"metadata---docs-f-2-e-react-native-sizefa-9-e54":["/metadata---docs-f-2-e-react-native-sizefa-9-e54.7f25ffec75b11ea6df77.js"],"content---docs-f-2-e-react-native-save-to-camera-693-68d":["/content---docs-f-2-e-react-native-save-to-camera-693-68d.59f7e8c3896af23a1bc5.js"],"metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735":["/metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735.86ebaa9c12e9f9eb3b00.js"],"content---docs-f-2-e-react-native-source-877-2ea":["/content---docs-f-2-e-react-native-source-877-2ea.acf2e5e3a1130e890d40.js"],"metadata---docs-f-2-e-react-native-source-9-b-5-f09":["/metadata---docs-f-2-e-react-native-source-9-b-5-f09.eba1114d7802361bed43.js"],"content---docs-f-2-e-react-native-tech-226-30f":["/content---docs-f-2-e-react-native-tech-226-30f.f3c520f2a64e6686cd7b.js"],"metadata---docs-f-2-e-react-native-techbca-407":["/metadata---docs-f-2-e-react-native-techbca-407.60e8005e9f5a4d90463f.js"],"content---docs-f-2-e-react-native-waterfall-629-6ad":["/content---docs-f-2-e-react-native-waterfall-629-6ad.c9d69ecd70b3af367874.js"],"metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37":["/metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37.6586128947e8ed32f960.js"],"content---docs-f-2-e-react-native-update-rn-93-f-50e":["/content---docs-f-2-e-react-native-update-rn-93-f-50e.7e2e2a951faab482273b.js"],"metadata---docs-f-2-e-react-native-update-rn-323-92d":["/metadata---docs-f-2-e-react-native-update-rn-323-92d.49766a88b8b68b2070db.js"],"content---docs-f-2-e-react-native-wechate-7-f-088":["/content---docs-f-2-e-react-native-wechate-7-f-088.6a6ebdeabe884a34c622.js"],"metadata---docs-f-2-e-react-native-wechate-47-3f8":["/metadata---docs-f-2-e-react-native-wechate-47-3f8.eae10f64ddc42ecc50cb.js"],"content---docs-f-2-e-safe-index-165-7db":["/content---docs-f-2-e-safe-index-165-7db.4b6e7f8e05e788bbb2e6.js"],"metadata---docs-f-2-e-safe-index-647-b0c":["/metadata---docs-f-2-e-safe-index-647-b0c.ebb3ccf6c878ce3fd8ac.js"],"content---docs-f-2-e-test-index-1-ae-bf1":["/content---docs-f-2-e-test-index-1-ae-bf1.f1822f2f4ac5eea69f74.js"],"metadata---docs-f-2-e-test-index-47-d-1a6":["/metadata---docs-f-2-e-test-index-47-d-1a6.f5a7d1897db19fd43e79.js"],"content---docs-f-2-e-test-jestfc-3-df1":["/content---docs-f-2-e-test-jestfc-3-df1.d040b9a2bcc6ee4112db.js"],"metadata---docs-f-2-e-test-jestda-3-2d2":["/metadata---docs-f-2-e-test-jestda-3-2d2.adab61b10dc884940697.js"],"content---docs-f-2-e-vue-index-02-b-a5c":["/content---docs-f-2-e-vue-index-02-b-a5c.1a89ee7799561a11c838.js"],"metadata---docs-f-2-e-vue-indexefd-70b":["/metadata---docs-f-2-e-vue-indexefd-70b.cf1da06406c97aa9fa7e.js"],"content---docs-f-2-e-vue-origind-8-a-797":["/content---docs-f-2-e-vue-origind-8-a-797.d2a1c92c815111e5ae49.js"],"metadata---docs-f-2-e-vue-origin-587-f6e":["/metadata---docs-f-2-e-vue-origin-587-f6e.e813ff92cd5be1db3996.js"],"content---docs-f-2-e-vue-zf-6-bb-fd6":["/content---docs-f-2-e-vue-zf-6-bb-fd6.692f41b8d417fafc6e9b.js"],"metadata---docs-f-2-e-vue-zf-258-73c":["/metadata---docs-f-2-e-vue-zf-258-73c.20ff3796deb4b2fd5507.js"],"content---docs-source-jquery-event-088-dda":["/content---docs-source-jquery-event-088-dda.f6e5868415ea4e65585a.js"],"metadata---docs-source-jquery-event-095-2e1":["/metadata---docs-source-jquery-event-095-2e1.1c699411bca0b71a279d.js"],"content---docs-f-2-e-webpack-basic-indexb-92-061":["/content---docs-f-2-e-webpack-basic-indexb-92-061.a356aab10b36725975a9.js"],"metadata---docs-f-2-e-webpack-basic-indexe-25-12c":["/metadata---docs-f-2-e-webpack-basic-indexe-25-12c.bc97bc27a12dd1743d78.js"],"content---docs-f-2-e-webpack-principle-indexab-1-27c":["/content---docs-f-2-e-webpack-principle-indexab-1-27c.72e6a91cc91a1c9ba7fb.js"],"metadata---docs-f-2-e-webpack-principle-index-6-fa-123":["/metadata---docs-f-2-e-webpack-principle-index-6-fa-123.6036461c39812f0a9a54.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.cdc359f6a4d913ae5117.js"],"metadata---blog-tags-house-375-d32":["/metadata---blog-tags-house-375-d32.e20a6720ecb0953ce25d.js"],"metadata---blog-tags-thinkd-55-455":["/metadata---blog-tags-thinkd-55-455.465f7f9506ae524a47b1.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.c1d0294e65cf51f7434b.js"],"tags---blog-tagse-51-a7c":["/tags---blog-tagse-51-a7c.90fa7a1570bf6531abb5.js"]};/*]]>*/</script>

<title data-react-helmet="true">NodeJS Util</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="NodeJS Util"/><meta data-react-helmet="true" name="description" content="## Util"/><meta data-react-helmet="true" property="og:description" content="## Util"/><meta data-react-helmet="true" property="og:url" content="https://www.banli17.com/docs/nodejs/util"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.d719e73e126f22665d27.css" />

<link rel="stylesheet" type="text/css" href="/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/2.76ced7e22babc8d30c3a.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css" />

<link rel="stylesheet" type="text/css" href="/3.76fc2d47232fd1193413.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a><a class="navbar__item navbar__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a><a class="navbar__item navbar__link" label="源码笔记" position="left" href="/docs/source/jquery/event">源码笔记</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" label="NodeJS" position="left" href="/docs/nodejs/util">NodeJS</a><a class="navbar__item navbar__link" label="设计模式" position="left" href="/docs/patterns/index">设计模式</a><a class="navbar__item navbar__link" label="算法" position="left" href="/docs/algo/index">算法</a><a class="navbar__item navbar__link" label="服务器" position="left" href="/docs/linux/index">服务器</a><a class="navbar__item navbar__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a><a class="navbar__item navbar__link" label="工具" position="left" href="/docs/other/mac">工具</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="博客" position="right" href="/blog">博客</a><a class="navbar__item navbar__link" label="关于" position="right" href="/docs/about">关于</a><a class="navbar__item navbar__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a></li><li class="menu__list-item"><a class="menu__link" label="源码笔记" position="left" href="/docs/source/jquery/event">源码笔记</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" label="NodeJS" position="left" href="/docs/nodejs/util">NodeJS</a></li><li class="menu__list-item"><a class="menu__link" label="设计模式" position="left" href="/docs/patterns/index">设计模式</a></li><li class="menu__list-item"><a class="menu__link" label="算法" position="left" href="/docs/algo/index">算法</a></li><li class="menu__list-item"><a class="menu__link" label="服务器" position="left" href="/docs/linux/index">服务器</a></li><li class="menu__list-item"><a class="menu__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a></li><li class="menu__list-item"><a class="menu__link" label="工具" position="left" href="/docs/other/mac">工具</a></li><li class="menu__list-item"><a class="menu__link" label="博客" position="right" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" label="关于" position="right" href="/docs/about">关于</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_Qb2S"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1uhT" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">nodejs</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/nodejs/util">Util</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/nodejs/test">测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/nodejs/async">事件/异步</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/nodejs/safe">安全</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_1VCq"><header><h1 class="margin-bottom--lg">NodeJS Util</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="util"></a><a aria-hidden="true" class="hash-link" href="#util">#</a>Util</h2><p>util这部分主要涉及的内容如下：</p><ul><li>URL</li><li>Query String</li><li>util模块</li><li>正则表达式</li><li>node常用模块</li></ul><h3><a aria-hidden="true" class="anchor" id="url"></a><a aria-hidden="true" class="hash-link" href="#url">#</a>URL</h3><ol><li>说说url组成部分，要求一个不漏的说出来？</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">┌─────────────────────────────────────────────────────────────────────────────┐</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│                                    href                                     │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">├──────────┬┬───────────┬─────────────────┬───────────────────────────┬───────┤</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│ protocol ││   auth    │      host       │           path            │ hash  │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│          ││           ├──────────┬──────┼──────────┬────────────────┤       │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│          ││           │ hostname │ port │ pathname │     search     │       │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│          ││           │          │      │          ├─┬──────────────┤       │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│          ││           │          │      │          │ │    query     │       │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token string" style="color:rgb(173, 219, 103)">&quot;  http:   // user:pass @ host.com : 8080   /p/a/t/h  ?  query=string   #hash &quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">│          ││           │          │      │          │ │              │       │</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">└──────────┴┴───────────┴──────────┴──────┴──────────┴─┴──────────────┴───────┘</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ol start="2"><li>关于url转义字符，为什么需要转义。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">range</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fill</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">_</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">String</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fromCharCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">encodeURI</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ol start="3"><li>url模块常用的方法。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;url&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> str </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string string" style="color:rgb(173, 219, 103)">`http://username:password@localhost:3000/pathname?query=1#hash`</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">/*</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">Url {</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  protocol: &#x27;http:&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  slashes: true,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  auth: &#x27;username:password&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  host: &#x27;localhost:3000&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  port: &#x27;3000&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  hostname: &#x27;localhost&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  hash: &#x27;#hash&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  search: &#x27;?query=1&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  query: [Object: null prototype] { query: &#x27;1&#x27; },</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  pathname: &#x27;/pathname&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  path: &#x27;/pathname?query=1&#x27;,</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">  href: &#x27;http://username:password@localhost:3000/pathname?query=1#hash&#x27;</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">}</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">*/</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>decodeURI</p><h3><a aria-hidden="true" class="anchor" id="query-string"></a><a aria-hidden="true" class="hash-link" href="#query-string">#</a>Query String</h3><p>query string是URL的一部分，就是url?后面<code>name=zs&amp;age=12</code>这样一串字符。node里内置了querystring模块用来解析它，还有第三方模块qs可以解析它。</p><p>querystring的常用方法：</p><ul><li><code>.parse(str[, sep[, eq[, options]]])</code>: 将query string解析为json对象。</li><li><code>.unescape(str)</code>: </li><li><code>.stringify(obj[, sep[, eq[, options]]])</code>: 将json对象转成query string。</li><li><code>.escape(str)</code></li></ul><p>自己试一试每个方法。querystring模块对深度结构的对象还不支持。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> querystring </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;querystring&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> qs </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;qs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">a </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> b </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">querystring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &#x27;a=&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">qs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">         </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// a%5Bb%5D=1  即 a[b]=1</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><blockquote><p>HTTP 如何通过 GET 方法 (URL) 传递 let arr = <!-- -->[1,2,3,4]<!-- --> 给服务器?</p></blockquote><p>这个很简单，我们向后端提交表单的时候，多个字段需要是<code>name=&quot;name[]&quot;</code>这种形式。所以只需要<code>https://your.host/api/?arr[0]=1&amp;arr[1]=2&amp;arr[2]=3&amp;arr[3]=4</code>即可。</p><h3><a aria-hidden="true" class="anchor" id="util-1"></a><a aria-hidden="true" class="hash-link" href="#util-1">#</a>util</h3><p>util模块是node的内置模块，提供了一些工具方法。这里很多方法都要会用且会实现原理。</p><ul><li><code>util.inherits()</code></li></ul><h3><a aria-hidden="true" class="anchor" id="正则表达式"></a><a aria-hidden="true" class="hash-link" href="#正则表达式">#</a>正则表达式</h3><p>这个不多说了，见：</p><ul><li><a href="/f2e/regexp-1">精通正则表达式之理论与实战</a></li><li><a href="/f2e/regexp-2">精通正则表达式之正则引擎原理</a></li></ul><h3><a aria-hidden="true" class="anchor" id="常用模块"></a><a aria-hidden="true" class="hash-link" href="#常用模块">#</a>常用模块</h3><ul><li><a href="https://github.com/sindresorhus/awesome-nodejs">Awesome Node.js</a></li><li><a href="https://www.npmjs.com/browse/depended">Most depended-upon packages</a></li></ul><p>上面的这些常用库首先要知道每个库的用途，然后在平时要用到的时候多用一用。</p><blockquote><p>写段代码获取某个文件夹下所有的文件名？</p></blockquote><h2><a aria-hidden="true" class="anchor" id="网络"></a><a aria-hidden="true" class="hash-link" href="#网络">#</a>网络</h2><h2><a aria-hidden="true" class="anchor" id="模块"></a><a aria-hidden="true" class="hash-link" href="#模块">#</a>模块</h2><p>模块涉及到的知识有：</p><ul><li>模块机制</li><li>热更新</li><li>上下文</li><li>包管理</li></ul><h2><a aria-hidden="true" class="anchor" id="io"></a><a aria-hidden="true" class="hash-link" href="#io">#</a>IO</h2><p>IO涉及到的知识：</p><ul><li>Buffer</li><li>String Decoder</li><li>Stream</li><li>Console</li><li>File System </li><li>Readline</li><li>REPL</li></ul><h3><a aria-hidden="true" class="anchor" id="buffer"></a><a aria-hidden="true" class="hash-link" href="#buffer">#</a>Buffer</h3><blockquote><p>linux 里的 buffer 是写缓存，数据存储时，先保存到磁盘缓冲区，然后再写入到永久空间。cache 读缓存，数据从磁盘读出后，暂留在缓冲区，预备程序接下来的使用。</p></blockquote><blockquote><p>Buffer 一般用于处理什么数据? 其长度能否动态变化? </p></blockquote><p>Buffer 是 Node.js 中用来处理二进制数据的类，其中与 IO 相关的操作(网络/文件等)均基于 Buffer。Buffer类的实例非常类似从 0-255 之间整数数组(其它整数会通过&amp;255强制转到此范围)，但其大小是固定不变的，且其内存在 V8 堆栈外分配原始内存空间。Buffer 的大小在创建时确定，且无法更改。</p><blockquote><p>为什么 new Buffer() 从6.x开始废弃？</p></blockquote><p>参数类型不同会返回不同类型的 Buffer 对象，所以如果开发者没有正确校验参数或没有正确初始化 Buffer 对象的内容时，就会不经意向代码中引入安全性或可靠性问题。</p><table><thead><tr><th>接口</th><th>用途</th></tr></thead><tbody><tr><td>Buffer.from()</td><td>根据已有数据生成一个 Buffer 对象</td></tr><tr><td>Buffer.alloc()</td><td>创建一个初始化后的 Buffer 对象</td></tr><tr><td>Buffer.allocUnsafe()</td><td>创建一个未初始化的 Buffer 对象</td></tr><tr><td>Buffer.concat(list<!-- -->[, totalLength]<!-- -->)</td><td>合并 Buffer 对象</td></tr><tr><td>buf.copy(target[, targetStart[, sourceStart<!-- -->[, sourceEnd]<!-- -->]])</td><td>拷贝buffer</td></tr><tr><td>buf.slice()</td><td>浅拷贝，即引用</td></tr><tr><td>buf.forEach()</td><td>遍历</td></tr></tbody></table><blockquote><p>实现concat、copy、split方法</p></blockquote><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">concat</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bufferList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">len</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">bufferList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">reduce</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain">a</span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> buffer </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">alloc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">len</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> offset </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    bufferList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">buf</span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">offset</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        offset </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p><strong>TypedArray</strong></p><p>Node.js 的 Buffer 在 ES6 增加了 TypedArray 类型后，修改了原来的 Buffer 实现，选择基于 TypedArray 中 Uint8Array 来实现，从而提高性能。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> arr </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Uint16Array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5000</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4000</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Uint16Array [ 5000, 4000 ]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//  拷贝buffer</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> buf1 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buf1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &lt;Buffer 88 a0&gt; </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 88 -&gt; 8*16+8 -&gt; 136 = 5000&amp;255</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// a0 -&gt; 10*16 -&gt; 160 = 4000&amp;255</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// ArrayBuffer { [Uint8Contents]: &lt;88 13 a0 0f&gt;, byteLength: 4 }</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 与buffer共享内存</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> buf2 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buf2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &lt;Buffer 88 13 a0 0f&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 1 * 16 + 3 = 19 -&gt; 154  </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 是引用，可以改变</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">arr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">6000</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buf1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 输出: &lt;Buffer 88 a0&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">buf2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 输出: &lt;Buffer 88 13 70 17&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="string-decoder"></a><a aria-hidden="true" class="hash-link" href="#string-decoder">#</a>String Decoder</h3><p><code>string_decoder</code>模块用于将 Buffer 对象解码成字符串，是对 <code>.toString()</code> 的补充。支持 utf8 和 utf16 解码。</p><ul><li><code>write()</code>: 这个方法会将 Buffer 写到缓存，并取出缓存中完整的部分字节。剩余不完整的留在缓存中。下次如果 write 传入剩余的字节，它就会返回。</li><li><code>end()</code>: 将缓存中的剩余字节一次性解码成字符串返回。</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token maybe-class-name">StringDecoder</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;string_decoder&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> decoder </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">StringDecoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;你好啊&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &lt;Buffer e4 bd a0 e5 a5 bd e5 95 8a&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 1) 首先 write 四个字节，前三个字节组成 `你`，剩下 `好` 的一部分字节 0xe5</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> str1 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> decoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0xe4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xbd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xa0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xe5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 你</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 2) 再次传入 `好` 的剩余字节</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> str2 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> decoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0xa5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0xbd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 好</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 3) 调用 end() 时如果传入的字节不完整</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> str3 </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> decoder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">end</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0xe5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// �   </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">str3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &lt;Buffer ef bf bd&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="stream"></a><a aria-hidden="true" class="hash-link" href="#stream">#</a>Stream</h3><p>Stream 流一般用于大文件任务，只需要用很小的内存就能完成大文件的拷贝。流的类型：</p><table><thead><tr><th>类</th><th>使用场景</th><th>重写方法</th></tr></thead><tbody><tr><td>Readable</td><td>只读</td><td>_read</td></tr><tr><td>Writeable</td><td>只写</td><td>_write</td></tr><tr><td>Duplex</td><td>读写</td><td>_read, _write</td></tr><tr><td>Transform</td><td>操作被写入数据，然后读出结果</td><td>_transform, _flush</td></tr></tbody></table><p><strong>对象模式</strong></p><p>通过 Node API 创建的流，只能操作字符串或 buffer。但流的实现可以基于其它 js 类型(除了 null，它在流中有特殊含义，表示流的结束)。这样的流就处于<code>对象模式(objectMode)</code>中。在创建流对象的时候，可以通过提供<code>objectMode</code>参数来生成对象模式的流。试图将现有流转为对象模式是不安全的。</p><p><strong>缓冲区</strong></p><p>读取的数据放入缓冲区，等待写入。Readable、Writeable 流都会将数据存入内部缓冲区，缓冲区可以分别通过 <code>writeable._writeableState.getBuffer()</code>和<code>readable._readableState.buffer</code>来访问。缓冲区大小由构造 stream 时的 hignWaterMark 标识指定可缓存多少字节，对于<code>objectMode</code>的 stream，该标志表示可容纳的对象个数。</p><p><strong>可读流</strong>
<strong>可写流</strong>
<strong>Duplex 和 Transform</strong>
<strong>pipe</strong></p><h3><a aria-hidden="true" class="anchor" id="console"></a><a aria-hidden="true" class="hash-link" href="#console">#</a>Console</h3><h3><a aria-hidden="true" class="anchor" id="file-system"></a><a aria-hidden="true" class="hash-link" href="#file-system">#</a>File System</h3><p>“一切皆是文件”是 Unix/Linux 的基本哲学之一, 不仅普通的文件、目录、字符设备、块设备、套接字等在 Unix/Linux 中都是以文件被对待, 也就是说这些资源的操作对象均为 fd (文件描述符), 都可以通过同一套 system call 来读写. 在 linux 中你可以通过 ulimit 来对 fd 资源进行一定程度的管理限制.</p><p><strong>编码</strong></p><blockquote><p>UTF8, GBK, es6 中对编码的支持, 如何计算一个汉字的长度?</p></blockquote><p><strong>stdio</strong></p><p>stdio (standard input output) 标准的输入输出流, 即输入流 (stdin), 输出流 (stdout), 错误流 (stderr) 三者. 在 Node.js 中分别对应 <code>process.stdin</code> (Readable), <code>process.stdout</code> (Writable) 以及 <code>process.stderr</code> (Writable) 三个 stream.</p><p>其中的 stream 则是指 stdout (输出流). 实际上在 shell 上运行一个应用程序的时候, shell 做的第一个操作是 fork 当前 shell 的进程 (所以, 如果你通过 ps 去查看你从 shell 上启动的进程, 其父进程 pid 就是当前 shell 的 pid), 在这个过程中也把 shell 的 stdio 继承给了你当前的应用进程, 所以你在当前进程里面将数据写入到 stdout, 也就是写入到了 shell 的 stdout, 即在当前 shell 上显示了.</p><p>输入也是同理, 当前进程继承了 shell 的 stdin, 所以当你从 stdin 中读取数据时, 其实就获取到你在 shell 上输入的数据</p><p>当你使用 ssh 在远程服务器上运行一个命令的时候, 在服务器上的命令输出虽然也是写入到服务器上 shell 的 stdout, 但是这个远程的 shell 是从 sshd 服务上 fork 出来的, 其 stdout 是继承自 sshd 的一个 fd, 这个 fd 其实是个 socket, 所以最终其实是写入到了一个 socket 中, 通过这个 socket 传输你本地的计算机上的 shell 的 stdout.</p><p>如果你理解了上述情况, 那么你也就能理解为什么守护进程需要关闭 stdio, 如果切到后台的守护进程没有关闭 stdio 的话, 那么你在用 shell 操作的过程中, 屏幕上会莫名其妙的多出来一些输出. </p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">for (; i &lt; getdtablesize(); ++i) {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">   close(i);  // 关闭打开的 fd</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>Linux/unix 的 fd 都被设计为整型数字, 从 0 开始. 你可以尝试运行如下代码查看.</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">stdin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 0</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">stdout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">stderr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 2</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>在上一节中的 在 IPC 通道建立之前, 父进程与子进程是怎么通信的? 如果没有通信, 那 IPC 是怎么建立的? 中使用环境变量传递 fd 的方法, 这么看起来就很直白了, 因为传递 fd 其实是直接传递了一个整型数字.</p><blockquote><p>如何同步的获取用户的输入?</p></blockquote><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">/*</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"> * http://stackoverflow.com/questions/3430939/node-js-readsync-from-stdin</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"> * @mklement0</span></div><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> fs </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;fs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">BUFSIZE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">256</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> buf </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token constant" style="color:rgb(130, 170, 255)">BUFSIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> bytesRead</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">exports</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> fd </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;win32&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">platform</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">stdin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">openSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;/dev/stdin&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;rs&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  bytesRead </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    bytesRead </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">readSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">BUFSIZE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;EAGAIN&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// &#x27;resource temporarily unavailable&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Happens on OS X 10.8.3 (not Windows 7!), if there&#x27;s no</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// stdin input - typically when invoking a script without any</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// input (for interactive stdin input).</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// If you were to just continue, you&#x27;d create a tight loop.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;ERROR: interactive stdin input not supported.&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      process</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">code</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;EOF&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Happens on Windows 7, but not OS X 10.8.3:</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// simply signals the end of *piped* stdin input.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// unexpected exception</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bytesRead </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// No more stdin input available.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// OS X 10.8.3: regardless of input method, this is how the end </span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//   of input is signaled.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Windows 7: this is how the end of input is signaled for</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//   *interactive* stdin input.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Process the chunk read.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> content </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> buf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> bytesRead </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> content</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="readline"></a><a aria-hidden="true" class="hash-link" href="#readline">#</a>Readline</h3><p><code>readline</code> 模块提供了一个用于从 Readable 的 stream(如 process.stdin)中一次读取一行的接口。常用的场景有日志分析、自动完成、命令行工具问答。</p><p>学习<a href="https://github.com/chyingp/nodejs-learning-guide/blob/master/%E6%A8%A1%E5%9D%97/readline.md">readline资料</a>后，自己再实现一遍：</p><ol><li>实现命令行输入字母，自动转大写输出。</li><li>日志读取</li><li>代码提示</li><li>实现npmt init</li></ol><blockquote><p>Readline 是如何实现的? (有思路即可) </p></blockquote><p>realine 在读取 TTY 的数据时, 是通过 <code>input.on(&#x27;keypress&#x27;, onkeypress)</code> 时发现用户按下了回车键来判断是新的 line 的, 而读取一般的 stream 时, 则是通过缓存数据然后用正则 .test 来判断是否为 new line 的.</p><blockquote><p>什么叫 IO, 什么又叫 IO 密集型业务?
Stream 的 highWaterMark 与 drain 事件是什么? 二者之间的关系是?
Stream 的 pipe 的作用是? 在 pipe 的过程中数据是引用传递还是拷贝传递?
什么是文件描述符? 输入流/输出流/错误流是什么?
console.log 是同步还是异步? 如何实现一个 console.log?
如何同步的获取用户的输入? </p></blockquote><h3><a aria-hidden="true" class="anchor" id="repl"></a><a aria-hidden="true" class="hash-link" href="#repl">#</a>REPL</h3><p>Read-Eval-Print-Loop (REPL)</p><h3><a aria-hidden="true" class="anchor" id="参考资料"></a><a aria-hidden="true" class="hash-link" href="#参考资料">#</a>参考资料</h3><ul><li><a href="https://github.com/chyingp/nodejs-learning-guide">Nodejs基础：巧用string_decoder将buffer转成string</a></li></ul><h2><a aria-hidden="true" class="anchor" id="错误处理"></a><a aria-hidden="true" class="hash-link" href="#错误处理">#</a>错误处理</h2><p>错误处理/调试部分主要涉及的内容如下：</p><ul><li>Errors(异常)</li><li>Domain(域)</li><li>Debugger(调试器)</li><li>C/C++ 插件</li><li>V8</li><li>内存快照</li><li>CPU profiling(CPU剖析)</li></ul><h3><a aria-hidden="true" class="anchor" id="v8"></a><a aria-hidden="true" class="hash-link" href="#v8">#</a>V8</h3><p>暂时看不懂，跳过</p><h3><a aria-hidden="true" class="anchor" id="内存快照"></a><a aria-hidden="true" class="hash-link" href="#内存快照">#</a>内存快照</h3><h2><a aria-hidden="true" class="anchor" id="os"></a><a aria-hidden="true" class="hash-link" href="#os">#</a>OS</h2><p>OS 这部分主要涉及的内容如下：</p><ul><li>TTY</li><li>OS</li><li>命令行参数</li><li>负载</li><li>CheckList</li><li>指标</li></ul><h3><a aria-hidden="true" class="anchor" id="tty"></a><a aria-hidden="true" class="hash-link" href="#tty">#</a>TTY</h3><h3><a aria-hidden="true" class="anchor" id="什么是-tty-"></a><a aria-hidden="true" class="hash-link" href="#什么是-tty-">#</a>什么是 TTY ?</h3><p><code>tty</code>原意是 teletype 打字机，<code>pty</code>则是 pseudo-teletype 伪打字机，在 unix 中，<code>/dev/tty*</code>指任何表现像打字机的设备，例如终端。</p><blockquote><p>如何查看一个进程是通过 TTY 启动的？</p></blockquote><ul><li><code>w</code> 命令可以查看当前登陆的用户情况，每登陆一个窗口就有一个 TTY。</li><li><code>ps -x</code>命令查看进程信息中也有 TTY 的信息。<code>?</code> 表示没有依赖 TTY 的进程，即守护进程。</li></ul><p>可以通过<code>stdio.isTTY</code>判断当前进程是否处于 TTY 环境。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">node -p -e &quot;Boolean(process.stdout.isTTY)&quot; | cat</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="os模块"></a><a aria-hidden="true" class="hash-link" href="#os模块">#</a>OS模块</h3><p>通过 os 模块可以获取当前操作系统的一些基础信息。</p><table><thead><tr><th>属性</th><th>描述</th></tr></thead><tbody><tr><td>os.EOL</td><td>返回当前系统的<code>end of line</code></td></tr><tr><td>os.arch</td><td>返回当前系统CPU架构，如<code>x86</code>或<code>x64</code></td></tr><tr><td>os.constants</td><td>返回系统常量</td></tr><tr><td>os.cpus()</td><td>返回每个核的信息</td></tr><tr><td>os.endianness()</td><td>返回 CPU 字节序，如果大端字节序返回 <code>BE</code>，小端字节序则 <code>LE</code></td></tr><tr><td>os.freemen()</td><td>返回系统空闲内存大小，单位是字节</td></tr><tr><td>os.homedir()</td><td>返回当前用户的根目录</td></tr><tr><td>os.hostname()</td><td>返回当前系统的主机名</td></tr><tr><td>os.loadavg()</td><td>返回负载信息</td></tr><tr><td>os.networkInterfaces</td><td>返回网卡信息(类似 <code>ifconfig</code>)</td></tr><tr><td>os.platform()</td><td>返回编译时指定的平台信息，如<code>win32</code>，<code>linux</code>，同<code>process.platform()</code></td></tr><tr><td>os.release()</td><td>操作系统的分发版本号</td></tr><tr><td>os.tmpdir()</td><td>系统默认的临时文件夹</td></tr><tr><td>os.totalmem()</td><td>返回总内存大小</td></tr><tr><td>os.type()</td><td>根据<code>[uname](https://en.wikipedia.org/wiki/Uname#Examples)</code>返回系统的名称</td></tr><tr><td>os.uptime()</td><td>返回系统的运行时间，单位是秒</td></tr><tr><td>os.userInfo(<!-- -->[options]<!-- -->)</td><td>返回当前用户信息</td></tr></tbody></table><blockquote><p>不同操作系统的换行符(EOL)有什么区别？</p></blockquote><p>end of line(EOL) 同 newline，line ending，以及line break。
通常由 line feed(LF, <code>\n</code>) 和 carriage return (CR，<code>\r</code>)组成。windows 用的<code>\r\n</code>，mac os9之前用的<code>\r</code>，mac os X 及 linux用的\n`。</p><h3><a aria-hidden="true" class="anchor" id="os-常量"></a><a aria-hidden="true" class="hash-link" href="#os-常量">#</a>os 常量</h3><ul><li>信号常量</li><li>POSIX 错误常量(POSIX Error Constants): 如 EACCES，EADDRINUSE 等。</li><li>Windows 错误常量(Windows Specific Error Constants)，如 WSAEACCESS，WSAEBADF 等。</li><li>libuv 常量(libuv Constants)，仅 UV_UDP_REUSEADDR。</li></ul><h2><a aria-hidden="true" class="anchor" id="path"></a><a aria-hidden="true" class="hash-link" href="#path">#</a>Path</h2><h3><a aria-hidden="true" class="anchor" id="不同平台，路径的区别"></a><a aria-hidden="true" class="hash-link" href="#不同平台，路径的区别">#</a>不同平台，路径的区别?</h3><p>每个平台路径形式不同，path 模块的方法就是对应平台的方法，如 mac 平台下。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;path&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">basename</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">posix</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">basename</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// true</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="path对象的解析？"></a><a aria-hidden="true" class="hash-link" href="#path对象的解析？">#</a>path对象的解析？</h3><p>on POSIX:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;/home/user/dir/file.txt&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Returns:</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// {</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    root : &quot;/&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    dir : &quot;/home/user/dir&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    base : &quot;file.txt&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    ext : &quot;.txt&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    name : &quot;file&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// }</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>on Windows:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;C:\\path\\dir\\file.txt&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Returns:</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// {</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    root : &quot;C:\\&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    dir : &quot;C:\\path\\dir&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    base : &quot;file.txt&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    ext : &quot;.txt&quot;,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">//    name : &quot;file&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// }</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="pathextnamepath"></a><a aria-hidden="true" class="hash-link" href="#pathextnamepath">#</a>path.extname(path)</h3><table><thead><tr><th>case</th><th>return</th></tr></thead><tbody><tr><td>path.extname(&#x27;index.html&#x27;)</td><td>.html</td></tr><tr><td>path.extname(&#x27;index.coffee.md&#x27;)</td><td>.md</td></tr><tr><td>path.extname(&#x27;index.&#x27;)</td><td>.</td></tr><tr><td>path.extname(&#x27;index&#x27;)</td><td></td></tr><tr><td>path.extname(&#x27;.index&#x27;)</td><td></td></tr></tbody></table><h3><a aria-hidden="true" class="anchor" id="命令行参数"></a><a aria-hidden="true" class="hash-link" href="#命令行参数">#</a>命令行参数</h3><p>命令行参数(Command Line Options)，即对 CLI 使用上的一些文档。关于 CLI 主要有 4 种使用方式。</p><ul><li>node <!-- -->[options][v8 options]<!-- --> <!-- -->[script.js | -e &quot;script&quot;][arguments]<!-- --> </li><li>node debug <!-- -->[script.js | -e &quot;script&quot; | :]<!-- --> ...</li><li>node --v8-options</li><li>无参数直接启动 REPL (Read Eval Print Loop:交互式解释器)环境</li></ul><table><thead><tr><th>参数</th><th>简介</th></tr></thead><tbody><tr><td>-v,--version</td><td>查看当前 node 版本</td></tr><tr><td>-h --help</td><td>查看帮助文档</td></tr><tr><td>-e,--eval &quot;script&quot;</td><td>将参数字符串当作代码执行</td></tr><tr><td>-p,--print &quot;script&quot;</td><td>打印 -e 的返回值，<code>node -pe &#x27;1+1&#x27;</code></td></tr><tr><td>-c,--check</td><td>检查语法不执行</td></tr><tr><td>-i,--interactive</td><td>即使 stdin 不是终端也打开 REPL 模式</td></tr><tr><td>-r,--require module</td><td>在启动前预先 require 指定模块</td></tr><tr><td>--no-deprecation</td><td>关闭废弃模块警告</td></tr><tr><td>--trace-deprecation</td><td>打印废弃模块的堆栈跟踪信息</td></tr><tr><td>--throw-deprecation</td><td>执行废弃模块时抛出错误</td></tr><tr><td>--no-warnings</td><td>无视报警(包括废弃模块)</td></tr><tr><td>--trace-sync-io</td><td>只要检测到异步 I/O 处于 Event Loop 的开头就打印堆栈信息</td></tr><tr><td>--zero-fill-buffers</td><td>自动初始化(zero-fill) Buffer 和 SlowBuffer</td></tr><tr><td>--preserve-symlinks</td><td>在解析和缓存模块时指示模块加载程序保存符号链接</td></tr><tr><td>--track-heap-objects</td><td>为堆快照跟踪对象的分配情况</td></tr><tr><td>--prof-process</td><td>使用 v8 选项 <code>--prof</code> 生成 Profilling 报告</td></tr><tr><td>--v8-options</td><td>显示 v8 命令行选项</td></tr><tr><td>--tls-cipher-list=list</td><td>指明替代的默认 TLS 加密器列表</td></tr><tr><td>--enable-fips</td><td>在启动时开启 FIPS-compliant crypto</td></tr><tr><td>--force-fips</td><td>在启动时强制实施 FIPS-compliant</td></tr><tr><td>--openssl-config=file</td><td>启动时加载 OpenSSL 配置文件</td></tr><tr><td>--icu-data-dir=file</td><td>指定 ICU 数据加载路径</td></tr></tbody></table><h3><a aria-hidden="true" class="anchor" id="环境变量"></a><a aria-hidden="true" class="hash-link" href="#环境变量">#</a>环境变量</h3><table><thead><tr><th>环境变量</th><th>简介</th></tr></thead><tbody><tr><td><code>NODE_DEBUG=module[,...]</code></td><td>指定要打印调试信息的核心模块列表</td></tr><tr><td><code>NODE_PATH=path[:...]</code></td><td>指定搜索目录模块路径的前缀列表</td></tr><tr><td><code>NODE_DISABLE_COLORS=1</code></td><td>关闭 REPL 的颜色显示</td></tr><tr><td><code>NODE_ICU_DATA=file</code></td><td>ICU(Intl Object)的数据路径</td></tr><tr><td><code>NODE_REPL_HISTORY=file</code></td><td>持久化存储 REPL 历史文件的路径</td></tr><tr><td><code>NODE_TTY_UNSAFE_ASYNC=1</code></td><td>设置为1时，将同步操作 stdio (如console.log变成同步)</td></tr><tr><td><code>NODE_EXTRA_CA_CERTS=file</code></td><td>指定 CA (如 VeriSync) 的额外证书路径</td></tr><tr><td><code>NODE_NO_WARNINGS=1</code></td><td>设置为1时，不会提示警告</td></tr></tbody></table><h3><a aria-hidden="true" class="anchor" id="负载"></a><a aria-hidden="true" class="hash-link" href="#负载">#</a>负载</h3><blockquote><p>什么是负载？怎么查看？不同值的负载表示什么？</p></blockquote><p>负载是衡量服务器运行状态的一个重要概念，通过负载情况，可以知道服务器目前是清闲，良好，繁忙还是即将 crash。</p><ul><li>系统负载（System Load）是系统CPU繁忙程度的度量，即有多少进程在等待被CPU调度（进程等待队列的长度）。</li><li>平均负载（Load Average）是一段时间内系统的平均负载，这个一段时间一般取1分钟、5分钟、15分钟。</li></ul><p>命令行可以通过 <code>uptime</code>, <code>top</code>命令，node.js 中可以通过 <code>os.loadavg()</code> 来获取当前系统的平均负载情况。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">&gt; os.loadavg()</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">[ 3.13134765625, 3.01953125, 3.04296875 ]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>分别是最近1分钟、5分钟、15分钟系统 CPU 的平均负载，当 CPU 的一个核工作饱和的时候负载为 1，有几个核 CPU 的饱和负载就是几。我的电脑是 8 核，所以一分钟平均 Load 约等于 3.13134765625/8=0.39。</p><p>在 nodejs 中查看单个进程的 CPU 负载可以使用 <a href="https://github.com/soyuka/pidusage">pidusage</a> 模块。</p><p>单核 CPU，不同的 Load 值：</p><ul><li>Load &lt; 0.7时：系统很闲，要考虑多部署一些服务</li><li>0.7 &lt; Load &lt; 1时：系统状态不错</li><li>Load == 1时：系统马上要处理不多来了，赶紧找一下原因修复</li><li>Load &gt; 5时：系统已经非常繁忙了</li></ul><blockquote><p>如何知道我的系统有多少核心?</p></blockquote><p>除了 CPU 负载, 对于服务端 (偏维护) 还需要了解网络负载, 磁盘负载等。</p><blockquote><p>CPU 负载和 CPU 使用率的区别？低利用率意味着没有负载吗？</p></blockquote><p>它们是从不同角度来描述 CPU 使用情况的。负载是从进程数上描述的，使用率是从时间上来描述的。比如银行工作人员，负载是很多客户排队，使用率是处理客户的有效时间(工作人员的等待时间不算在内如打印身份证等不算在内)/总时间。</p><ul><li><a href="http://www.blogjava.net/cenwenchu/archive/2008/06/30/211712.html">理解Load Average做好压力测试</a></li></ul><p>资料：</p><ul><li><a href="https://www.w3cschool.cn/architectroad/architectroad-loadaverage.html">一分钟理解负载LoadAverage</a></li><li><a href="http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages">Understanding Linux CPU Load</a></li></ul><h3><a aria-hidden="true" class="anchor" id="checklist"></a><a aria-hidden="true" class="hash-link" href="#checklist">#</a>CheckList</h3><p>USE 方法用来完整评估的服务器的状态。即对系统中的每种资源都检查使用率(usage)、饱和度(saturation)和错误(errors)。</p><ul><li><p>资源：所有物理服务器功能组件(CPU、磁盘、总线...)</p></li><li><p>利用率：资源忙于工作的平均时间，用一段时间内的百分比描述</p></li><li><p>饱和度(负载)：资源具有无法服务的额外工作的程度，如 loadavg 用队列长度来描述。</p></li><li><p>错误：错误的数量</p></li><li><p><a href="http://www.brendangregg.com/USEmethod/use-linux.html">USE 方法</a></p></li></ul><h3><a aria-hidden="true" class="anchor" id="物理资源"></a><a aria-hidden="true" class="hash-link" href="#物理资源">#</a>物理资源</h3><table><thead><tr><th>部件</th><th>类型</th><th>衡量</th></tr></thead><tbody></tbody></table><blockquote><p>ulimit 是用来干什么的?</p></blockquote><p>ulimit 命令用于管理用户对资源的使用情况。</p></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/nodejs/test"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">NodeJS 测试<!-- --> »</h4></a></div></nav><div id="gitalk-container"></div></div></div></div><div class="col col--3"><div class="tableOfContents_1X5y"><ul class="contents contents__left-border"><li><a href="#util" class="contents__link">Util</a><ul class=""><li><a href="#url" class="contents__link">URL</a></li><li><a href="#query-string" class="contents__link">Query String</a></li><li><a href="#util-1" class="contents__link">util</a></li><li><a href="#正则表达式" class="contents__link">正则表达式</a></li><li><a href="#常用模块" class="contents__link">常用模块</a></li></ul></li><li><a href="#网络" class="contents__link">网络</a></li><li><a href="#模块" class="contents__link">模块</a></li><li><a href="#io" class="contents__link">IO</a><ul class=""><li><a href="#buffer" class="contents__link">Buffer</a></li><li><a href="#string-decoder" class="contents__link">String Decoder</a></li><li><a href="#stream" class="contents__link">Stream</a></li><li><a href="#console" class="contents__link">Console</a></li><li><a href="#file-system" class="contents__link">File System</a></li><li><a href="#readline" class="contents__link">Readline</a></li><li><a href="#repl" class="contents__link">REPL</a></li><li><a href="#参考资料" class="contents__link">参考资料</a></li></ul></li><li><a href="#错误处理" class="contents__link">错误处理</a><ul class=""><li><a href="#v8" class="contents__link">V8</a></li><li><a href="#内存快照" class="contents__link">内存快照</a></li></ul></li><li><a href="#os" class="contents__link">OS</a><ul class=""><li><a href="#tty" class="contents__link">TTY</a></li><li><a href="#什么是-tty-" class="contents__link">什么是 TTY ?</a></li><li><a href="#os模块" class="contents__link">OS模块</a></li><li><a href="#os-常量" class="contents__link">os 常量</a></li></ul></li><li><a href="#path" class="contents__link">Path</a><ul class=""><li><a href="#不同平台，路径的区别" class="contents__link">不同平台，路径的区别?</a></li><li><a href="#path对象的解析？" class="contents__link">path对象的解析？</a></li><li><a href="#pathextnamepath" class="contents__link">path.extname(path)</a></li><li><a href="#命令行参数" class="contents__link">命令行参数</a></li><li><a href="#环境变量" class="contents__link">环境变量</a></li><li><a href="#负载" class="contents__link">负载</a></li><li><a href="#checklist" class="contents__link">CheckList</a></li><li><a href="#物理资源" class="contents__link">物理资源</a></li></ul></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/runtime~main.0b078f7cdcdfcdb429c2.js"></script>

<script type="text/javascript" src="/main.477abd2e0f7ae11842aa.js"></script>

<script type="text/javascript" src="/0.c9587aaf32602224b53a.js"></script>

<script type="text/javascript" src="/1.b87e7195a03649b49435.js"></script>

<script type="text/javascript" src="/2.e8f1f759c4320c5032f6.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-page-9-e-7-ca5.1085c0ca4dac1d879092.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-9-a-9-239.efc62167d7e7e974bd14.js"></script>

<script type="text/javascript" src="/3.7c5f5d1df2cb93bbc10a.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-item-031-769.63af36fb5b293fb44f17.js"></script>

<script type="text/javascript" src="/content---docs-nodejs-utild-25-062.7abc674669aa1b8e7b27.js"></script>

<script type="text/javascript" src="/metadata---docs-nodejs-util-0-fd-711.d07acf2cb8f71bdf235d.js"></script>

</body>
</html>