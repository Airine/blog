<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.cf96eb97e7d5d7563dca.css","/main.d2133d254be990e5de74.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.7f8bb42332d3fb863b06.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.a451db0146855b682be1.js"],"content---blog-2019-08-12-think-house-362-b31":["/content---blog-2019-08-12-think-house-362-b31.193e591ffd97c180ef22.js"],"metadata---blog-2019-08-12-think-housee-55-e28":["/metadata---blog-2019-08-12-think-housee-55-e28.a757871a1787e7209c4b.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.4e69195dcb253fcf7397.js"],"content---bloga-55-f4d":["/content---bloga-55-f4d.ba60c0c362c0710ea220.js"],"metadata---blog-8-d-5-403":["/metadata---blog-8-d-5-403.dbb093216daad950fe37.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css","/component---theme-doc-legacy-page-9-e-7-ca5.3c362ce04210fe984260.js"],"docsMetadata---docs-76-d-edd":["/docsMetadata---docs-76-d-edd.e2c51fa6c15b625f5d20.js"],"component---theme-doc-legacy-item-031-769":["/component---theme-doc-legacy-item-031-769.2b73e3d00e20547d80b3.css","/component---theme-doc-legacy-item-031-769.6dced88da14b8c4a1cd5.js"],"content---docs-doc-3616-40c":["/content---docs-doc-3616-40c.c8f907d35e4938b88430.js"],"metadata---docs-doc-312-d-57d":["/metadata---docs-doc-312-d-57d.c7d92c284235e060ec3e.js"],"content---docs-mdxce-3-7d1":["/content---docs-mdxce-3-7d1.5d84216d2ac05af7f152.js"],"metadata---docs-mdxdf-2-f06":["/metadata---docs-mdxdf-2-f06.62983a0f4d0af5ab449d.js"],"content---docs-about-3-d-8-538":["/content---docs-about-3-d-8-538.b7d28b108bed7c683d86.js"],"metadata---docs-abouta-4-f-846":["/metadata---docs-abouta-4-f-846.429b0c83416bb49509f4.js"],"content---docs-doc-2-df-3-eaa":["/content---docs-doc-2-df-3-eaa.23da38d778862642eda6.js"],"metadata---docs-doc-2-bed-d62":["/metadata---docs-doc-2-bed-d62.5f7d35725065623e4c7a.js"],"content---docs-algo-indexb-4-f-54a":["/content---docs-algo-indexb-4-f-54a.1cce68fcabf52af2e688.js"],"metadata---docs-algo-index-3-da-9b7":["/metadata---docs-algo-index-3-da-9b7.a90d9b397b0799409c51.js"],"content---docs-demo-index-648-2ab":["/content---docs-demo-index-648-2ab.4991a563ad558def5d5d.js"],"metadata---docs-demo-index-5-fe-1de":["/metadata---docs-demo-index-5-fe-1de.c81c4d765b6b7a39b2d4.js"],"content---docs-base-compute-combinef-7-f-933":["/content---docs-base-compute-combinef-7-f-933.a6ba59c8e045c5039b1f.js"],"metadata---docs-base-compute-combined-1-b-754":["/metadata---docs-base-compute-combined-1-b-754.302d0f35f7a68cacb87c.js"],"content---docs-database-mongo-2-c-4-a31":["/content---docs-database-mongo-2-c-4-a31.3f8b2e20c9ae87c7c329.js"],"metadata---docs-database-mongoe-54-98e":["/metadata---docs-database-mongoe-54-98e.59ddfa2778d4bc1a6e74.js"],"content---docs-base-h-5586-54d":["/content---docs-base-h-5586-54d.731c053525aa30b9eb24.js"],"metadata---docs-base-h-528-a-c2b":["/metadata---docs-base-h-528-a-c2b.b148155014533589efae.js"],"content---docs-database-mysql-561-697":["/content---docs-database-mysql-561-697.c2d1e5b3d27333a7c266.js"],"metadata---docs-database-mysqlc-31-563":["/metadata---docs-database-mysqlc-31-563.95709c186202f2140a86.js"],"content---docs-database-redise-5-d-9ae":["/content---docs-database-redise-5-d-9ae.0f50eadac45bec2eb390.js"],"metadata---docs-database-redisb-45-9ea":["/metadata---docs-database-redisb-45-9ea.88936c655e40ffa3874e.js"],"content---docs-linux-service-49-b-272":["/content---docs-linux-service-49-b-272.0118bb585736d13cc27e.js"],"metadata---docs-linux-service-241-737":["/metadata---docs-linux-service-241-737.ea50e1d0f08957c8eca9.js"],"content---docs-linux-indexcb-8-9a7":["/content---docs-linux-indexcb-8-9a7.6ac31af62743c6857385.js"],"metadata---docs-linux-index-885-30a":["/metadata---docs-linux-index-885-30a.7ea47c3baed7e095c36d.js"],"content---docs-linux-fileec-1-765":["/content---docs-linux-fileec-1-765.5616c172043ee9abd8e5.js"],"metadata---docs-linux-file-561-309":["/metadata---docs-linux-file-561-309.221f2b680c277bfc7336.js"],"content---docs-linux-soft-422-6cf":["/content---docs-linux-soft-422-6cf.dd71f73038793c35d074.js"],"metadata---docs-linux-soft-3-e-2-aec":["/metadata---docs-linux-soft-3-e-2-aec.7c8948247dd45e45dc6c.js"],"content---docs-nginx-index-16-d-468":["/content---docs-nginx-index-16-d-468.5be40c18275708631191.js"],"metadata---docs-nginx-index-4-b-5-890":["/metadata---docs-nginx-index-4-b-5-890.8fc856c9f6fd85de32ab.js"],"content---docs-nodejs-safee-0-a-532":["/content---docs-nodejs-safee-0-a-532.55d0d534634e7530de2c.js"],"metadata---docs-nodejs-safee-94-4de":["/metadata---docs-nodejs-safee-94-4de.688c9e593c4f6f709cd1.js"],"content---docs-nodejs-async-7-f-4-0af":["/content---docs-nodejs-async-7-f-4-0af.bbb61dd3127c653d7eb9.js"],"metadata---docs-nodejs-async-672-a66":["/metadata---docs-nodejs-async-672-a66.bef81a0adfe4d2eae2fd.js"],"content---docs-nodejs-utild-25-062":["/content---docs-nodejs-utild-25-062.4b846da41316b55c524e.js"],"metadata---docs-nodejs-util-7-f-8-7a8":["/metadata---docs-nodejs-util-7-f-8-7a8.6a08bbaed6a0d465d56a.js"],"content---docs-nodejs-testaf-7-5fa":["/content---docs-nodejs-testaf-7-5fa.0a280bf85ae10e106a2e.js"],"metadata---docs-nodejs-testd-72-48b":["/metadata---docs-nodejs-testd-72-48b.8216f1a78ba2a07b5ba1.js"],"content---docs-other-kindle-rss-789-941":["/content---docs-other-kindle-rss-789-941.17d746dc81f22fdaecc7.js"],"metadata---docs-other-kindle-rssa-50-6fc":["/metadata---docs-other-kindle-rssa-50-6fc.396ca3456e7992a9ee87.js"],"content---docs-other-resourceea-2-ecf":["/content---docs-other-resourceea-2-ecf.d92c8b74c915e4f07087.js"],"metadata---docs-other-resource-50-a-52d":["/metadata---docs-other-resource-50-a-52d.e7a44e1d5ec84064eac1.js"],"content---docs-other-maced-3-b03":["/content---docs-other-maced-3-b03.0e862ba0ba1acdf19259.js"],"metadata---docs-other-macc-2-b-c65":["/metadata---docs-other-macc-2-b-c65.37511d5e476f18f3918e.js"],"content---docs-patterns-bridge-335-1e9":["/content---docs-patterns-bridge-335-1e9.435331fb6638774e36be.js"],"metadata---docs-patterns-bridge-543-b80":["/metadata---docs-patterns-bridge-543-b80.8f81492aaef815a4b59c.js"],"content---docs-patterns-action-61-d-c76":["/content---docs-patterns-action-61-d-c76.be5df6a89d6c2298bdc2.js"],"metadata---docs-patterns-action-356-eae":["/metadata---docs-patterns-action-356-eae.a67c110c62cb77e7a623.js"],"content---docs-patterns-adapter-555-7ec":["/content---docs-patterns-adapter-555-7ec.13532c36311478dedc36.js"],"metadata---docs-patterns-adapter-6-f-5-981":["/metadata---docs-patterns-adapter-6-f-5-981.bf77464a39cc3f6b9926.js"],"content---docs-patterns-chain-of-responsibility-579-dfa":["/content---docs-patterns-chain-of-responsibility-579-dfa.f21d7c0a62ff1872dba1.js"],"metadata---docs-patterns-chain-of-responsibility-6-d-5-41a":["/metadata---docs-patterns-chain-of-responsibility-6-d-5-41a.95050b200de95226f643.js"],"content---docs-patterns-composite-33-e-80d":["/content---docs-patterns-composite-33-e-80d.08ca6844aaf807869cae.js"],"metadata---docs-patterns-composite-9-ae-076":["/metadata---docs-patterns-composite-9-ae-076.84b9b673b06c841fe27e.js"],"content---docs-patterns-commande-85-4af":["/content---docs-patterns-commande-85-4af.28ea1f7c7661bfa12aa0.js"],"metadata---docs-patterns-command-570-6f9":["/metadata---docs-patterns-command-570-6f9.0d1f3ae8796b2b808ffa.js"],"content---docs-patterns-builder-5-e-5-e3a":["/content---docs-patterns-builder-5-e-5-e3a.bbace4f210b8debf582a.js"],"metadata---docs-patterns-builderb-36-b24":["/metadata---docs-patterns-builderb-36-b24.7bace823e1a19a02f25f.js"],"content---docs-patterns-decorator-944-f6d":["/content---docs-patterns-decorator-944-f6d.ce54cbd677e89dca57f5.js"],"metadata---docs-patterns-decorator-092-cfc":["/metadata---docs-patterns-decorator-092-cfc.fde9fdf7070996004cef.js"],"content---docs-patterns-factoryf-00-197":["/content---docs-patterns-factoryf-00-197.c6a27f5b67fb85cf6337.js"],"metadata---docs-patterns-factory-893-3ea":["/metadata---docs-patterns-factory-893-3ea.7ed1e2160718292a31be.js"],"content---docs-patterns-facade-4-ef-b2f":["/content---docs-patterns-facade-4-ef-b2f.ead8612348312a6e024c.js"],"metadata---docs-patterns-facade-718-580":["/metadata---docs-patterns-facade-718-580.e8f101aaf4e8535ee127.js"],"content---docs-patterns-index-90-d-78a":["/content---docs-patterns-index-90-d-78a.a6120fea1b0d61ed6fa1.js"],"metadata---docs-patterns-index-540-d0e":["/metadata---docs-patterns-index-540-d0e.2e0b983a3a6049c63637.js"],"content---docs-patterns-interpreterc-34-4ff":["/content---docs-patterns-interpreterc-34-4ff.9acb3237d2de85f56b87.js"],"metadata---docs-patterns-interpreterc-12-25b":["/metadata---docs-patterns-interpreterc-12-25b.f3f6a09f7725129b6ec3.js"],"content---docs-patterns-flyweighte-43-831":["/content---docs-patterns-flyweighte-43-831.f60465623d25fe036a3d.js"],"metadata---docs-patterns-flyweight-2-c-4-e78":["/metadata---docs-patterns-flyweight-2-c-4-e78.726f840fd7e28516bd19.js"],"content---docs-patterns-iterator-3-bc-1d4":["/content---docs-patterns-iterator-3-bc-1d4.a09911f89af14855fd33.js"],"metadata---docs-patterns-iterator-520-89a":["/metadata---docs-patterns-iterator-520-89a.6359c1c664583c3f3d53.js"],"content---docs-patterns-observer-73-f-441":["/content---docs-patterns-observer-73-f-441.f0087971a98f03287ff9.js"],"metadata---docs-patterns-observer-7-d-9-bbb":["/metadata---docs-patterns-observer-7-d-9-bbb.0c5216383890fe021512.js"],"content---docs-patterns-mediator-685-4ef":["/content---docs-patterns-mediator-685-4ef.ed1623b00a8dcd8fe188.js"],"metadata---docs-patterns-mediatorb-7-b-0e2":["/metadata---docs-patterns-mediatorb-7-b-0e2.bd00e63c20ede11064d1.js"],"content---docs-patterns-prototype-93-c-d70":["/content---docs-patterns-prototype-93-c-d70.b96d2cef0243354728ff.js"],"metadata---docs-patterns-prototype-9-e-9-e45":["/metadata---docs-patterns-prototype-9-e-9-e45.cea187554c1f6ab311d7.js"],"content---docs-patterns-memento-740-286":["/content---docs-patterns-memento-740-286.621725a6ffa330270ebc.js"],"metadata---docs-patterns-mementocaf-1b8":["/metadata---docs-patterns-mementocaf-1b8.1eb8eb41054e8bb16404.js"],"content---docs-patterns-proxyb-6-e-4ef":["/content---docs-patterns-proxyb-6-e-4ef.5d0546b466eeb2c39e1d.js"],"metadata---docs-patterns-proxy-92-c-ae1":["/metadata---docs-patterns-proxy-92-c-ae1.5885827dfed8ddc56df1.js"],"content---docs-patterns-stated-4-a-502":["/content---docs-patterns-stated-4-a-502.b4f1920a204e6714b4d2.js"],"metadata---docs-patterns-statea-8-b-f4a":["/metadata---docs-patterns-statea-8-b-f4a.c1dd08698574e26e9db6.js"],"content---docs-patterns-singleton-710-727":["/content---docs-patterns-singleton-710-727.68595efac9d1f77f0b85.js"],"metadata---docs-patterns-singleton-6-ed-aff":["/metadata---docs-patterns-singleton-6-ed-aff.56f7c00e391d5fddcbad.js"],"content---docs-patterns-strategy-9-e-9-61c":["/content---docs-patterns-strategy-9-e-9-61c.57b49f9d90a14d49c13f.js"],"metadata---docs-patterns-strategya-20-dc6":["/metadata---docs-patterns-strategya-20-dc6.a9340d614672f560b526.js"],"content---docs-patterns-visitorff-6-bda":["/content---docs-patterns-visitorff-6-bda.028ad34660156e89f269.js"],"metadata---docs-patterns-visitor-926-715":["/metadata---docs-patterns-visitor-926-715.1c3c9a073a8f8dd623ea.js"],"content---docs-patterns-templateee-1-6e8":["/content---docs-patterns-templateee-1-6e8.d954024691489d6418af.js"],"metadata---docs-patterns-template-4-e-7-bd2":["/metadata---docs-patterns-template-4-e-7-bd2.9018422edfd35fa95003.js"],"content---docs-base-net-tcpd-0-c-487":["/content---docs-base-net-tcpd-0-c-487.05016cb9df1bc07a3ea5.js"],"metadata---docs-base-net-tcp-1-af-502":["/metadata---docs-base-net-tcp-1-af-502.5b5a00f142a2ae79da20.js"],"content---docs-f-2-e-browser-devtool-850-efc":["/content---docs-f-2-e-browser-devtool-850-efc.d3deea3b0ba8b8ad8e0a.js"],"metadata---docs-f-2-e-browser-devtool-9-c-8-3ff":["/metadata---docs-f-2-e-browser-devtool-9-c-8-3ff.603da1e90dce7d64e366.js"],"content---docs-base-net-http-1-cc-352":["/content---docs-base-net-http-1-cc-352.a911ab72fad3ec5f83b5.js"],"metadata---docs-base-net-httpe-52-14d":["/metadata---docs-base-net-httpe-52-14d.981947984aac148c2f12.js"],"content---docs-f-2-e-browser-cache-260-909":["/content---docs-f-2-e-browser-cache-260-909.c3eb54269bc242502844.js"],"metadata---docs-f-2-e-browser-cache-66-d-0e1":["/metadata---docs-f-2-e-browser-cache-66-d-0e1.0b287d4c7523a298a9c1.js"],"content---docs-f-2-e-browser-eventa-5-d-93e":["/content---docs-f-2-e-browser-eventa-5-d-93e.727a9b03c68a0167fb51.js"],"metadata---docs-f-2-e-browser-eventfce-f58":["/metadata---docs-f-2-e-browser-eventfce-f58.5f25b4104c0251631ae3.js"],"content---docs-f-2-e-browser-eventloop-473-bc4":["/content---docs-f-2-e-browser-eventloop-473-bc4.9b8274d59ab5261cc993.js"],"metadata---docs-f-2-e-browser-eventloop-95-f-34d":["/metadata---docs-f-2-e-browser-eventloop-95-f-34d.2bb02ffed99f28dbbc52.js"],"content---docs-f-2-e-browser-v-8-c-83-515":["/content---docs-f-2-e-browser-v-8-c-83-515.da1039f2097639386e8c.js"],"metadata---docs-f-2-e-browser-v-8-a-7-a-da9":["/metadata---docs-f-2-e-browser-v-8-a-7-a-da9.fe4f87a944638df55b81.js"],"content---docs-f-2-e-browser-storage-0-e-2-cd2":["/content---docs-f-2-e-browser-storage-0-e-2-cd2.5e10820c5be8537e7aa3.js"],"metadata---docs-f-2-e-browser-storage-3-be-211":["/metadata---docs-f-2-e-browser-storage-3-be-211.26a87cd8d2fd0c7cd234.js"],"content---docs-f-2-e-browser-fetch-147-732":["/content---docs-f-2-e-browser-fetch-147-732.541044e1d1d2f12ec2fd.js"],"metadata---docs-f-2-e-browser-fetch-66-e-43c":["/metadata---docs-f-2-e-browser-fetch-66-e-43c.1f4162ea8688f61a5fd6.js"],"content---docs-f-2-e-browser-work-31-f-d77":["/content---docs-f-2-e-browser-work-31-f-d77.e06552ae9eb8b3659d7b.js"],"metadata---docs-f-2-e-browser-work-840-646":["/metadata---docs-f-2-e-browser-work-840-646.b61bbee9039bac962dcf.js"],"content---docs-f-2-e-html-index-9-d-1-79a":["/content---docs-f-2-e-html-index-9-d-1-79a.7c52b984737f2535e5ae.js"],"metadata---docs-f-2-e-html-index-576-ef7":["/metadata---docs-f-2-e-html-index-576-ef7.70a9dd97a9cd531129d0.js"],"content---docs-f-2-e-javascript-grammer-447-369":["/content---docs-f-2-e-javascript-grammer-447-369.08c02c555b6463682067.js"],"metadata---docs-f-2-e-javascript-grammer-1-ab-807":["/metadata---docs-f-2-e-javascript-grammer-1-ab-807.23d93ed5348e42d4d908.js"],"content---docs-f-2-e-css-indexf-55-541":["/content---docs-f-2-e-css-indexf-55-541.efaa67a27cb86621a3e8.js"],"metadata---docs-f-2-e-css-indexaa-5-0b7":["/metadata---docs-f-2-e-css-indexaa-5-0b7.8814a6bf6befbba14161.js"],"content---docs-f-2-e-javascript-asynceb-2-d37":["/content---docs-f-2-e-javascript-asynceb-2-d37.13a52c8167f18c12cf21.js"],"metadata---docs-f-2-e-javascript-async-1-ff-0d6":["/metadata---docs-f-2-e-javascript-async-1-ff-0d6.d472eab1f9881365ada4.js"],"content---docs-f-2-e-javascript-oop-3-a-2-e5a":["/content---docs-f-2-e-javascript-oop-3-a-2-e5a.38052ce202f61310d687.js"],"metadata---docs-f-2-e-javascript-oopc-06-9bf":["/metadata---docs-f-2-e-javascript-oopc-06-9bf.a02aac86418a69969112.js"],"content---docs-f-2-e-javascript-modulee-10-ff1":["/content---docs-f-2-e-javascript-modulee-10-ff1.101f193db0b8c94fe253.js"],"metadata---docs-f-2-e-javascript-module-834-183":["/metadata---docs-f-2-e-javascript-module-834-183.8ac6b1401e0a154eee23.js"],"content---docs-f-2-e-javascript-type-58-e-e47":["/content---docs-f-2-e-javascript-type-58-e-e47.cb34d0fd6a339bc2a9f8.js"],"metadata---docs-f-2-e-javascript-type-906-604":["/metadata---docs-f-2-e-javascript-type-906-604.f2f2375448a6dedb3989.js"],"content---docs-f-2-e-javascript-regexp-987-85e":["/content---docs-f-2-e-javascript-regexp-987-85e.9bcdca5b23925a382148.js"],"metadata---docs-f-2-e-javascript-regexp-9-b-1-5f3":["/metadata---docs-f-2-e-javascript-regexp-9-b-1-5f3.b2d9ab92a18e2cff3f35.js"],"content---docs-f-2-e-monitor-index-391-ad0":["/content---docs-f-2-e-monitor-index-391-ad0.39c63795fdfa8f3dd85d.js"],"metadata---docs-f-2-e-monitor-indexc-62-dba":["/metadata---docs-f-2-e-monitor-indexc-62-dba.9326744666b69c13695e.js"],"content---docs-f-2-e-performance-indexaef-e1d":["/content---docs-f-2-e-performance-indexaef-e1d.4c682db8d3ef4a860816.js"],"metadata---docs-f-2-e-performance-indexb-29-bdb":["/metadata---docs-f-2-e-performance-indexb-29-bdb.9503de37e2df5155db4f.js"],"content---docs-f-2-e-react-index-0-cb-3f0":["/content---docs-f-2-e-react-index-0-cb-3f0.407d67511ef5e83e8a21.js"],"metadata---docs-f-2-e-react-index-742-376":["/metadata---docs-f-2-e-react-index-742-376.59b5c4e36f100374c2af.js"],"content---docs-f-2-e-react-native-androide-34-3a4":["/content---docs-f-2-e-react-native-androide-34-3a4.b279e1db648923ccf79a.js"],"metadata---docs-f-2-e-react-native-androidfcb-4a5":["/metadata---docs-f-2-e-react-native-androidfcb-4a5.91051cd1324eaece1847.js"],"content---docs-f-2-e-react-native-alert-6-d-1-303":["/content---docs-f-2-e-react-native-alert-6-d-1-303.19309440d51a7bf94760.js"],"metadata---docs-f-2-e-react-native-alert-467-f53":["/metadata---docs-f-2-e-react-native-alert-467-f53.81fb2b729089dbcc5e1f.js"],"content---docs-f-2-e-react-native-camera-597-89d":["/content---docs-f-2-e-react-native-camera-597-89d.3f7df8cec57d324a184c.js"],"metadata---docs-f-2-e-react-native-cameraf-85-14a":["/metadata---docs-f-2-e-react-native-cameraf-85-14a.3df454442aac45846407.js"],"content---docs-f-2-e-react-native-bugly-8-d-4-ab2":["/content---docs-f-2-e-react-native-bugly-8-d-4-ab2.6500f37b63076cacddb9.js"],"metadata---docs-f-2-e-react-native-buglyd-52-a13":["/metadata---docs-f-2-e-react-native-buglyd-52-a13.f3d04e1c5709c8f589b4.js"],"content---docs-f-2-e-react-native-code-pusha-39-174":["/content---docs-f-2-e-react-native-code-pusha-39-174.0414b9ad9c660635f577.js"],"metadata---docs-f-2-e-react-native-code-push-6-c-1-262":["/metadata---docs-f-2-e-react-native-code-push-6-c-1-262.c9c40bd2210cf53b3bd8.js"],"content---docs-f-2-e-react-native-deploy-500-e54":["/content---docs-f-2-e-react-native-deploy-500-e54.9c04fe4b27344b01d92e.js"],"metadata---docs-f-2-e-react-native-deploy-349-3e3":["/metadata---docs-f-2-e-react-native-deploy-349-3e3.7490801de25d1092ed74.js"],"content---docs-f-2-e-react-native-fetch-756-af5":["/content---docs-f-2-e-react-native-fetch-756-af5.6a7d9b75a55083c05e0a.js"],"metadata---docs-f-2-e-react-native-fetch-29-e-cbf":["/metadata---docs-f-2-e-react-native-fetch-29-e-cbf.3c66673758578de2e577.js"],"content---docs-f-2-e-react-native-form-7-a-1-0fb":["/content---docs-f-2-e-react-native-form-7-a-1-0fb.db7695f5750900a34db4.js"],"metadata---docs-f-2-e-react-native-form-4-e-3-47e":["/metadata---docs-f-2-e-react-native-form-4-e-3-47e.7591557b0ca7b4eacc65.js"],"content---docs-f-2-e-react-native-index-889-a61":["/content---docs-f-2-e-react-native-index-889-a61.5f8ccc965bad9a77b68e.js"],"metadata---docs-f-2-e-react-native-index-73-d-b28":["/metadata---docs-f-2-e-react-native-index-73-d-b28.a7a813a88049d74ea084.js"],"content---docs-f-2-e-react-native-issue-0-f-6-864":["/content---docs-f-2-e-react-native-issue-0-f-6-864.c37eab0bd3161347c279.js"],"metadata---docs-f-2-e-react-native-issue-497-9a8":["/metadata---docs-f-2-e-react-native-issue-497-9a8.2820276809df0e3bec69.js"],"content---docs-f-2-e-react-native-loading-84-c-73a":["/content---docs-f-2-e-react-native-loading-84-c-73a.cd630242b3b99a6e7f98.js"],"metadata---docs-f-2-e-react-native-loadingbb-1-c0e":["/metadata---docs-f-2-e-react-native-loadingbb-1-c0e.1bb74d8916384dd96b75.js"],"content---docs-f-2-e-react-native-gitf-9-e-d83":["/content---docs-f-2-e-react-native-gitf-9-e-d83.d46fffc0cef2006dda9a.js"],"metadata---docs-f-2-e-react-native-git-183-0de":["/metadata---docs-f-2-e-react-native-git-183-0de.557e9308cdbc48c20194.js"],"content---docs-f-2-e-react-native-react-native-videoc-1-d-e43":["/content---docs-f-2-e-react-native-react-native-videoc-1-d-e43.f990d7755e9188df1364.js"],"metadata---docs-f-2-e-react-native-react-native-video-4-c-7-eb3":["/metadata---docs-f-2-e-react-native-react-native-video-4-c-7-eb3.4953f9714782bed13b06.js"],"content---docs-f-2-e-react-native-save-to-camera-693-68d":["/content---docs-f-2-e-react-native-save-to-camera-693-68d.5302fecfd0710d252190.js"],"metadata---docs-f-2-e-react-native-save-to-camera-28-e-f8f":["/metadata---docs-f-2-e-react-native-save-to-camera-28-e-f8f.ca0488ddfcbda28acfec.js"],"content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b":["/content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b.0a97d5274aae7fcdfbdf.js"],"metadata---docs-f-2-e-react-native-share-to-wechat-5-e-1-8ff":["/metadata---docs-f-2-e-react-native-share-to-wechat-5-e-1-8ff.29158544e7380f1e887e.js"],"content---docs-f-2-e-react-native-size-5-b-4-c24":["/content---docs-f-2-e-react-native-size-5-b-4-c24.17ef38f6f5d666e3beab.js"],"metadata---docs-f-2-e-react-native-size-9-b-3-745":["/metadata---docs-f-2-e-react-native-size-9-b-3-745.a12c20736ed591b25b6c.js"],"content---docs-f-2-e-react-native-tech-226-30f":["/content---docs-f-2-e-react-native-tech-226-30f.a7740702379f54c3a371.js"],"metadata---docs-f-2-e-react-native-tech-4-c-4-b0c":["/metadata---docs-f-2-e-react-native-tech-4-c-4-b0c.e0206586a449c7ef8c55.js"],"content---docs-f-2-e-react-native-source-877-2ea":["/content---docs-f-2-e-react-native-source-877-2ea.a321ee908c620c916294.js"],"metadata---docs-f-2-e-react-native-sourceb-4-c-cef":["/metadata---docs-f-2-e-react-native-sourceb-4-c-cef.70adc7adf2c78c5ccd8a.js"],"content---docs-f-2-e-react-native-update-rn-93-f-50e":["/content---docs-f-2-e-react-native-update-rn-93-f-50e.b1a4c4fdb42367ec1457.js"],"metadata---docs-f-2-e-react-native-update-rn-9-e-4-2b4":["/metadata---docs-f-2-e-react-native-update-rn-9-e-4-2b4.f99bee34b26d2ef24350.js"],"content---docs-f-2-e-react-native-waterfall-629-6ad":["/content---docs-f-2-e-react-native-waterfall-629-6ad.91163b9899018fd45c91.js"],"metadata---docs-f-2-e-react-native-waterfall-2-a-3-93d":["/metadata---docs-f-2-e-react-native-waterfall-2-a-3-93d.01a23133c8f128a7102e.js"],"content---docs-f-2-e-react-native-wechate-7-f-088":["/content---docs-f-2-e-react-native-wechate-7-f-088.5b819183ead3ee789b5e.js"],"metadata---docs-f-2-e-react-native-wechat-7-dc-224":["/metadata---docs-f-2-e-react-native-wechat-7-dc-224.3f36f881ce45419c23f6.js"],"content---docs-f-2-e-safe-index-165-7db":["/content---docs-f-2-e-safe-index-165-7db.f09e7426503bd97b8fc8.js"],"metadata---docs-f-2-e-safe-index-8-f-9-07f":["/metadata---docs-f-2-e-safe-index-8-f-9-07f.a380096347412e09c3e7.js"],"content---docs-f-2-e-test-index-1-ae-bf1":["/content---docs-f-2-e-test-index-1-ae-bf1.d69830f81e876f81ee9e.js"],"metadata---docs-f-2-e-test-index-10-d-3d8":["/metadata---docs-f-2-e-test-index-10-d-3d8.10786db44f0e26362bc9.js"],"content---docs-f-2-e-test-jestfc-3-df1":["/content---docs-f-2-e-test-jestfc-3-df1.308137364e5e0ec20049.js"],"metadata---docs-f-2-e-test-jestf-2-a-9a8":["/metadata---docs-f-2-e-test-jestf-2-a-9a8.338aab1eb21eb4f1fe9a.js"],"content---docs-f-2-e-vue-index-02-b-a5c":["/content---docs-f-2-e-vue-index-02-b-a5c.4cca71863e52a68443b7.js"],"metadata---docs-f-2-e-vue-index-13-f-25b":["/metadata---docs-f-2-e-vue-index-13-f-25b.1379fceb1dc2b9ad4955.js"],"content---docs-f-2-e-vue-origind-8-a-797":["/content---docs-f-2-e-vue-origind-8-a-797.b4d949a5ad24c6df6e6f.js"],"metadata---docs-f-2-e-vue-origine-87-9b7":["/metadata---docs-f-2-e-vue-origine-87-9b7.e673c5748c8ffb4ec8f1.js"],"content---docs-source-jquery-event-088-dda":["/content---docs-source-jquery-event-088-dda.461458e58b57768b1916.js"],"metadata---docs-source-jquery-event-046-3fd":["/metadata---docs-source-jquery-event-046-3fd.e401de0858f60de24776.js"],"content---docs-f-2-e-webpack-basic-indexb-92-061":["/content---docs-f-2-e-webpack-basic-indexb-92-061.77e36f8fcbd7ab4ebe70.js"],"metadata---docs-f-2-e-webpack-basic-indexaf-4-310":["/metadata---docs-f-2-e-webpack-basic-indexaf-4-310.ab53f7a2f2d49c35e397.js"],"content---docs-f-2-e-webpack-principle-indexab-1-27c":["/content---docs-f-2-e-webpack-principle-indexab-1-27c.9d8ed6ac1fed7ef551bc.js"],"metadata---docs-f-2-e-webpack-principle-index-2-c-2-ae5":["/metadata---docs-f-2-e-webpack-principle-index-2-c-2-ae5.21778dd53f3dee492f7f.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.dabda3009357984bd788.js"],"metadata---blog-tags-think-4-ca-4c3":["/metadata---blog-tags-think-4-ca-4c3.a4fa16c3f5753c9f206d.js"],"metadata---blog-tags-house-295-25f":["/metadata---blog-tags-house-295-25f.b667dfd805fe31b4ad4c.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.f425b7d55c26c12854a6.js"],"tags---blog-tags-3-c-9-4c8":["/tags---blog-tags-3-c-9-4c8.77e27ad72cebe16d297a.js"]};/*]]>*/</script>

<title data-react-helmet="true">web 安全</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="web 安全"/><meta data-react-helmet="true" name="description" content="## XSS 攻击"/><meta data-react-helmet="true" property="og:description" content="## XSS 攻击"/><meta data-react-helmet="true" property="og:url" content="https://www.banli17.com/docs/f2e/safe/index"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.cf96eb97e7d5d7563dca.css" />

<link rel="stylesheet" type="text/css" href="/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/2.76ced7e22babc8d30c3a.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-page-9-e-7-ca5.3c38a2f40a51efdd72a0.css" />

<link rel="stylesheet" type="text/css" href="/3.76fc2d47232fd1193413.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-item-031-769.2b73e3d00e20547d80b3.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a><a class="navbar__item navbar__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a><a class="navbar__item navbar__link" label="源码笔记" position="left" href="/docs/source/jquery/event">源码笔记</a><a class="navbar__item navbar__link" label="NodeJS" position="left" href="/docs/nodejs/util">NodeJS</a><a class="navbar__item navbar__link" label="设计模式" position="left" href="/docs/patterns/index">设计模式</a><a class="navbar__item navbar__link" label="算法" position="left" href="/docs/algo/index">算法</a><a class="navbar__item navbar__link" label="服务器" position="left" href="/docs/linux/index">服务器</a><a class="navbar__item navbar__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a><a class="navbar__item navbar__link" label="工具" position="left" href="/docs/other/mac">工具</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="博客" position="right" href="/blog">博客</a><a class="navbar__item navbar__link" label="关于" position="right" href="/docs/about">关于</a><a class="navbar__item navbar__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a></li><li class="menu__list-item"><a class="menu__link" label="源码笔记" position="left" href="/docs/source/jquery/event">源码笔记</a></li><li class="menu__list-item"><a class="menu__link" label="NodeJS" position="left" href="/docs/nodejs/util">NodeJS</a></li><li class="menu__list-item"><a class="menu__link" label="设计模式" position="left" href="/docs/patterns/index">设计模式</a></li><li class="menu__list-item"><a class="menu__link" label="算法" position="left" href="/docs/algo/index">算法</a></li><li class="menu__list-item"><a class="menu__link" label="服务器" position="left" href="/docs/linux/index">服务器</a></li><li class="menu__list-item"><a class="menu__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a></li><li class="menu__list-item"><a class="menu__link" label="工具" position="left" href="/docs/other/mac">工具</a></li><li class="menu__list-item"><a class="menu__link" label="博客" position="right" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" label="关于" position="right" href="/docs/about">关于</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_Qb2S"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_1uhT" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Html</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/html/index">HTML</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Css</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/index">css基础</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Javascript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/grammer">语法</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/type">数据类型</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/oop">面向对象</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/module">模块化编程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/async">异步编程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/regexp">正则表达式</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">浏览器原理与API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/work">现代浏览器工作原理(翻译)</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/eventloop">事件循环</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/event">事件机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/fetch">网络请求与表单</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/storage">浏览器存储</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/devtool">Chrome 开发者工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/cache">浏览器缓存机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/v8">V8 引擎原理</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">其它</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/monitor/index">前端监控</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/test/index">前端测试与jest</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/f2e/safe/index">web 安全</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/performance/index">网站性能优化</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/basic/index">webpack (1): 官方文档总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/principle/index">webpack (2): 原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/react/index">React 知识点总结</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">vue</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/index">知识点总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/origin">原理分析</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_1VCq"><header><h1 class="margin-bottom--lg">web 安全</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="xss-攻击"></a><a aria-hidden="true" class="hash-link" href="#xss-攻击">#</a>XSS 攻击</h2><p>跨站脚本攻击(cross site scripting, xss) 是往目标网站注入恶意脚本(XSS payload，如评论、第三方脚本)，然后当用户访问时，对用户进行 Cookie 窃取/会话劫持/钓鱼欺骗等各种攻击。xss 原理是<code>程序 + 数据 = 结果</code>，script 由数据变成了程序。下面是一些可能中招的地方：</p><p>1、比如用户提交了 script 参数脚本，后端直接返回了，而没有处理。这个时候用户提交的 script 会直接当作脚本执行(有些浏览器会自动防御，后面讲)。脚本也叫</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">// 前端评论框提交</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">?from=&lt;script src=&#x27;http://www.xx.com/jquery.js&#x27;&gt;&lt;/script&gt;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">// 后端返回前端模板</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">&lt;div&gt;{from}&lt;/div&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>2、评论时富文本编辑器，然后其它用户访问评论也会中招。</p><p>3、用户下单评论或其它操作，后台用户进入查看，这时脚本运行，黑客可以得到后台管理员的 cookie 和网址 referrer，然后登录。</p><ol start="4"><li>包括但不限于 JavaScript / VBScript / CSS / Flash 等。</li></ol><h3><a aria-hidden="true" class="anchor" id="xss-能干什么"></a><a aria-hidden="true" class="hash-link" href="#xss-能干什么">#</a>xss 能干什么</h3><ul><li>获取页面数据。</li><li>获取cookie。</li><li>劫持前端逻辑，比如脚本里有<code>location.href=url</code>或者<code>&lt;meta http-equiv=&quot;Refresh&quot; content=&quot;1; url=url&quot;/&gt;</code> 跳转。</li><li>发送请求。</li><li>偷取网站任意资料、用户资料、密码和登录态，欺骗用户。</li><li>修改样式，误导用户</li></ul><h3><a aria-hidden="true" class="anchor" id="xss攻击分类"></a><a aria-hidden="true" class="hash-link" href="#xss攻击分类">#</a>xss攻击分类</h3><p>xss 攻击分为三种: </p><ul><li><code>反射型</code>：url参数直接注入，危害小些，因为用户可能会察觉到。不过攻击者可能用短网址。</li><li><code>存储型</code>：会存储到数据中，相比危害更大。</li><li><code>DOM Based型</code>: 是用户打开了黑客发送的恶意链接，前端直接使用了链接里的参数作为数据，导致恶意脚本执行了。它很像反射型XSS，只不过是浏览器直接反射。</li></ul><blockquote><p>XSS钓鱼，XSS + 钓鱼网站。比如黑客在网站插入一个吸引人的链接，用户点击链接进入黑客做的淘宝钓鱼网站，输入账号密码。这样黑客就知道用户的账号密码了。</p></blockquote><h3><a aria-hidden="true" class="anchor" id="可能导致-xss-攻击地方"></a><a aria-hidden="true" class="hash-link" href="#可能导致-xss-攻击地方">#</a>可能导致 xss 攻击地方</h3><ul><li>html 节点内容: 动态生成带有用户输入数据。</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">#{content}</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">可能变为:</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ul><li>html 属性。</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">img</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">#{image}</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">可能变为:</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">img</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">1</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">onerror</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">alert(1)</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">/&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ul><li>javascript 代码。</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript"></span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> data </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;#{data}&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"> </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// 后台返回用户输入的数据</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript">可能变为</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript"></span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">var</span><span class="token script language-javascript"> data </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;google&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">alert</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">1</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ul><li>富文本: 富文本需要保留用户的 html，但是 html 会有 xss 风险</li></ul><h3><a aria-hidden="true" class="anchor" id="防御"></a><a aria-hidden="true" class="hash-link" href="#防御">#</a>防御</h3><ol><li>浏览器自带的防御方案，能防御 url 出现在 html 内容或属性中（前2种）这样的反射型攻击，url 出现在js中不会防御。参数带在 url 中，chrome会自动开启<code>X-XSS-Protection</code>头防御xss攻击，后端可以手动关闭。如下面的 nodejs 代码。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 0 是关闭防御 1是打开，如果有url，浏览器防御到后会向 url 发送通知</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;X-XSS-Protection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">ctx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;X-XSS-Protection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ol start="2"><li>转义,即将用户提交的内容转为实体，不让浏览器当作脚本执行。要转义的字符有：</li></ol><table><thead><tr><th>字符</th><th>实体</th></tr></thead><tbody><tr><td>&lt;</td><td><code>&amp;lt;</code></td></tr><tr><td>&gt;</td><td><code>&amp;gt;</code></td></tr><tr><td>&quot;</td><td><code>&amp;quot;</code></td></tr><tr><td>&#x27;</td><td><code>&amp;#39;</code>(还可以是<code>&amp;apos</code>，但ie不支持)</td></tr><tr><td>/</td><td>``(因为如果js里使用，可能会被注释//)</td></tr><tr><td>&amp;</td><td><code>&amp;amp;</code></td></tr></tbody></table><p>由于 html5 规定，属性可以不写引号，所以可能会出现<code>&lt;a href=href&gt;</code>，黑客可能修改为<code>&lt;a href=hackHref href&gt;</code>(第一个href会有效)，所以空格也要转义，但是 html 中如果有连续很多个空格，则会当成一个空格，转义了会对布局有影响，所以需要规范 html 属性必须加引号。</p><ol start="3"><li>js代码：有时候用户提交的数据会被后端当作变量返回给前端，这时可能包含 xss 攻击，比如:</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">var a = &quot;hello&quot;;&quot;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">var a = &#x27;hello&#x27;;&#x27;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">// 最好 var a = JSON.stringify(data)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>这样代码就有问题了，所以需要将变量进行转义。最好的方法是使用<code>JSON.stringify(data)</code>。</p><ol start="4"><li>富文本。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 黑名单策略，不推荐</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(130, 170, 255)">xssFilter</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    html </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token regex">/&lt;\s*\/?script\s*/g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token regex">/javascript:[^&#x27;&quot;]*/g</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">   a href</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">&#x27;</span><span class="token plain">javascript</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&#x27;  还有其它元素</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">replace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token regex">/onerror\s*=\s*[&#x27;&quot;]?[^&#x27;&#x27;]*/</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  还有其它事件，svg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> object</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> html</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>富文本如果按照黑名单替换原则，xss 变种可能性太多会有漏网的。所以使用白名单策略，按白名单保留部分标签和属性，将 html 解析成 dom (cheerio) 分析过滤，再生成 html。最好在用户输入时就做处理。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> whiteList </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    img</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;src&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    font</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;color&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;size&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;href&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">each</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">index</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">!</span><span class="token plain">whiteList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">remove</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> attr </span><span class="token keyword" style="color:rgb(127, 219, 202)">in</span><span class="token plain"> elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">attribs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">whiteList</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">indexOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">attr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token function" style="color:rgb(130, 170, 255)">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">elem</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">attr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">attr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 删除属性</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">html</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><blockquote><p>过滤 Html 标签能否防止 XSS? 请列举不能的情况?</p></blockquote><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">// 使用图片 url 等方式来上传脚本进行攻击</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">table</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">background</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">javascript:alert(/xss/)</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">table</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">img</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">javascript:alert(&#x27;xss&#x27;)</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">// 空格，回车，tab回避检查</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">img</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">javas cript:</span></div><div class="token-line" style="color:#d6deeb"><span class="token tag attr-value" style="color:rgb(127, 219, 202)">alert(&#x27;xss&#x27;)</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">// 各种编码转换(URL 编码, Unicode 编码, HTML 编码, ESCAPE 等)绕过检查</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">&lt;img%20src=%22javascript:alert(&#x27;xss&#x27;);%22&gt;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">img</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">javascrip&amp;#116&amp;#58alert(/xss/)</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p><strong>项目中实践防御 xss 攻击</strong></p><p>在平时项目中，可以使用第三方包。</p><ul><li><a href="https://github.com/ESAPI/node-esapi/blob/master/lib/esapi.js">node-esapi</a></li><li><a href="https://github.com/leizongmin/js-xss">js-xss</a></li></ul><h3><a aria-hidden="true" class="anchor" id="csp"></a><a aria-hidden="true" class="hash-link" href="#csp">#</a>CSP</h3><p>w3c 为了抵御 XSS 攻击制定了一个规范叫 CSP(<code>content security policy</code>)，即内容安全策略，让开发者告诉客户端哪些外部资源可以被加载和执行。所以黑客即使发现了漏洞，也无法注入脚本。</p><p>开启 CSP 的方式：</p><ol><li>通过 http 头 <code>Content-Security-Policy</code>。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">Content-Security-Policy: script-src &#x27;self&#x27;; object-src &#x27;none&#x27;; style-src cdn.example.org third-party.org; child-src https:</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码意思是：脚本只执行当前域名的，<code>&lt;object&gt;</code>标签不信任任何 URL，即不加载任何资源。样式只信任<code>cdn.example.org</code>、<code>third-party.org</code>域的，<code>frame</code> 只能是 https 的，其它资源没有限制。</p><ol start="2"><li>通过<code>&lt;meta&gt;</code>标签。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-html codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">meta</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">http-equiv</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">Content-Security-Policy</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">content</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">script-src &#x27;self&#x27;; object-src &#x27;none&#x27;; style-src cdn.example.org third-party.org; child-src https:</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>更多参考资料:</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP">mdn 内容安全策略( CSP )</a></li><li><a href="https://imququ.com/post/content-security-policy-reference.html">Content Security Policy 介绍</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html">Content Security Policy 入门教程</a></li></ul><p><strong>php 中防御 xss</strong></p><p>在 php 中防御 xss 攻击可以用一下方式。</p><ul><li>内置函数转义: strip_tags($content) 将html标签移除只剩下内容  htmlspecialchars($content, ENT_QUOTES) 默认不转<code>&#x27;</code>,要加ENT_QUOTES，会将<code>&lt;&gt; &amp; &#x27; &quot; </code>转义。</li><li>dom解析白名单，可以用内置DOMDocument类</li><li>第三方库 anti-xss等  html purifier</li><li>csp:<code>header(&#x27;X-Xss-Protection&#x27;,&#x27;script-src &quot;self&quot; &#x27;)</code></li></ul><h2><a aria-hidden="true" class="anchor" id="csrf"></a><a aria-hidden="true" class="hash-link" href="#csrf">#</a>CSRF</h2><p>CSRF (cross-site request forgy) 叫做跨站请求伪造。比如用户登陆了 a 网站，同时打开黑客的 b 网站伪造表单，会自动在 a 网站里面发了一篇文章。原理是 b 网站有个自动提交表单，用户打开 b 网站时，由于登陆了 a 网站(有 cookie)，所以可以向 a 提交表单。</p><p>CSRF 是在用户不知情的情况下，利用用户的登陆态去完成业务请求，这里业务请求可能是银行转账，冒充用户发帖或删帖。会损害网站的声誉。</p><p>它的特征如下：</p><ul><li>在 b 网站中向 a 网站发送请求。</li><li>会带 a 的 cookie。</li><li>没有访问 a 网站前端页面。</li><li>referer 为 b 网站。</li></ul><p><strong>防御 CSRF 攻击</strong></p><p>利用上面的特性，我们有如下防御策略：</p><ol><li>禁止第三方网站带 cookies，可以通过设置 cookie 的<code>same-site</code>属性实现。</li><li>在前端加入验证码（但是影响用户体验，可以用<code>ccap</code>模块）。</li><li>使用 token。前端将它放到页面<code>&lt;input type=hidden token=xx&gt;</code> 或 <code>&lt;meta&gt;</code> 中，同时后端将它设置到 cookie 中，在发送请求时后端验证这2个值是否一致。因为攻击者不访问前端无法获得 token ，而且无法得到和修改 cookie 里的 token。</li><li>验证<code>origin Header</code>和<code>referer Header</code>。打开本地 url <code>file://xx</code> 不会发送 referer，通过 http 请求才会发。所以可以使用正则<code>/https?\/\/localhost/</code> 验证 referer 是否符合条件。但有些浏览器可以让用户设置不发 referer，所以可能会导致一些问题。</li></ol><p><strong>在 php 中防御</strong></p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-php codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token function" style="color:rgb(130, 170, 255)">header</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token single-quoted-string string" style="color:rgb(173, 219, 103)">&#x27;Set-Cookie: text=123; SameSite=Lax&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="cookies-问题"></a><a aria-hidden="true" class="hash-link" href="#cookies-问题">#</a>cookies 问题</h2><p>cookies 特性</p><ul><li>前端数据存储</li><li>后端通过http头设置</li><li>请求时通过http头传给后端</li><li>前端可读写</li><li>遵守同源策略：协议、域名、端口一致</li></ul><p>cookie 的字段</p><ul><li>域名：只能使用自己域名下的</li><li>有效期：默认是 Session，会话结束就到期，toGMTString()</li><li>路径: path不同，cookie 可以同名</li><li>http-only：cookie 只能被http使用，即只能被后端读写。前端不能使用</li><li>secure：https 时才能使用</li><li>same-site，兼容性问题</li></ul><p><strong>js 可以读取、设置、删除 cookies</strong></p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">cookie</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>cookies作用</p><ul><li>存储个性化设置</li><li>存储未登录时用户唯一标识</li><li>存储已登录用户的凭证</li><li>存储其它业务数据</li></ul><p>存储已登录用户的凭证</p><p>过程：前端提交登陆，后端验证，存储session设置cookie，前端发cookie</p><p>1、用户ID，下次根据id来识别用户，cookie容易被篡改，模拟其它用户登录</p><p>2、用户ID + 签名，这个签名只有后端能算出来。签名是不可逆的。cookie内容有userId，sign，后端拿到userId再签名和sign进行对比即可。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-javascript codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">KEY</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;fjas3&amp;#11fdjsk&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 私钥</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">crypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method-variable function-variable method function property-access" style="color:rgb(130, 170, 255)">cryptUserId</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">userId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> crypto </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;crypto&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> sign </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createHmac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;sha256&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    sign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">userId </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> sign</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">digest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>3、SessionId(持久化，可存文件或数据库中)：服务端返回一个随机数，根据随机数判断用户，前端cookie没有用户可识别的信息。黑客不知道怎么修改。 session的原理和实现。</p><p>Cookies和XSS的关系</p><ul><li>XSS可能偷取Cookies</li><li>http-only的cookies不会被偷</li></ul><p>Cookies和CSRF的关系</p><ul><li>CSRF利用了用户Cookies</li><li>攻击站点无法读写Cookies</li><li>最好能阻止第三方读取Cookies</li></ul><p>Cookies安全策略</p><ul><li>签名防篡改(对明文进行签名)</li><li>加密(对userid进行加密，别人看不懂，无法修改)，crypto.createCipher()、crypto.createDecipher()</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-javascript codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 加密</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> cipher </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createCipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;des&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> text </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> cipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hello&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">text </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> cipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">final</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 解密</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> cipher </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> crypto</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createDecipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;des&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> origin </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> cipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;hex&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">origin </span><span class="token operator" style="color:rgb(127, 219, 202)">+=</span><span class="token plain"> decipher</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">final</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;utf8&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ul><li>http-only(防止XSS)</li><li>secure：https下才能使用cookie</li><li>same-site:只支持 chrome</li></ul><h2><a aria-hidden="true" class="anchor" id="点击劫持"></a><a aria-hidden="true" class="hash-link" href="#点击劫持">#</a>点击劫持</h2><h2><a aria-hidden="true" class="anchor" id="ddos攻击"></a><a aria-hidden="true" class="hash-link" href="#ddos攻击">#</a>DDOS攻击</h2><p>DDOS (Distributed Denial of Service）叫分布式拒绝服务攻击，是用多个计算机联合起来对一个或多个目标服务器进行攻击，将目标服务器的宽带或资源消耗完，导致其无法为正常客户提供服务。</p><p><strong>如何防御DDOS攻击</strong></p><ol><li>尽可能对系统加载最新补丁，并采取有效的合规性配置，降低漏洞利用风险</li><li>采取合适的安全域划分，配置防火墙、入侵检测和防范系统，减缓攻击。</li><li>采用分布式组网、负载均衡、提升系统容量等可靠性措施，增强总体服务能力。</li></ol><p>可参考措施：</p><ol><li>选择路由器、交换机、硬件防火墙等设备的时候要尽量选用知名度高、 口碑好的产品。</li><li>尽量避免 NAT 的使用</li><li>充足的网络带宽保证</li><li>升级主机服务器硬件</li><li>把网站做成静态页面</li></ol><ul><li>TCP半连接：让连接一直连接，其它用户连接不进来</li><li>http连接</li><li>DNS</li></ul><p><strong>攻击案例</strong></p><ul><li>游戏私服互相 DDOS</li></ul><h2><a aria-hidden="true" class="anchor" id="密码安全"></a><a aria-hidden="true" class="hash-link" href="#密码安全">#</a>密码安全</h2><blockquote><p>加密是如何保证用户密码的安全性?</p></blockquote><h2><a aria-hidden="true" class="anchor" id="信息泄露"></a><a aria-hidden="true" class="hash-link" href="#信息泄露">#</a>信息泄露</h2><h2><a aria-hidden="true" class="anchor" id="传输安全"></a><a aria-hidden="true" class="hash-link" href="#传输安全">#</a>传输安全</h2><p>https</p><h2><a aria-hidden="true" class="anchor" id="服务端安全"></a><a aria-hidden="true" class="hash-link" href="#服务端安全">#</a>服务端安全</h2><p>除了前端注意安全，后端也需要对安全进行防范，常见比如防止 SQL 注入，登录会话管理等。</p><h2><a aria-hidden="true" class="anchor" id="学习资料"></a><a aria-hidden="true" class="hash-link" href="#学习资料">#</a>学习资料</h2><ul><li><a href="https://www.zhihu.com/question/20026752">https://www.zhihu.com/question/20026752</a></li><li><a href="https://zoumiaojiang.com/article/common-web-security/">常见 Web 安全攻防总结</a></li><li><a href="https://zhuanlan.zhihu.com/p/31875007">https://zhuanlan.zhihu.com/p/31875007</a></li><li><a href="https://zhuanlan.zhihu.com/p/19705180">https://zhuanlan.zhihu.com/p/19705180</a></li><li><a href="http://www.imweb.io/topic/568958714c44bcc56092e409">从零开始学web安全（1）</a></li><li><a href="http://www.imweb.io/topic/56b876a65c49f9d377ed8ef6">从零开始学web安全（2）</a></li><li><a href="http://imweb.io/topic/57024e4606f2400432c1396d">从零开始学web安全（3）</a></li><li><a href="http://www.imweb.io/topic/574b22633eef750438d5cb44">从零开始学web安全（4）</a></li><li><a href="http://www.freebuf.com/articles/web/40520.html">XSS的原理分析与解剖</a></li><li><a href="http://www.freebuf.com/articles/web/42727.html">XSS的原理分析与解剖（第二篇）</a></li><li><a href="http://www.freebuf.com/articles/44481.html">XSS的原理分析与解剖：第三章（技巧篇）</a></li><li><a href="http://www.freebuf.com/articles/web/55505.html">XSS的原理分析与解剖：第四章（编码与绕过）</a></li><li><a href="https://www.leiphone.com/news/201509/9zGlIDvLhwguqOtg.html">漫画告诉你什么是DDoS攻击？</a></li><li><a href="https://www.zhihu.com/question/19581905">互联网创业公司如何防御 DDOS 攻击？</a></li><li><a href="http://www.jianshu.com/p/251704d8ff18">web安全之--点击劫持攻击与防御技术简介</a></li><li>《白帽子讲 Web 安全》相关内容</li><li><a href="http://www.freebuf.com/articles/web/74324.html">戏耍XSS的一些技巧</a></li><li><a href="https://www.cnblogs.com/jerrysion/p/5522673.html">为什么要进行URL编码</a></li><li><a href="https://www.cnblogs.com/kuoaidebb/p/3983886.html">【web安全】第二弹：XSS攻防中的复合编码问题</a></li><li><a href="https://www.cnblogs.com/iceli/p/8598709.html">xss:利用编码绕过</a><a href="http://www.freebuf.com/author/Black-Hole?page=2">http://www.freebuf.com/author/Black-Hole?page=2</a></li></ul><h2><a aria-hidden="true" class="anchor" id="中间人攻击"></a><a aria-hidden="true" class="hash-link" href="#中间人攻击">#</a>中间人攻击</h2><p>DNS欺骗: 检查hosts
会话劫持
代理服务器</p><h2><a aria-hidden="true" class="anchor" id="sqlnosql-注入"></a><a aria-hidden="true" class="hash-link" href="#sqlnosql-注入">#</a>SQL/NoSQL 注入</h2><p>注入攻击是指当所执行的一些操作中有部分由用户传入时, 用户可以将其恶意逻辑注入到操作中. 当你使用 eval, new Function 等方式执行的字符串中有用户输入的部分时, 就可能被注入攻击. 上文中的 XSS 就属于一种注入攻击. 前面的章节中也提到过 Node.js 的 child_process.exec 由于调用 bash 解析, 如果执行的命令中有部分属于用户输入, 也可能被注入攻击.</p><p>包括但不限于删除数据 (经济损失), 篡改数据 (密码等), 窃取数据 (网站管理权限, 用户数据) 等. 防治手段常见于:</p><p>给表名/字段名加前缀 (避免被猜到)
报错隐藏表信息 (避免被看到, 12306 早期就出现过的问题)
过滤可以拼接 SQL 的关键字符
对用户输入进行转义
验证用户输入的类型 (避免 limit, order by 等注入)
等...</p></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/f2e/test/index"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->前端测试与jest</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/f2e/performance/index"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">网站性能优化<!-- --> »</h4></a></div></nav><div id="gitalk-container"></div></div></div></div><div class="col col--3"><div class="tableOfContents_1X5y"><ul class="contents contents__left-border"><li><a href="#xss-攻击" class="contents__link">XSS 攻击</a><ul class=""><li><a href="#xss-能干什么" class="contents__link">xss 能干什么</a></li><li><a href="#xss攻击分类" class="contents__link">xss攻击分类</a></li><li><a href="#可能导致-xss-攻击地方" class="contents__link">可能导致 xss 攻击地方</a></li><li><a href="#防御" class="contents__link">防御</a></li><li><a href="#csp" class="contents__link">CSP</a></li></ul></li><li><a href="#csrf" class="contents__link">CSRF</a></li><li><a href="#cookies-问题" class="contents__link">cookies 问题</a></li><li><a href="#点击劫持" class="contents__link">点击劫持</a></li><li><a href="#ddos攻击" class="contents__link">DDOS攻击</a></li><li><a href="#密码安全" class="contents__link">密码安全</a></li><li><a href="#信息泄露" class="contents__link">信息泄露</a></li><li><a href="#传输安全" class="contents__link">传输安全</a></li><li><a href="#服务端安全" class="contents__link">服务端安全</a></li><li><a href="#学习资料" class="contents__link">学习资料</a></li><li><a href="#中间人攻击" class="contents__link">中间人攻击</a></li><li><a href="#sqlnosql-注入" class="contents__link">SQL/NoSQL 注入</a></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/runtime~main.4a2977139467a9935120.js"></script>

<script type="text/javascript" src="/main.d2133d254be990e5de74.js"></script>

<script type="text/javascript" src="/0.16af387a65ebed0a8269.js"></script>

<script type="text/javascript" src="/1.c8be69cf2132cbcf4ef5.js"></script>

<script type="text/javascript" src="/2.4fb8b682bb18f529e158.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-page-9-e-7-ca5.3c362ce04210fe984260.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-76-d-edd.e2c51fa6c15b625f5d20.js"></script>

<script type="text/javascript" src="/3.460c75fdeaa7cfe797a5.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-item-031-769.6dced88da14b8c4a1cd5.js"></script>

<script type="text/javascript" src="/content---docs-f-2-e-safe-index-165-7db.f09e7426503bd97b8fc8.js"></script>

<script type="text/javascript" src="/metadata---docs-f-2-e-safe-index-8-f-9-07f.a380096347412e09c3e7.js"></script>

</body>
</html>