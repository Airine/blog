<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.d719e73e126f22665d27.css","/main.d0f0be10cc33c5c9fabf.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.7f8bb42332d3fb863b06.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.a2f7d26526ece7f2b173.js"],"content---blog-2019-08-12-think-house-362-b31":["/content---blog-2019-08-12-think-house-362-b31.f1884c08b7751e5a3dcf.js"],"metadata---blog-2019-08-12-think-house-3-b-6-904":["/metadata---blog-2019-08-12-think-house-3-b-6-904.03c13ed1d7988f93e122.js"],"nextItem---blog-2019-08-12-think-housefda-8d6":["/nextItem---blog-2019-08-12-think-housefda-8d6.bd8568e4c97ad8ede4ab.js"],"content---blog-2018-07-05-browser-workae-5-385":["/content---blog-2018-07-05-browser-workae-5-385.f4af49e9f65cb2533041.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.69a9dc062d527e833d49.js"],"content---bloga-55-f4d":["/content---bloga-55-f4d.0638d81d7749e08deaab.js"],"content---blog-028-9eb":["/content---blog-028-9eb.931f0e2af5889feeb24d.js"],"metadata---blog-92-a-15c":["/metadata---blog-92-a-15c.ffc68ea20a932449ec14.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/component---theme-doc-legacy-page-9-e-7-ca5.f43a35144d87a5017ffc.css","/component---theme-doc-legacy-page-9-e-7-ca5.8ab89649a3236e6915b2.js"],"docsMetadata---docs-9-a-9-239":["/docsMetadata---docs-9-a-9-239.dc324927921ceb5535e8.js"],"component---theme-doc-legacy-item-031-769":["/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css","/component---theme-doc-legacy-item-031-769.401ad738f669ab84366d.js"],"content---docs-about-3-d-8-538":["/content---docs-about-3-d-8-538.dd64865c919de14c433a.js"],"metadata---docs-about-443-9ff":["/metadata---docs-about-443-9ff.7fb3cff2fa64a3c9771e.js"],"content---docs-algo-hash-table-818-672":["/content---docs-algo-hash-table-818-672.c9d45b1d3a9905edad90.js"],"metadata---docs-algo-hash-tableee-4-aa7":["/metadata---docs-algo-hash-tableee-4-aa7.5454f4aab7ddb8e868fa.js"],"content---docs-algo-indexb-4-f-54a":["/content---docs-algo-indexb-4-f-54a.d400a9593389abd97212.js"],"metadata---docs-algo-index-812-55b":["/metadata---docs-algo-index-812-55b.d9b52abbcd823d733d4a.js"],"content---docs-algo-linked-list-7-fe-ad2":["/content---docs-algo-linked-list-7-fe-ad2.a02d4c52c959cb2b90b7.js"],"metadata---docs-algo-linked-list-969-438":["/metadata---docs-algo-linked-list-969-438.e6be84d4a2522a9235fc.js"],"content---docs-algo-sortfee-000":["/content---docs-algo-sortfee-000.88af951f1ff946cb2902.js"],"metadata---docs-algo-sort-457-08b":["/metadata---docs-algo-sort-457-08b.6aee8a7340e5b555cc49.js"],"content---docs-base-compute-combinef-7-f-933":["/content---docs-base-compute-combinef-7-f-933.0841aa8da67981054380.js"],"metadata---docs-base-compute-combine-480-a12":["/metadata---docs-base-compute-combine-480-a12.848258b86658b197d1b5.js"],"content---docs-database-mongo-2-c-4-a31":["/content---docs-database-mongo-2-c-4-a31.f127532b589595483ce7.js"],"metadata---docs-database-mongo-0-c-2-f76":["/metadata---docs-database-mongo-0-c-2-f76.ec4455027c267f34bc13.js"],"content---docs-database-mysql-561-697":["/content---docs-database-mysql-561-697.015ae84e420c05f5e709.js"],"metadata---docs-database-mysql-2-f-1-3e5":["/metadata---docs-database-mysql-2-f-1-3e5.818a0f0f45485c9e209f.js"],"content---docs-base-h-5586-54d":["/content---docs-base-h-5586-54d.e2ee4630bf1c714248ed.js"],"metadata---docs-base-h-515-a-1cb":["/metadata---docs-base-h-515-a-1cb.4db7d3681e0faede800c.js"],"content---docs-database-redise-5-d-9ae":["/content---docs-database-redise-5-d-9ae.2ac6d9640c8f5c314cd6.js"],"metadata---docs-database-redis-4-a-0-66e":["/metadata---docs-database-redis-4-a-0-66e.9a571ae361e57c92859d.js"],"content---docs-demo-print-vcardabc-7b4":["/content---docs-demo-print-vcardabc-7b4.735d884fbcd19137c86f.js"],"metadata---docs-demo-print-vcard-88-d-6c7":["/metadata---docs-demo-print-vcard-88-d-6c7.476bf38a4c3dd16ab7fa.js"],"content---docs-demo-index-648-2ab":["/content---docs-demo-index-648-2ab.c78c5773e175195332a4.js"],"metadata---docs-demo-indexa-04-089":["/metadata---docs-demo-indexa-04-089.c075f08d94e47df14732.js"],"content---docs-demo-web-component-35-a-a72":["/content---docs-demo-web-component-35-a-a72.be9fe6f4cda51b75232a.js"],"metadata---docs-demo-web-component-8-fd-db4":["/metadata---docs-demo-web-component-8-fd-db4.d2e94b419d98f664bcc4.js"],"content---docs-linux-fileec-1-765":["/content---docs-linux-fileec-1-765.f7b0e936eb388835b9fc.js"],"metadata---docs-linux-file-65-c-c93":["/metadata---docs-linux-file-65-c-c93.3a1bcaf23468beb6cee3.js"],"content---docs-linux-indexcb-8-9a7":["/content---docs-linux-indexcb-8-9a7.bc23b26d6abc6711764e.js"],"metadata---docs-linux-index-73-e-38c":["/metadata---docs-linux-index-73-e-38c.91d63107880cdd8556b9.js"],"content---docs-linux-service-49-b-272":["/content---docs-linux-service-49-b-272.46db43b19ece84bc2983.js"],"metadata---docs-linux-serviceac-8-d7f":["/metadata---docs-linux-serviceac-8-d7f.1ad8949237a2d68d0198.js"],"content---docs-linux-soft-422-6cf":["/content---docs-linux-soft-422-6cf.d51b78beca2ab3ef116c.js"],"metadata---docs-linux-softe-01-10b":["/metadata---docs-linux-softe-01-10b.ef0471117ca677f3a765.js"],"content---docs-nginx-index-16-d-468":["/content---docs-nginx-index-16-d-468.91378ecf6466a86c068d.js"],"metadata---docs-nginx-index-4-a-2-2e4":["/metadata---docs-nginx-index-4-a-2-2e4.0a53e07a0bc8270c7fa6.js"],"content---docs-nodejs-async-7-f-4-0af":["/content---docs-nodejs-async-7-f-4-0af.39a1a23fddf9b5860a13.js"],"metadata---docs-nodejs-asyncc-40-22b":["/metadata---docs-nodejs-asyncc-40-22b.eb9ecd36d66bad73a055.js"],"content---docs-nodejs-safee-0-a-532":["/content---docs-nodejs-safee-0-a-532.9323b63e9927e87ec814.js"],"metadata---docs-nodejs-safe-287-46f":["/metadata---docs-nodejs-safe-287-46f.1575955756c994c984a3.js"],"content---docs-nodejs-npm-792-f52":["/content---docs-nodejs-npm-792-f52.29623d64ea6a0f291cb8.js"],"metadata---docs-nodejs-npm-9-e-0-1d7":["/metadata---docs-nodejs-npm-9-e-0-1d7.f4b8c2aec3ec937cacb3.js"],"content---docs-nodejs-testaf-7-5fa":["/content---docs-nodejs-testaf-7-5fa.1c3cf800d2488488ccad.js"],"metadata---docs-nodejs-testbf-0-08d":["/metadata---docs-nodejs-testbf-0-08d.1a238f91a73012133ce9.js"],"content---docs-nodejs-utild-25-062":["/content---docs-nodejs-utild-25-062.4a418837b3aae65eb089.js"],"metadata---docs-nodejs-util-0-fd-711":["/metadata---docs-nodejs-util-0-fd-711.d8d0935815e0082507bc.js"],"content---docs-other-blogaab-295":["/content---docs-other-blogaab-295.fc2487dfd8156f73cee7.js"],"metadata---docs-other-blogc-8-f-558":["/metadata---docs-other-blogc-8-f-558.b869b252db101701dcf4.js"],"content---docs-other-form-5-ae-4a3":["/content---docs-other-form-5-ae-4a3.6a84a711be277d89ac1f.js"],"metadata---docs-other-form-6-eb-90c":["/metadata---docs-other-form-6-eb-90c.caecfdcb71a7ca60370a.js"],"content---docs-other-kindle-rss-789-941":["/content---docs-other-kindle-rss-789-941.c13202bb9a568a7c67cf.js"],"metadata---docs-other-kindle-rssb-06-572":["/metadata---docs-other-kindle-rssb-06-572.9e83a2cff2bd5c8ee168.js"],"content---docs-other-maced-3-b03":["/content---docs-other-maced-3-b03.a27ac65fe4cad663a8d0.js"],"metadata---docs-other-macc-8-c-bc8":["/metadata---docs-other-macc-8-c-bc8.1cc903c752dab68178ef.js"],"content---docs-other-printcdf-579":["/content---docs-other-printcdf-579.643656676d525ef4454c.js"],"metadata---docs-other-print-159-cfd":["/metadata---docs-other-print-159-cfd.93a41d1f1d888e6846ca.js"],"content---docs-other-resourceea-2-ecf":["/content---docs-other-resourceea-2-ecf.db63ee7e2d11897cf7a3.js"],"metadata---docs-other-resource-348-7b5":["/metadata---docs-other-resource-348-7b5.7776e1597901d7a9d5f7.js"],"content---docs-other-waterfall-7-a-8-45a":["/content---docs-other-waterfall-7-a-8-45a.ea846bd1aea3e4535e7c.js"],"metadata---docs-other-waterfall-2-d-6-105":["/metadata---docs-other-waterfall-2-d-6-105.17416f9cb70c04ba50f9.js"],"content---docs-patterns-action-61-d-c76":["/content---docs-patterns-action-61-d-c76.7483e803c3910b04fb57.js"],"metadata---docs-patterns-action-124-4bd":["/metadata---docs-patterns-action-124-4bd.7709b73d9ca452419c0f.js"],"content---docs-patterns-adapter-555-7ec":["/content---docs-patterns-adapter-555-7ec.0c349a9145088cc12595.js"],"metadata---docs-patterns-adapter-464-f76":["/metadata---docs-patterns-adapter-464-f76.7e257e2b4a6caf0fd385.js"],"content---docs-patterns-bridge-335-1e9":["/content---docs-patterns-bridge-335-1e9.bb385788f53a1e459072.js"],"metadata---docs-patterns-bridgefbb-495":["/metadata---docs-patterns-bridgefbb-495.77d7813421bba3549de3.js"],"content---docs-patterns-builder-5-e-5-e3a":["/content---docs-patterns-builder-5-e-5-e3a.92170d3398708307f57f.js"],"metadata---docs-patterns-builderead-d21":["/metadata---docs-patterns-builderead-d21.6c72607403138976ec0a.js"],"content---docs-patterns-chain-of-responsibility-579-dfa":["/content---docs-patterns-chain-of-responsibility-579-dfa.5eb0b467a86023b61c09.js"],"metadata---docs-patterns-chain-of-responsibility-014-8a0":["/metadata---docs-patterns-chain-of-responsibility-014-8a0.939f0da248be517d0d04.js"],"content---docs-patterns-composite-33-e-80d":["/content---docs-patterns-composite-33-e-80d.3419c17b81f5bd52c0bd.js"],"metadata---docs-patterns-composite-238-38a":["/metadata---docs-patterns-composite-238-38a.e06f2272ffcecf5c7bd2.js"],"content---docs-patterns-commande-85-4af":["/content---docs-patterns-commande-85-4af.42d9f552f82085e3e8d8.js"],"metadata---docs-patterns-command-80-a-50e":["/metadata---docs-patterns-command-80-a-50e.1f1d0146e65b669fdf3e.js"],"content---docs-patterns-decorator-944-f6d":["/content---docs-patterns-decorator-944-f6d.b9703222b65204ecfa4d.js"],"metadata---docs-patterns-decorator-142-9e2":["/metadata---docs-patterns-decorator-142-9e2.1c85907cced62f2c7174.js"],"content---docs-patterns-facade-4-ef-b2f":["/content---docs-patterns-facade-4-ef-b2f.a3222e8bc4aa917d4afb.js"],"metadata---docs-patterns-facade-7-a-8-297":["/metadata---docs-patterns-facade-7-a-8-297.25bcda7597d34741ba48.js"],"content---docs-patterns-factoryf-00-197":["/content---docs-patterns-factoryf-00-197.c9d55103a620fa9a37f3.js"],"metadata---docs-patterns-factory-659-5cc":["/metadata---docs-patterns-factory-659-5cc.d8b0f485d300b04bf5cd.js"],"content---docs-patterns-flyweighte-43-831":["/content---docs-patterns-flyweighte-43-831.498a0d3d4456d9e2d41d.js"],"metadata---docs-patterns-flyweightaba-d18":["/metadata---docs-patterns-flyweightaba-d18.e6eefd431c09a7036114.js"],"content---docs-patterns-index-90-d-78a":["/content---docs-patterns-index-90-d-78a.3119e1f74843fdca8125.js"],"metadata---docs-patterns-index-63-b-9e3":["/metadata---docs-patterns-index-63-b-9e3.27370abc1d5f19ee3069.js"],"content---docs-patterns-interpreterc-34-4ff":["/content---docs-patterns-interpreterc-34-4ff.8884b918387e7272db17.js"],"metadata---docs-patterns-interpreter-484-b15":["/metadata---docs-patterns-interpreter-484-b15.de1569965c83b851265b.js"],"content---docs-patterns-iterator-3-bc-1d4":["/content---docs-patterns-iterator-3-bc-1d4.5318d4bb9403084d74cd.js"],"metadata---docs-patterns-iterator-288-f03":["/metadata---docs-patterns-iterator-288-f03.e0d396117d120d662eff.js"],"content---docs-patterns-mediator-685-4ef":["/content---docs-patterns-mediator-685-4ef.dd86ad7f27fcad818748.js"],"metadata---docs-patterns-mediator-421-d91":["/metadata---docs-patterns-mediator-421-d91.94ba5a92ca79f1a8c3fa.js"],"content---docs-patterns-memento-740-286":["/content---docs-patterns-memento-740-286.c52d3e19292b64c89102.js"],"metadata---docs-patterns-memento-098-f69":["/metadata---docs-patterns-memento-098-f69.2b0bbc31f3e95b6d938b.js"],"content---docs-patterns-observer-73-f-441":["/content---docs-patterns-observer-73-f-441.4343fc5f2b87879d4841.js"],"metadata---docs-patterns-observere-90-4f8":["/metadata---docs-patterns-observere-90-4f8.0efd0407f7e1b769a081.js"],"content---docs-patterns-prototype-93-c-d70":["/content---docs-patterns-prototype-93-c-d70.7b1fc1277f7ca4c2f790.js"],"metadata---docs-patterns-prototype-8-ac-89b":["/metadata---docs-patterns-prototype-8-ac-89b.10f523a5a83be9792fbb.js"],"content---docs-patterns-proxyb-6-e-4ef":["/content---docs-patterns-proxyb-6-e-4ef.04036821c74a040c5b93.js"],"metadata---docs-patterns-proxye-47-a3c":["/metadata---docs-patterns-proxye-47-a3c.6cc25e473cdb7f15695e.js"],"content---docs-patterns-singleton-710-727":["/content---docs-patterns-singleton-710-727.e55ede9b5adb6e49bdb4.js"],"metadata---docs-patterns-singletonb-35-b33":["/metadata---docs-patterns-singletonb-35-b33.637632d797265205b3f8.js"],"content---docs-patterns-stated-4-a-502":["/content---docs-patterns-stated-4-a-502.d333666825d96782b11d.js"],"metadata---docs-patterns-stateb-04-819":["/metadata---docs-patterns-stateb-04-819.a9bdff2937cf1ae9dc68.js"],"content---docs-patterns-strategy-9-e-9-61c":["/content---docs-patterns-strategy-9-e-9-61c.d46e2ea3cec496acbff2.js"],"metadata---docs-patterns-strategy-6-ce-04f":["/metadata---docs-patterns-strategy-6-ce-04f.0358809cff90d2289cd6.js"],"content---docs-patterns-templateee-1-6e8":["/content---docs-patterns-templateee-1-6e8.b03cea64c5ce8fba6290.js"],"metadata---docs-patterns-template-3-bc-bf3":["/metadata---docs-patterns-template-3-bc-bf3.9678bb9c8d1a0e007c9b.js"],"content---docs-patterns-visitorff-6-bda":["/content---docs-patterns-visitorff-6-bda.25c05e5dc611c21c0fa7.js"],"metadata---docs-patterns-visitore-38-a38":["/metadata---docs-patterns-visitore-38-a38.dfc79468db5b09e74899.js"],"content---docs-base-net-http-1-cc-352":["/content---docs-base-net-http-1-cc-352.338672331bace1c4fd3e.js"],"metadata---docs-base-net-http-373-f55":["/metadata---docs-base-net-http-373-f55.c5f0da9cd45c8480ca79.js"],"content---docs-base-net-tcpd-0-c-487":["/content---docs-base-net-tcpd-0-c-487.79310432cb05e438d500.js"],"metadata---docs-base-net-tcp-212-c6f":["/metadata---docs-base-net-tcp-212-c6f.de1c1afc47d811e8e9d3.js"],"content---docs-f-2-e-browser-cache-260-909":["/content---docs-f-2-e-browser-cache-260-909.cc4fa2ff77e2c009646d.js"],"metadata---docs-f-2-e-browser-cache-361-a94":["/metadata---docs-f-2-e-browser-cache-361-a94.752fc75f482c96d05634.js"],"content---docs-f-2-e-browser-devtool-850-efc":["/content---docs-f-2-e-browser-devtool-850-efc.873ad87e2799d0084823.js"],"metadata---docs-f-2-e-browser-devtool-3-ab-d05":["/metadata---docs-f-2-e-browser-devtool-3-ab-d05.02a79802b8d60a4fd3a9.js"],"content---docs-f-2-e-browser-canvase-97-e28":["/content---docs-f-2-e-browser-canvase-97-e28.5dbf45234d006a6a08de.js"],"metadata---docs-f-2-e-browser-canvas-574-e4b":["/metadata---docs-f-2-e-browser-canvas-574-e4b.8e8aa594bd677a7404b8.js"],"content---docs-f-2-e-browser-dom-018-426":["/content---docs-f-2-e-browser-dom-018-426.43645d78faeedb05ec17.js"],"metadata---docs-f-2-e-browser-domb-41-90c":["/metadata---docs-f-2-e-browser-domb-41-90c.639b4519cda39ddfd263.js"],"content---docs-f-2-e-browser-eventa-5-d-93e":["/content---docs-f-2-e-browser-eventa-5-d-93e.08fcac630fe46b26d9f6.js"],"metadata---docs-f-2-e-browser-event-0-cc-f3c":["/metadata---docs-f-2-e-browser-event-0-cc-f3c.f101a841bbca28b8f3cc.js"],"content---docs-f-2-e-browser-fetch-147-732":["/content---docs-f-2-e-browser-fetch-147-732.0996862ed1c1e6f52ad9.js"],"metadata---docs-f-2-e-browser-fetch-918-58f":["/metadata---docs-f-2-e-browser-fetch-918-58f.6a9f59ac748af95d93a8.js"],"content---docs-f-2-e-browser-v-8-c-83-515":["/content---docs-f-2-e-browser-v-8-c-83-515.deafc0a67a29403485f4.js"],"metadata---docs-f-2-e-browser-v-8-e-60-c45":["/metadata---docs-f-2-e-browser-v-8-e-60-c45.4868baae53362f7c4b09.js"],"content---docs-f-2-e-browser-storage-0-e-2-cd2":["/content---docs-f-2-e-browser-storage-0-e-2-cd2.0d817c6f53c1458e3ed5.js"],"metadata---docs-f-2-e-browser-storagea-21-a7b":["/metadata---docs-f-2-e-browser-storagea-21-a7b.15d211c6c2aad237d614.js"],"content---docs-f-2-e-browser-work-31-f-d77":["/content---docs-f-2-e-browser-work-31-f-d77.e7acdc52350a732005a0.js"],"metadata---docs-f-2-e-browser-work-9-d-7-1ef":["/metadata---docs-f-2-e-browser-work-9-d-7-1ef.62af45d08e6115792789.js"],"content---docs-f-2-e-coding-standarda-1-c-070":["/content---docs-f-2-e-coding-standarda-1-c-070.080c2cc9fb56db25447f.js"],"metadata---docs-f-2-e-coding-standardeed-27d":["/metadata---docs-f-2-e-coding-standardeed-27d.8b52cc13e6bdc07dd25b.js"],"content---docs-f-2-e-css-animationebd-9f7":["/content---docs-f-2-e-css-animationebd-9f7.684c36c0a73901111abe.js"],"metadata---docs-f-2-e-css-animationb-25-039":["/metadata---docs-f-2-e-css-animationb-25-039.31b91538f61810a1434a.js"],"content---docs-f-2-e-css-code-98-f-375":["/content---docs-f-2-e-css-code-98-f-375.f3746474ba0ed3321a1e.js"],"metadata---docs-f-2-e-css-codea-4-f-118":["/metadata---docs-f-2-e-css-codea-4-f-118.4d2d51c8d9b70ee53d21.js"],"content---docs-f-2-e-css-indexf-55-541":["/content---docs-f-2-e-css-indexf-55-541.8ec126ea4cc43de6eb8a.js"],"metadata---docs-f-2-e-css-indexe-08-461":["/metadata---docs-f-2-e-css-indexe-08-461.0607c779738b88a35232.js"],"content---docs-f-2-e-css-layout-73-d-568":["/content---docs-f-2-e-css-layout-73-d-568.5d11365a09d26c5e55a2.js"],"metadata---docs-f-2-e-css-layout-58-b-f0d":["/metadata---docs-f-2-e-css-layout-58-b-f0d.6b05fd5fc1981a09d710.js"],"content---docs-f-2-e-css-selector-3-f-9-a15":["/content---docs-f-2-e-css-selector-3-f-9-a15.230cf9eadb8cb8a13c3a.js"],"metadata---docs-f-2-e-css-selector-165-76b":["/metadata---docs-f-2-e-css-selector-165-76b.ae6874fc777371b87754.js"],"content---docs-f-2-e-css-syntaxa-16-ceb":["/content---docs-f-2-e-css-syntaxa-16-ceb.f2069804acd1146f0d68.js"],"metadata---docs-f-2-e-css-syntaxfcc-a98":["/metadata---docs-f-2-e-css-syntaxfcc-a98.3b065cb845c0bc9ccc7b.js"],"content---docs-f-2-e-html-index-9-d-1-79a":["/content---docs-f-2-e-html-index-9-d-1-79a.1c08134e6ef07161e79d.js"],"metadata---docs-f-2-e-html-index-24-f-1e4":["/metadata---docs-f-2-e-html-index-24-f-1e4.cf513bb48461c1439d5f.js"],"content---docs-f-2-e-html-meta-0-c-5-579":["/content---docs-f-2-e-html-meta-0-c-5-579.adc116d0333b301f94f6.js"],"metadata---docs-f-2-e-html-metab-46-fe4":["/metadata---docs-f-2-e-html-metab-46-fe4.b13cba3b4fe21bc1a1ee.js"],"content---docs-f-2-e-javascript-asynceb-2-d37":["/content---docs-f-2-e-javascript-asynceb-2-d37.a320a111ec1c7d046154.js"],"metadata---docs-f-2-e-javascript-async-09-f-030":["/metadata---docs-f-2-e-javascript-async-09-f-030.56741ff6908ab67a13c5.js"],"content---docs-f-2-e-javascript-exec-02-c-147":["/content---docs-f-2-e-javascript-exec-02-c-147.4a886ea0477714cc5f7e.js"],"metadata---docs-f-2-e-javascript-exec-1-d-7-4bf":["/metadata---docs-f-2-e-javascript-exec-1-d-7-4bf.52dd61b9bcd271eb1529.js"],"content---docs-f-2-e-javascript-grammer-447-369":["/content---docs-f-2-e-javascript-grammer-447-369.9b5205ea7041db73bf82.js"],"metadata---docs-f-2-e-javascript-grammer-6-df-3af":["/metadata---docs-f-2-e-javascript-grammer-6-df-3af.4cdff4861ccd9b4cc5d7.js"],"content---docs-f-2-e-javascript-modulee-10-ff1":["/content---docs-f-2-e-javascript-modulee-10-ff1.b74d37f34373cb34b5ca.js"],"metadata---docs-f-2-e-javascript-moduleee-6-b43":["/metadata---docs-f-2-e-javascript-moduleee-6-b43.dc51115cd421f4f4e6b1.js"],"content---docs-f-2-e-javascript-oop-3-a-2-e5a":["/content---docs-f-2-e-javascript-oop-3-a-2-e5a.3f8e0face7fe05762663.js"],"metadata---docs-f-2-e-javascript-oopaa-3-9b9":["/metadata---docs-f-2-e-javascript-oopaa-3-9b9.ec075f3b4b0a5c43f6de.js"],"content---docs-f-2-e-javascript-regexp-987-85e":["/content---docs-f-2-e-javascript-regexp-987-85e.6a92a2aeacc2a27a546b.js"],"metadata---docs-f-2-e-javascript-regexp-239-ff9":["/metadata---docs-f-2-e-javascript-regexp-239-ff9.663703b8851674792121.js"],"content---docs-f-2-e-javascript-skill-687-c8f":["/content---docs-f-2-e-javascript-skill-687-c8f.46878024f6c59c39bc7f.js"],"metadata---docs-f-2-e-javascript-skilld-97-3a2":["/metadata---docs-f-2-e-javascript-skilld-97-3a2.077891f7943f90124f56.js"],"content---docs-f-2-e-javascript-type-58-e-e47":["/content---docs-f-2-e-javascript-type-58-e-e47.9dff98a5b84838656ba8.js"],"metadata---docs-f-2-e-javascript-typef-33-dde":["/metadata---docs-f-2-e-javascript-typef-33-dde.2a8d1fb011f069777b0f.js"],"content---docs-f-2-e-monitor-index-391-ad0":["/content---docs-f-2-e-monitor-index-391-ad0.3b084cf323092be615b2.js"],"metadata---docs-f-2-e-monitor-indexa-56-d7f":["/metadata---docs-f-2-e-monitor-indexa-56-d7f.6e372909abf5a84d8055.js"],"content---docs-f-2-e-performance-indexaef-e1d":["/content---docs-f-2-e-performance-indexaef-e1d.9f9d98e5f279384df9c8.js"],"metadata---docs-f-2-e-performance-index-3-de-87c":["/metadata---docs-f-2-e-performance-index-3-de-87c.b4e0832f3fb9502a12d4.js"],"content---docs-f-2-e-react-index-0-cb-3f0":["/content---docs-f-2-e-react-index-0-cb-3f0.b1c8bd948de991d8c878.js"],"metadata---docs-f-2-e-react-indexc-85-6a6":["/metadata---docs-f-2-e-react-indexc-85-6a6.752064b39f95831d17d6.js"],"content---docs-f-2-e-react-native-alert-6-d-1-303":["/content---docs-f-2-e-react-native-alert-6-d-1-303.6405958fedbf92004891.js"],"metadata---docs-f-2-e-react-native-alert-5-f-9-3e3":["/metadata---docs-f-2-e-react-native-alert-5-f-9-3e3.b81738cbf4f225121749.js"],"content---docs-f-2-e-react-native-androide-34-3a4":["/content---docs-f-2-e-react-native-androide-34-3a4.2e75f8418970542bf05c.js"],"metadata---docs-f-2-e-react-native-android-0-b-3-456":["/metadata---docs-f-2-e-react-native-android-0-b-3-456.2d9d2e2092135933dcfa.js"],"content---docs-f-2-e-react-native-bugly-8-d-4-ab2":["/content---docs-f-2-e-react-native-bugly-8-d-4-ab2.50d5bed1de94bb030d65.js"],"metadata---docs-f-2-e-react-native-buglyadb-596":["/metadata---docs-f-2-e-react-native-buglyadb-596.aed2ef86729fe3a06ee8.js"],"content---docs-f-2-e-react-native-camera-597-89d":["/content---docs-f-2-e-react-native-camera-597-89d.d963355c1ddc45d45bbe.js"],"metadata---docs-f-2-e-react-native-camera-27-a-253":["/metadata---docs-f-2-e-react-native-camera-27-a-253.6d114d8ebe2302a3b111.js"],"content---docs-f-2-e-react-native-code-pusha-39-174":["/content---docs-f-2-e-react-native-code-pusha-39-174.200415ea37cca2b09914.js"],"metadata---docs-f-2-e-react-native-code-push-7-b-7-231":["/metadata---docs-f-2-e-react-native-code-push-7-b-7-231.fa6d549c827a0e803208.js"],"content---docs-f-2-e-react-native-deploy-500-e54":["/content---docs-f-2-e-react-native-deploy-500-e54.af711fc0bab6cc3aba04.js"],"metadata---docs-f-2-e-react-native-deploy-4-cf-03c":["/metadata---docs-f-2-e-react-native-deploy-4-cf-03c.72503dc373bbd16358b6.js"],"content---docs-f-2-e-react-native-fetch-756-af5":["/content---docs-f-2-e-react-native-fetch-756-af5.128030799066435da6f8.js"],"metadata---docs-f-2-e-react-native-fetchd-41-27d":["/metadata---docs-f-2-e-react-native-fetchd-41-27d.1fe1b11de973216fe1f7.js"],"content---docs-f-2-e-react-native-gitf-9-e-d83":["/content---docs-f-2-e-react-native-gitf-9-e-d83.96dccba6c0d93c8559b9.js"],"metadata---docs-f-2-e-react-native-git-3-f-0-1e2":["/metadata---docs-f-2-e-react-native-git-3-f-0-1e2.79d80f16548da1b73c7c.js"],"content---docs-f-2-e-react-native-index-889-a61":["/content---docs-f-2-e-react-native-index-889-a61.ef7d6358939d7c8eb2ba.js"],"metadata---docs-f-2-e-react-native-indexb-92-e43":["/metadata---docs-f-2-e-react-native-indexb-92-e43.a2d079b7077bacf7e3cb.js"],"content---docs-f-2-e-react-native-issue-0-f-6-864":["/content---docs-f-2-e-react-native-issue-0-f-6-864.87f3e9be5e9ce37d9f38.js"],"metadata---docs-f-2-e-react-native-issue-214-5cd":["/metadata---docs-f-2-e-react-native-issue-214-5cd.ba5fd0beb91f6bae755c.js"],"content---docs-f-2-e-react-native-loading-84-c-73a":["/content---docs-f-2-e-react-native-loading-84-c-73a.331e4e4aa4657a473184.js"],"metadata---docs-f-2-e-react-native-loadingf-98-f5d":["/metadata---docs-f-2-e-react-native-loadingf-98-f5d.49245da3815fc4956fbb.js"],"content---docs-f-2-e-react-native-react-native-videoc-1-d-e43":["/content---docs-f-2-e-react-native-react-native-videoc-1-d-e43.779817b18074cade6ded.js"],"metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa":["/metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa.228e3243f675f8560548.js"],"content---docs-f-2-e-react-native-save-to-camera-693-68d":["/content---docs-f-2-e-react-native-save-to-camera-693-68d.69c033d36639e399490f.js"],"metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735":["/metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735.5846a9050ffc0ddd1be2.js"],"content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b":["/content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b.663bbd80d5b7bdfeb9cd.js"],"metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a":["/metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a.90b0697ae69e43f561bf.js"],"content---docs-f-2-e-react-native-size-5-b-4-c24":["/content---docs-f-2-e-react-native-size-5-b-4-c24.3e5b4f91f129047d5e52.js"],"metadata---docs-f-2-e-react-native-sizefa-9-e54":["/metadata---docs-f-2-e-react-native-sizefa-9-e54.e0b04e837be8c6c1350c.js"],"content---docs-f-2-e-react-native-source-877-2ea":["/content---docs-f-2-e-react-native-source-877-2ea.a3d14bdb02186522c4af.js"],"metadata---docs-f-2-e-react-native-source-9-b-5-f09":["/metadata---docs-f-2-e-react-native-source-9-b-5-f09.bc162cf4fe4a9a923b63.js"],"content---docs-f-2-e-react-native-tech-226-30f":["/content---docs-f-2-e-react-native-tech-226-30f.bf7e76713f63093f28e2.js"],"metadata---docs-f-2-e-react-native-techbca-407":["/metadata---docs-f-2-e-react-native-techbca-407.91c7a016b9c10b534af5.js"],"content---docs-f-2-e-react-native-update-rn-93-f-50e":["/content---docs-f-2-e-react-native-update-rn-93-f-50e.da9bf81872b03dfb3a98.js"],"metadata---docs-f-2-e-react-native-update-rn-323-92d":["/metadata---docs-f-2-e-react-native-update-rn-323-92d.16a09ac6d88770a8dbe4.js"],"content---docs-f-2-e-react-native-waterfall-629-6ad":["/content---docs-f-2-e-react-native-waterfall-629-6ad.5a675423f8a532364f29.js"],"metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37":["/metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37.5299aed6bef466732545.js"],"content---docs-f-2-e-react-native-wechate-7-f-088":["/content---docs-f-2-e-react-native-wechate-7-f-088.fae24990ea248b181bc8.js"],"metadata---docs-f-2-e-react-native-wechate-47-3f8":["/metadata---docs-f-2-e-react-native-wechate-47-3f8.e35915206a1a6e20face.js"],"content---docs-f-2-e-safe-index-165-7db":["/content---docs-f-2-e-safe-index-165-7db.5f15883c09b14e44375f.js"],"metadata---docs-f-2-e-safe-index-647-b0c":["/metadata---docs-f-2-e-safe-index-647-b0c.4a4e79025ff195d3742b.js"],"content---docs-f-2-e-test-jestfc-3-df1":["/content---docs-f-2-e-test-jestfc-3-df1.35d24545862beae38e03.js"],"metadata---docs-f-2-e-test-jestda-3-2d2":["/metadata---docs-f-2-e-test-jestda-3-2d2.8426f429f255497b2b8e.js"],"content---docs-f-2-e-test-index-1-ae-bf1":["/content---docs-f-2-e-test-index-1-ae-bf1.378dd107b05a2b945cac.js"],"metadata---docs-f-2-e-test-index-47-d-1a6":["/metadata---docs-f-2-e-test-index-47-d-1a6.a0ae5e81d242a9dd9540.js"],"content---docs-f-2-e-vue-index-02-b-a5c":["/content---docs-f-2-e-vue-index-02-b-a5c.10c0324db009789e274d.js"],"metadata---docs-f-2-e-vue-indexefd-70b":["/metadata---docs-f-2-e-vue-indexefd-70b.035f27f18db5467a506b.js"],"content---docs-f-2-e-vue-origind-8-a-797":["/content---docs-f-2-e-vue-origind-8-a-797.928f989978daec7b2b36.js"],"metadata---docs-f-2-e-vue-origin-587-f6e":["/metadata---docs-f-2-e-vue-origin-587-f6e.cf2fd592ea1057b26456.js"],"content---docs-f-2-e-vue-zf-6-bb-fd6":["/content---docs-f-2-e-vue-zf-6-bb-fd6.6c57cc00c629f2d42990.js"],"metadata---docs-f-2-e-vue-zf-258-73c":["/metadata---docs-f-2-e-vue-zf-258-73c.98cfce98d74fc57bbbf8.js"],"content---docs-source-jquery-event-088-dda":["/content---docs-source-jquery-event-088-dda.e2a85135563e574edd2f.js"],"metadata---docs-source-jquery-event-095-2e1":["/metadata---docs-source-jquery-event-095-2e1.64533c3713aa2b593ab9.js"],"content---docs-f-2-e-webpack-basic-indexb-92-061":["/content---docs-f-2-e-webpack-basic-indexb-92-061.c0fa0c09cfb4d898950e.js"],"metadata---docs-f-2-e-webpack-basic-indexe-25-12c":["/metadata---docs-f-2-e-webpack-basic-indexe-25-12c.5da8c5c0922844f9d267.js"],"content---docs-f-2-e-webpack-principle-indexab-1-27c":["/content---docs-f-2-e-webpack-principle-indexab-1-27c.8cb3feace779a1c1a893.js"],"metadata---docs-f-2-e-webpack-principle-index-6-fa-123":["/metadata---docs-f-2-e-webpack-principle-index-6-fa-123.d65e98fd5630e87260f2.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.7462f23248c264ac2737.js"],"metadata---blog-tags-translate-53-c-1f3":["/metadata---blog-tags-translate-53-c-1f3.218d85620ea8b6dd3a82.js"],"metadata---blog-tags-thinkd-55-455":["/metadata---blog-tags-thinkd-55-455.8cea668a9f00be4879fb.js"],"metadata---blog-tags-house-375-d32":["/metadata---blog-tags-house-375-d32.91c9affa7d7ebc855756.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.dc3ac8dc47d3ba96bcaa.js"],"tags---blog-tagse-51-a7c":["/tags---blog-tagse-51-a7c.1991779bca2a09d38abb.js"]};/*]]>*/</script>

<title data-react-helmet="true">JavaScript 执行机制</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="JavaScript 执行机制"/><meta data-react-helmet="true" name="description" content="## 宏任务和微任务"/><meta data-react-helmet="true" property="og:description" content="## 宏任务和微任务"/><meta data-react-helmet="true" property="og:url" content="https://www.banli17.com/docs/f2e/javascript/exec"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.d719e73e126f22665d27.css" />

<link rel="stylesheet" type="text/css" href="/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/2.76ced7e22babc8d30c3a.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-page-9-e-7-ca5.f43a35144d87a5017ffc.css" />

<link rel="stylesheet" type="text/css" href="/3.76fc2d47232fd1193413.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a><a class="navbar__item navbar__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a><a class="navbar__item navbar__link" label="服务端" position="left" href="/docs/linux/index">服务端</a><a class="navbar__item navbar__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a><a class="navbar__item navbar__link" label="经验集" position="left" href="/docs/other/mac">经验集</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="博客" position="right" href="/blog">博客</a><a class="navbar__item navbar__link" label="关于" position="right" href="/docs/about">关于</a><a class="navbar__item navbar__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a></li><li class="menu__list-item"><a class="menu__link" label="服务端" position="left" href="/docs/linux/index">服务端</a></li><li class="menu__list-item"><a class="menu__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a></li><li class="menu__list-item"><a class="menu__link" label="经验集" position="left" href="/docs/other/mac">经验集</a></li><li class="menu__list-item"><a class="menu__link" label="博客" position="right" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" label="关于" position="right" href="/docs/about">关于</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_135b"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_3BXC" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Html</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/html/index">HTML</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/html/meta">元信息类标签</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Css</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/index">css基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/syntax">语法</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/selector">选择器</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/layout">css 布局</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/animation">css 动画</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/code">常用 css 代码</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Javascript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/grammer">语法</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/type">数据类型</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/oop">面向对象</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/module">模块化编程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/async">异步编程</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/f2e/javascript/exec">执行机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/regexp">正则表达式</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/skill">高级技巧</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">浏览器原理与API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/dom">DOM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/work">浏览器工作原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/event">事件机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/fetch">网络请求与表单</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/storage">浏览器存储</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/devtool">Chrome 开发者工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/cache">浏览器缓存机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/v8">V8 引擎原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/canvas">Canvas</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">其它</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/monitor/index">前端监控</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/performance/index">建立性能体系</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/test/index">前端测试与jest</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/safe/index">web 安全</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/basic/index">webpack (1): 官方文档总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/principle/index">webpack (2): 原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/react/index">React 知识点总结</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">vue</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/index">知识点总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/origin">原理分析</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_1VCq"><header><h1 class="margin-bottom--lg">JavaScript 执行机制</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="宏任务和微任务"></a><a aria-hidden="true" class="hash-link" href="#宏任务和微任务">#</a>宏任务和微任务</h2><h3><a aria-hidden="true" class="anchor" id="简介"></a><a aria-hidden="true" class="hash-link" href="#简介">#</a>简介</h3><p>JavaScript 的执行过程是：</p><ol><li>宿主(浏览器或node)将 JS 代码交给 JS 引擎，让它执行。</li><li>JS 引擎执行时，遇到如 setTimeout 之类的浏览器 API，会通知浏览器执行定时任务。然后 JS 引擎继续执行代码。</li><li>浏览器定时到了之后，再通知 JS 引擎，JS 引擎开始执行定时器中的函数。</li><li>ES6 引入了 Promise 后，JS 引擎会自己发起任务，不需要再让浏览器安排。</li></ol><p>宿主发起的任务叫做宏任务，JS 引擎自己发起的任务叫做微任务(microtask)。</p><p>其中宏任务和微任务分别有：</p><ul><li>宏任务 macro-task(task)：Event、setTimeout、setInterval、setImmediate(ie)、I/O、UI rendering、MessageChannel。</li><li>微任务 micro-task(jobs)：process.nextTick、Promise、MutationObserver、Object.observer(已废弃)。</li></ul><h3><a aria-hidden="true" class="anchor" id="为什么有微任务"></a><a aria-hidden="true" class="hash-link" href="#为什么有微任务">#</a>为什么有微任务</h3><p>其实宏任务对于我们开发就够了，为什么还要有微任务呢？</p><p>根据 HTML 标准，在每个宏任务运行完以后，UI 都会重新渲染，那么在微中就完成数据更新，因此当前宏任务结束就可以得到最新的 UI了。反之，如果新建一个宏任务来做数据更新的话，那么渲染会执行两次。查看<a href="https://www.zhihu.com/question/55364497/answer/144215284">更多</a>。</p><p>那么宏任务和微任务有哪些呢？</p><h3><a aria-hidden="true" class="anchor" id="执行过程"></a><a aria-hidden="true" class="hash-link" href="#执行过程">#</a>执行过程</h3><p>JS 引擎等待浏览器分配宏任务，在操作系统中，通常等待的行为都是一个事件循环。</p><p>底层的 C/C++ 代码简化如下：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">while(TRUE){</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    r = wait();</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    execute(r);</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>整个循环就是反复等待-执行的过程。等待就是等宿主发起的宏任务。这里每次执行的过程，就是一个宏任务，可以这样理解：宏任务队列就是事件循环。</p><p>而微任务是在宏任务里面的，在宏任务中，JS 的 Promise 也会产生异步代码，JS 必须保证这些异步代码在一个宏任务中执行，所以每个宏任务中又包含一个微任务队列。如下图所示。</p><p><img src="/img/js/eventloop-1.jpg"/></p><p>接下来，来看一个例子理解:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;a&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;d&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;c&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码，执行流程如下：</p><ol><li>浏览器将代码交给 JS 引擎，执行任务。这是一个宏任务。var r = new Promise() 会立即执行(注意 Promise 的 then 才是异步的)，打印输出 a。</li><li>执行过程中，遇到 setTimeout，让浏览器去执行定时(即倒数秒)，定时到后，就是下一个宏任务。</li><li>执行到 then，这是一个 Promise 微任务。放到微任务队列里。</li><li>执行 console.log(&quot;b&quot;)，输出 b。</li><li>执行宏任务里的微任务，即第 3 步的任务，打印出 c。</li><li>执行下一个宏任务，即第 2 步的 setTimeout 任务，打印出 d。</li></ol><p>最终结果为: a、b、c、d。画个图如下：</p><p><img src="/img/js/eventloop-2.jpg"/></p><h2><a aria-hidden="true" class="anchor" id="执行上下文"></a><a aria-hidden="true" class="hash-link" href="#执行上下文">#</a>执行上下文</h2><p>JS 标准把一段代码，执行所需的所有信息定义为执行上下文。它包括：</p><ul><li>lexical environment: 词法环境，当获取变量或者 this 值时使用。</li><li>variable environment: 变量环境，当声明变量时使用。</li><li>code evaluation state: 用户恢复代码执行位置。</li><li>Function: 执行任务是函数时使用，表示正在被执行的函数。</li><li>ScriptOrModule: 执行任务是脚本或模块时使用，表示正在执行的代码。</li><li>Realm: 使用的基础库和内置对象实例。</li><li>Generator: 仅生成器上下文有这个属性，表示当前生成器。</li></ul><h2><a aria-hidden="true" class="anchor" id="闭包"></a><a aria-hidden="true" class="hash-link" href="#闭包">#</a>闭包</h2><p>闭包就是处于执行环境中的函数。它包含两部分：</p><ul><li>环境部分<ul><li>环境：函数的词法环境(执行上下文的一部分)</li><li>标识符列表：函数中用到的未声明的变量</li></ul></li><li>表达式部分: 函数体</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">function A() {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  let a = 1</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  window.B = function () {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      console.log(a)</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  }</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">A()</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">B() // 1</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><blockquote><p>面试题，循环中使用闭包解决 <code>var</code> 定义函数的问题</p></blockquote><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码中，setTimeout 的函数 timer 会在 for 循环执行完后再执行。这时 i 已经是 6 了。所以全部输出 6。</p><p>解决方法有：
1. 使用 let (推荐)
2. 使用闭包</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ol start="3"><li>使用 setTimeout 的第三个参数，它会当作 timer 函数的参数传入。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="函数"></a><a aria-hidden="true" class="hash-link" href="#函数">#</a>函数</h2><h3><a aria-hidden="true" class="anchor" id="函数种类"></a><a aria-hidden="true" class="hash-link" href="#函数种类">#</a>函数种类</h3><ul><li>普通函数</li><li>箭头函数</li><li>方法，class 中定义的函数</li><li>生成器函数 function *</li><li>类，class 也是函数</li><li>异步函数：async + 普通函数/箭头函数/生成器函数</li></ul><h3><a aria-hidden="true" class="anchor" id="this"></a><a aria-hidden="true" class="hash-link" href="#this">#</a>this</h3><p>this 是 JavaScript 的一个关键字，它的使用方法类似一个变量。</p><p>一句话总结 this：调用函数时使用的引用，决定了函数执行时的 this 值。</p><p>JavaScript 用一个栈来管理执行上下文，这个栈的每一项又包含一个链表，指向上层的执行上下文。</p><p><img src="/img/js/exec-this.jpg"/></p><p>JavaScript 标准中规定了，函数有个私有属性<code>[[Environment]]</code>，用来保存定义时上下文。</p><p>当函数运行时，会创建一条新的执行环境记录，记录的外层词法环境(outer lexical environment)会被设置为函数的<code>[[Environment]]</code>，这个动作就是切换上下文。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">在别处定义了 foo：</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// error</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>函数执行时能访问定义时的上下文，但是不能访问执行时上下文。</p><p>JavaScript 标准定义了<code>[[thisMode]]</code>私有属性，它有三个取值：</p><ul><li>lexical: 表示上下文中找 this，这对应箭头函数。</li><li>global: 表示当 this 为 undefined 时，取全局对象，这对应普通函数。</li><li>strict: 表示严格模式下，this 严格按照调用时传入的值，可能时 null 或 undefined。对应严格模式和 class。</li></ul><p>函数创建新的执行上下文的词法环境记录时，会根据<code>[[thisMode]]</code>来标记新记录的<code>[[ThisBindingStatus]]</code>私有属性，代码执行遇到 this 时，会逐层检查当前词法环境记录中的<code>[[ThisBindingStatus]]</code>，当找到有 this 的环境记录时获取 this 的值。</p><p>箭头函数执行时，它的<code>[[thisMode]]</code>是lexical，<code>[[ThisBindingStatus]]</code>标记为lexical。遇到 this 时，就会到上下文中找 this。</p><h3><a aria-hidden="true" class="anchor" id="操作-this-的内置函数"></a><a aria-hidden="true" class="hash-link" href="#操作-this-的内置函数">#</a>操作 this 的内置函数</h3><p>call、apply 及 bind 可以用来修改 this 指向。它们用于箭头函数、class 也不会报错，只是无法修改 this，而只能传参。</p><p>下面来看看 call、apply 及 bind 函数内部实现。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">call</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">call</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string string" style="color:rgb(173, 219, 103)">`Error`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 如果 context 是基本类型，需要是对象才能挂载 .fn 属性</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 下面最好用 Symbol，因为如果原对象可能有fn属性，这样会被覆盖掉</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 谁调用，this 就是谁</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">delete</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">apply</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">apply</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 处理参数和 call 有区别</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">delete</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bind</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bind</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">context</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 139)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>要注意 myBind 返回一个函数，可以通过普通方式和 new 调用。</p><p>call 的性能要比 apply 好，具体可以看<a href="https://github.com/noneven/__/issues/6">call和apply的性能对比</a>。</p><h3><a aria-hidden="true" class="anchor" id="总结-this"></a><a aria-hidden="true" class="hash-link" href="#总结-this">#</a>总结 this</h3><p>this 指向总结：</p><ol><li>new 调用，指向新创建的对象。</li><li>call、apply、bind 绑定到指定对象。</li><li>上下文对象调用，绑定到上下文对象。</li><li>默认，严格模式下绑定到 undefined，否则绑定到全局对象。</li><li>箭头函数没有 this，会往上找。</li></ol><h2><a aria-hidden="true" class="anchor" id="语句执行"></a><a aria-hidden="true" class="hash-link" href="#语句执行">#</a>语句执行</h2><p>JavaScript 语句时，涉及到 Completion Record 类型，它标示着语句执行的完成状态。</p><p>Completion Record 表示一个语句执行完之后的结果，它有三个字段：</p><ul><li><code>[[type]]</code>: 表示完成的类型，有 break、continue、return、throw、normal 几种类型。</li><li><code>[[value]]</code>: 表示语句的返回值，如果没有，则是 empty。</li><li><code>[[target]]</code>: 表示语句的目标，通常是一个 JavaScript 标签。</li></ul><p>语句的分类</p><p><img src="/img/js/exec-statement.jpg"/></p><h3><a aria-hidden="true" class="anchor" id="普通语句"></a><a aria-hidden="true" class="hash-link" href="#普通语句">#</a>普通语句</h3><p>普通语句执行完成后，会得到<code>[[type]]: normal</code>的 Completion Record。JS 引擎会继续执行下一条语句。</p><p>这些语句中，只有表达式语句会产生<code>[[value]]</code>，Chrome控制台显示的就是 Completion Record 的<code>[[value]]</code>。</p><p><img src="/img/js/exec-completion-record.jpg"/></p><p>上面显示，声明语句的 Completion Record 的<code>[[value]]</code>为 undefined，而表达式语句有值。</p><h3><a aria-hidden="true" class="anchor" id="语句块"></a><a aria-hidden="true" class="hash-link" href="#语句块">#</a>语句块</h3><p>如果 Completion Record 的<code>[[type]]</code>不是 normal，会打断语句块中后续语句执行。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">{</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  console.log(1)</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  return </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  console.log(2)  // 不执行</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="控制型语句"></a><a aria-hidden="true" class="hash-link" href="#控制型语句">#</a>控制型语句</h3><p>控制型语句分为：</p><ul><li>对内造成影响：if switch while/for try</li><li>对外造成影响：break continue return throw</li></ul><p><img src="/img/js/exec-control.jpg"/></p><p>上面穿透后，会向上找消费者。</p><p>所以 try...catch...finally 语句。try 里的 return 完成后，还是会走 finally，而且 finally 里的 return 能覆盖 try 里的 return。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">finally</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">   </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 最终返回 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="带标签语句"></a><a aria-hidden="true" class="hash-link" href="#带标签语句">#</a>带标签语句</h3><p>任何语句前面都可以加标签<code>xx:</code>。主要作用是跳出多层循环。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">outer: while(true) {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  inner: while(true) {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      break outer;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  }</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">console.log(&quot;finished&quot;)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>break/continue 语句后面跟了关键字，会产生带 target 的 Completion Record。</p><h2><a aria-hidden="true" class="anchor" id="参考资料"></a><a aria-hidden="true" class="hash-link" href="#参考资料">#</a>参考资料</h2><ul><li>重学前端</li></ul></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/f2e/javascript/async"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->javascript 异步编程</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/f2e/javascript/regexp"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">正则表达式之理论与实战<!-- --> »</h4></a></div></nav><div id="gitalk-container"></div></div></div></div><div class="col col--3"><div class="tableOfContents_1X5y"><ul class="contents contents__left-border"><li><a href="#宏任务和微任务" class="contents__link">宏任务和微任务</a><ul class=""><li><a href="#简介" class="contents__link">简介</a></li><li><a href="#为什么有微任务" class="contents__link">为什么有微任务</a></li><li><a href="#执行过程" class="contents__link">执行过程</a></li></ul></li><li><a href="#执行上下文" class="contents__link">执行上下文</a></li><li><a href="#闭包" class="contents__link">闭包</a></li><li><a href="#函数" class="contents__link">函数</a><ul class=""><li><a href="#函数种类" class="contents__link">函数种类</a></li><li><a href="#this" class="contents__link">this</a></li><li><a href="#操作-this-的内置函数" class="contents__link">操作 this 的内置函数</a></li><li><a href="#总结-this" class="contents__link">总结 this</a></li></ul></li><li><a href="#语句执行" class="contents__link">语句执行</a><ul class=""><li><a href="#普通语句" class="contents__link">普通语句</a></li><li><a href="#语句块" class="contents__link">语句块</a></li><li><a href="#控制型语句" class="contents__link">控制型语句</a></li><li><a href="#带标签语句" class="contents__link">带标签语句</a></li></ul></li><li><a href="#参考资料" class="contents__link">参考资料</a></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/runtime~main.ea5e6dffd8848bf9ef6e.js"></script>

<script type="text/javascript" src="/main.d0f0be10cc33c5c9fabf.js"></script>

<script type="text/javascript" src="/0.ed3bfaf860abbeb0b2e4.js"></script>

<script type="text/javascript" src="/1.2ec3216fdba0155e83d0.js"></script>

<script type="text/javascript" src="/2.9de4aef3c15cd39864bc.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-page-9-e-7-ca5.8ab89649a3236e6915b2.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-9-a-9-239.dc324927921ceb5535e8.js"></script>

<script type="text/javascript" src="/3.68a16516b0d3ad410a82.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-item-031-769.401ad738f669ab84366d.js"></script>

<script type="text/javascript" src="/content---docs-f-2-e-javascript-exec-02-c-147.4a886ea0477714cc5f7e.js"></script>

<script type="text/javascript" src="/metadata---docs-f-2-e-javascript-exec-1-d-7-4bf.52dd61b9bcd271eb1529.js"></script>

</body>
</html>