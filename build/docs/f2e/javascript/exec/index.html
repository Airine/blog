<!DOCTYPE html>
<html lang=&#34;en&#34; data-theme=&#34;&#34;>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.d719e73e126f22665d27.css","/main.ddb0be86a33fa9788cae.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.7f8bb42332d3fb863b06.js"],"component---theme-blog-post-pageccc-cab":["/component---theme-blog-post-pageccc-cab.e7437dce70974470b19b.js"],"content---blog-2019-08-12-think-house-362-b31":["/content---blog-2019-08-12-think-house-362-b31.32b9b658389b9b9c8b06.js"],"metadata---blog-2019-08-12-think-house-3-b-6-904":["/metadata---blog-2019-08-12-think-house-3-b-6-904.27fb7a015afe75c4c831.js"],"nextItem---blog-2019-08-12-think-housefda-8d6":["/nextItem---blog-2019-08-12-think-housefda-8d6.b8905595ee20b2ee766c.js"],"content---blog-2018-07-05-browser-workae-5-385":["/content---blog-2018-07-05-browser-workae-5-385.0dd26c95362b817c743a.js"],"component---theme-blog-list-pagea-6-a-7ba":["/component---theme-blog-list-pagea-6-a-7ba.4df92299a978b5450a84.js"],"content---bloga-55-f4d":["/content---bloga-55-f4d.48ba1c276dca883ac7d9.js"],"content---blog-028-9eb":["/content---blog-028-9eb.4067131213dc3be4cb72.js"],"metadata---blog-92-a-15c":["/metadata---blog-92-a-15c.cf26df01d4d0051ba6e6.js"],"component---theme-doc-legacy-page-9-e-7-ca5":["/component---theme-doc-legacy-page-9-e-7-ca5.f43a35144d87a5017ffc.css","/component---theme-doc-legacy-page-9-e-7-ca5.1a19b16b46c54bedcbb2.js"],"docsMetadata---docs-9-a-9-239":["/docsMetadata---docs-9-a-9-239.73bad6bb3e4908795f1c.js"],"component---theme-doc-legacy-item-031-769":["/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css","/component---theme-doc-legacy-item-031-769.9fb8a2eff3940da426d2.js"],"content---docs-about-3-d-8-538":["/content---docs-about-3-d-8-538.2ae2ffb9721a90acd3a8.js"],"metadata---docs-about-443-9ff":["/metadata---docs-about-443-9ff.ae21ab66ba2d92027e7c.js"],"content---docs-algo-linked-list-7-fe-ad2":["/content---docs-algo-linked-list-7-fe-ad2.d32f3c6fbcfe5479aca6.js"],"metadata---docs-algo-linked-list-969-438":["/metadata---docs-algo-linked-list-969-438.52742c7a3ecb6fbe2671.js"],"content---docs-algo-hash-table-818-672":["/content---docs-algo-hash-table-818-672.71e322e51fbf4e3bd0b0.js"],"metadata---docs-algo-hash-tableee-4-aa7":["/metadata---docs-algo-hash-tableee-4-aa7.7356e8fe75a933d415a6.js"],"content---docs-algo-indexb-4-f-54a":["/content---docs-algo-indexb-4-f-54a.c3b888f04a74bd010a4e.js"],"metadata---docs-algo-index-812-55b":["/metadata---docs-algo-index-812-55b.57bc466a87cc8792379f.js"],"content---docs-algo-sortfee-000":["/content---docs-algo-sortfee-000.6fb994efa528cec9e600.js"],"metadata---docs-algo-sort-457-08b":["/metadata---docs-algo-sort-457-08b.c7343292e13111f1af4a.js"],"content---docs-database-mongo-2-c-4-a31":["/content---docs-database-mongo-2-c-4-a31.93ea71c31964bc2bb109.js"],"metadata---docs-database-mongo-0-c-2-f76":["/metadata---docs-database-mongo-0-c-2-f76.9d09ae8f8b957268025c.js"],"content---docs-base-compute-combinef-7-f-933":["/content---docs-base-compute-combinef-7-f-933.bcbf5350bea9c480b313.js"],"metadata---docs-base-compute-combine-480-a12":["/metadata---docs-base-compute-combine-480-a12.b863dd947f1d788a208b.js"],"content---docs-demo-index-648-2ab":["/content---docs-demo-index-648-2ab.b42ab3b42320719dee6d.js"],"metadata---docs-demo-indexa-04-089":["/metadata---docs-demo-indexa-04-089.37d6713774af388b1be9.js"],"content---docs-database-mysql-561-697":["/content---docs-database-mysql-561-697.c2d3d0b76767cddfab8a.js"],"metadata---docs-database-mysql-2-f-1-3e5":["/metadata---docs-database-mysql-2-f-1-3e5.e44a970092f5b9da1b21.js"],"content---docs-database-redise-5-d-9ae":["/content---docs-database-redise-5-d-9ae.95bde00d36ef8ecf36a3.js"],"metadata---docs-database-redis-4-a-0-66e":["/metadata---docs-database-redis-4-a-0-66e.fca3ae598544aecdd24a.js"],"content---docs-base-h-5586-54d":["/content---docs-base-h-5586-54d.3066d4ab71500d27a45e.js"],"metadata---docs-base-h-515-a-1cb":["/metadata---docs-base-h-515-a-1cb.b22f8542b0778e3a2081.js"],"content---docs-demo-print-vcardabc-7b4":["/content---docs-demo-print-vcardabc-7b4.a19f722ac47908da35d2.js"],"metadata---docs-demo-print-vcard-88-d-6c7":["/metadata---docs-demo-print-vcard-88-d-6c7.52d1915a4e7c68af9dd4.js"],"content---docs-demo-web-component-35-a-a72":["/content---docs-demo-web-component-35-a-a72.38ceb5c09020df5fa96a.js"],"metadata---docs-demo-web-component-8-fd-db4":["/metadata---docs-demo-web-component-8-fd-db4.489375ce800111b233ed.js"],"content---docs-linux-fileec-1-765":["/content---docs-linux-fileec-1-765.d69edd068b6363b72e74.js"],"metadata---docs-linux-file-65-c-c93":["/metadata---docs-linux-file-65-c-c93.319a9227df2ebd0a5ab4.js"],"content---docs-linux-soft-422-6cf":["/content---docs-linux-soft-422-6cf.b5ca3e4b4324b47ad5d7.js"],"metadata---docs-linux-softe-01-10b":["/metadata---docs-linux-softe-01-10b.ee17d6b5008216f22aeb.js"],"content---docs-linux-service-49-b-272":["/content---docs-linux-service-49-b-272.ac3e4762bee0f80db257.js"],"metadata---docs-linux-serviceac-8-d7f":["/metadata---docs-linux-serviceac-8-d7f.71aba5933e3283a6b732.js"],"content---docs-linux-indexcb-8-9a7":["/content---docs-linux-indexcb-8-9a7.dad9524dc1a40f102a22.js"],"metadata---docs-linux-index-73-e-38c":["/metadata---docs-linux-index-73-e-38c.c5ca4cb15b8bd1b2feea.js"],"content---docs-nodejs-async-7-f-4-0af":["/content---docs-nodejs-async-7-f-4-0af.b2a50f01e3317c63b16f.js"],"metadata---docs-nodejs-asyncc-40-22b":["/metadata---docs-nodejs-asyncc-40-22b.86c7c9922cf0e897b5b7.js"],"content---docs-nodejs-npm-792-f52":["/content---docs-nodejs-npm-792-f52.652dc798765e3be0ef62.js"],"metadata---docs-nodejs-npm-9-e-0-1d7":["/metadata---docs-nodejs-npm-9-e-0-1d7.65ecde6d13978c172b7a.js"],"content---docs-f-2-e-interview-139-569":["/content---docs-f-2-e-interview-139-569.0e7d69b6628edd2b221b.js"],"metadata---docs-f-2-e-interviewa-19-bd4":["/metadata---docs-f-2-e-interviewa-19-bd4.a39641e567d59f731524.js"],"content---docs-nodejs-safee-0-a-532":["/content---docs-nodejs-safee-0-a-532.392ca15d684630413023.js"],"metadata---docs-nodejs-safe-287-46f":["/metadata---docs-nodejs-safe-287-46f.f966bb9f5c32a7c40272.js"],"content---docs-nodejs-utild-25-062":["/content---docs-nodejs-utild-25-062.7b72a231d9d3bf452d0b.js"],"metadata---docs-nodejs-util-0-fd-711":["/metadata---docs-nodejs-util-0-fd-711.d86b64f3edc967288b71.js"],"content---docs-nginx-index-16-d-468":["/content---docs-nginx-index-16-d-468.047dbfd994ec63588b07.js"],"metadata---docs-nginx-index-4-a-2-2e4":["/metadata---docs-nginx-index-4-a-2-2e4.92ac6d090d4ea3cdf83e.js"],"content---docs-nodejs-testaf-7-5fa":["/content---docs-nodejs-testaf-7-5fa.524c80ad2b4679c89bbb.js"],"metadata---docs-nodejs-testbf-0-08d":["/metadata---docs-nodejs-testbf-0-08d.150bae86fe2bf9023eeb.js"],"content---docs-other-form-5-ae-4a3":["/content---docs-other-form-5-ae-4a3.698536d49a7fcf9ad680.js"],"metadata---docs-other-form-6-eb-90c":["/metadata---docs-other-form-6-eb-90c.7ecf81ead0aa46f07e04.js"],"content---docs-other-blogaab-295":["/content---docs-other-blogaab-295.65406299d515d4712dd6.js"],"metadata---docs-other-blogc-8-f-558":["/metadata---docs-other-blogc-8-f-558.9f1b6fb28132488c92eb.js"],"content---docs-other-printcdf-579":["/content---docs-other-printcdf-579.09d16eb493ea39902199.js"],"metadata---docs-other-print-159-cfd":["/metadata---docs-other-print-159-cfd.2466e72301337d98128c.js"],"content---docs-other-kindle-rss-789-941":["/content---docs-other-kindle-rss-789-941.f83870b61369362e71b0.js"],"metadata---docs-other-kindle-rssb-06-572":["/metadata---docs-other-kindle-rssb-06-572.42a0a65548997e4a5e30.js"],"content---docs-other-maced-3-b03":["/content---docs-other-maced-3-b03.21fb4bd0ce30564a7959.js"],"metadata---docs-other-macc-8-c-bc8":["/metadata---docs-other-macc-8-c-bc8.c0342e4346370f9628b2.js"],"content---docs-other-resourceea-2-ecf":["/content---docs-other-resourceea-2-ecf.dcc56958296b4d8d1fd2.js"],"metadata---docs-other-resource-348-7b5":["/metadata---docs-other-resource-348-7b5.5c966cf5a6bfacdc32dd.js"],"content---docs-other-waterfall-7-a-8-45a":["/content---docs-other-waterfall-7-a-8-45a.0a5a8b4b196f4acde400.js"],"metadata---docs-other-waterfall-2-d-6-105":["/metadata---docs-other-waterfall-2-d-6-105.7906bc33f742e0ecce0f.js"],"content---docs-patterns-action-61-d-c76":["/content---docs-patterns-action-61-d-c76.66955fff22dfe0d6dd78.js"],"metadata---docs-patterns-action-124-4bd":["/metadata---docs-patterns-action-124-4bd.b02799030edab8b2794b.js"],"content---docs-patterns-adapter-555-7ec":["/content---docs-patterns-adapter-555-7ec.fb1733a71da1a8795eea.js"],"metadata---docs-patterns-adapter-464-f76":["/metadata---docs-patterns-adapter-464-f76.749d3438c1c3f030915b.js"],"content---docs-patterns-bridge-335-1e9":["/content---docs-patterns-bridge-335-1e9.c7b8f1b0564e7f8b3c70.js"],"metadata---docs-patterns-bridgefbb-495":["/metadata---docs-patterns-bridgefbb-495.8548301fa40fe61bff17.js"],"content---docs-patterns-builder-5-e-5-e3a":["/content---docs-patterns-builder-5-e-5-e3a.c3188052dd5f81d2e87f.js"],"metadata---docs-patterns-builderead-d21":["/metadata---docs-patterns-builderead-d21.63d9cdaad410da697652.js"],"content---docs-patterns-decorator-944-f6d":["/content---docs-patterns-decorator-944-f6d.b365a5adb3686fed5d6b.js"],"metadata---docs-patterns-decorator-142-9e2":["/metadata---docs-patterns-decorator-142-9e2.8b2fe37127abf45a2d63.js"],"content---docs-patterns-composite-33-e-80d":["/content---docs-patterns-composite-33-e-80d.a451a72b12eab1b0a181.js"],"metadata---docs-patterns-composite-238-38a":["/metadata---docs-patterns-composite-238-38a.947e5dc9953f81bf35e2.js"],"content---docs-patterns-facade-4-ef-b2f":["/content---docs-patterns-facade-4-ef-b2f.97c4c4bb974fdd680842.js"],"metadata---docs-patterns-facade-7-a-8-297":["/metadata---docs-patterns-facade-7-a-8-297.139d123913be958e8552.js"],"content---docs-patterns-chain-of-responsibility-579-dfa":["/content---docs-patterns-chain-of-responsibility-579-dfa.009ac1488f79c6ae1c8e.js"],"metadata---docs-patterns-chain-of-responsibility-014-8a0":["/metadata---docs-patterns-chain-of-responsibility-014-8a0.b12dda8f64ca126546ff.js"],"content---docs-patterns-commande-85-4af":["/content---docs-patterns-commande-85-4af.dbe7613a5236adab0a6a.js"],"metadata---docs-patterns-command-80-a-50e":["/metadata---docs-patterns-command-80-a-50e.c06bd40d5babc29b4f86.js"],"content---docs-patterns-flyweighte-43-831":["/content---docs-patterns-flyweighte-43-831.690a8480fa1e6b6c139d.js"],"metadata---docs-patterns-flyweightaba-d18":["/metadata---docs-patterns-flyweightaba-d18.d806abca799d4da57d7b.js"],"content---docs-patterns-index-90-d-78a":["/content---docs-patterns-index-90-d-78a.2fe1dded972f003c6b43.js"],"metadata---docs-patterns-index-63-b-9e3":["/metadata---docs-patterns-index-63-b-9e3.3165868fb75b65c5829b.js"],"content---docs-patterns-factoryf-00-197":["/content---docs-patterns-factoryf-00-197.86725afbabded99e542b.js"],"metadata---docs-patterns-factory-659-5cc":["/metadata---docs-patterns-factory-659-5cc.ea9afb673df76317ff24.js"],"content---docs-patterns-iterator-3-bc-1d4":["/content---docs-patterns-iterator-3-bc-1d4.5d5d94f70541765efa22.js"],"metadata---docs-patterns-iterator-288-f03":["/metadata---docs-patterns-iterator-288-f03.98fa963368eeba10d36f.js"],"content---docs-patterns-mediator-685-4ef":["/content---docs-patterns-mediator-685-4ef.3a07e1a752a36ec0f4d2.js"],"metadata---docs-patterns-mediator-421-d91":["/metadata---docs-patterns-mediator-421-d91.7cdc30c287dc390a8bd8.js"],"content---docs-patterns-interpreterc-34-4ff":["/content---docs-patterns-interpreterc-34-4ff.dcdaaf88070c0d61e84e.js"],"metadata---docs-patterns-interpreter-484-b15":["/metadata---docs-patterns-interpreter-484-b15.a7b1f179ae3dfd263b9e.js"],"content---docs-patterns-memento-740-286":["/content---docs-patterns-memento-740-286.2ccf30de8d66d40a9bfe.js"],"metadata---docs-patterns-memento-098-f69":["/metadata---docs-patterns-memento-098-f69.528d4237126a726fdc99.js"],"content---docs-patterns-observer-73-f-441":["/content---docs-patterns-observer-73-f-441.ed5641d3d7ea87b46d18.js"],"metadata---docs-patterns-observere-90-4f8":["/metadata---docs-patterns-observere-90-4f8.a84f6b19bdfdc12b322a.js"],"content---docs-patterns-prototype-93-c-d70":["/content---docs-patterns-prototype-93-c-d70.d54cdf27ec14b342de03.js"],"metadata---docs-patterns-prototype-8-ac-89b":["/metadata---docs-patterns-prototype-8-ac-89b.4d64aab394dee43cf61a.js"],"content---docs-patterns-proxyb-6-e-4ef":["/content---docs-patterns-proxyb-6-e-4ef.16fffc186a5be2c18e7a.js"],"metadata---docs-patterns-proxye-47-a3c":["/metadata---docs-patterns-proxye-47-a3c.6c54b5adcb454c64c5b0.js"],"content---docs-patterns-singleton-710-727":["/content---docs-patterns-singleton-710-727.9a428a019b30c3a85d05.js"],"metadata---docs-patterns-singletonb-35-b33":["/metadata---docs-patterns-singletonb-35-b33.b232478795b0089c615c.js"],"content---docs-patterns-stated-4-a-502":["/content---docs-patterns-stated-4-a-502.4977d16fb222dd61f276.js"],"metadata---docs-patterns-stateb-04-819":["/metadata---docs-patterns-stateb-04-819.55f0729caf8c533c0b97.js"],"content---docs-patterns-strategy-9-e-9-61c":["/content---docs-patterns-strategy-9-e-9-61c.9a5dcc24a4cd608a222e.js"],"metadata---docs-patterns-strategy-6-ce-04f":["/metadata---docs-patterns-strategy-6-ce-04f.f6dfcf8106fdf5b6a5e2.js"],"content---docs-patterns-templateee-1-6e8":["/content---docs-patterns-templateee-1-6e8.1e3c296fe19cb52b32e7.js"],"metadata---docs-patterns-template-3-bc-bf3":["/metadata---docs-patterns-template-3-bc-bf3.8b4a064c39679ed9f1da.js"],"content---docs-patterns-visitorff-6-bda":["/content---docs-patterns-visitorff-6-bda.a8cf5a0faae60f9b386c.js"],"metadata---docs-patterns-visitore-38-a38":["/metadata---docs-patterns-visitore-38-a38.2e7899e9b994902ff714.js"],"content---docs-base-net-http-1-cc-352":["/content---docs-base-net-http-1-cc-352.0793d677604060d0fa72.js"],"metadata---docs-base-net-http-373-f55":["/metadata---docs-base-net-http-373-f55.176b695a53972e854c73.js"],"content---docs-f-2-e-browser-cache-260-909":["/content---docs-f-2-e-browser-cache-260-909.f9c2974e566348874738.js"],"metadata---docs-f-2-e-browser-cache-361-a94":["/metadata---docs-f-2-e-browser-cache-361-a94.f3b0d506854c1465c93d.js"],"content---docs-f-2-e-browser-devtool-850-efc":["/content---docs-f-2-e-browser-devtool-850-efc.898328b44663931a6edf.js"],"metadata---docs-f-2-e-browser-devtool-3-ab-d05":["/metadata---docs-f-2-e-browser-devtool-3-ab-d05.c6e43343a747a5c18430.js"],"content---docs-base-net-tcpd-0-c-487":["/content---docs-base-net-tcpd-0-c-487.692ffea0a1d4b351c762.js"],"metadata---docs-base-net-tcp-212-c6f":["/metadata---docs-base-net-tcp-212-c6f.d7c9684d40473f2313ca.js"],"content---docs-f-2-e-browser-canvase-97-e28":["/content---docs-f-2-e-browser-canvase-97-e28.c254a8dd4f8cb804af3a.js"],"metadata---docs-f-2-e-browser-canvas-574-e4b":["/metadata---docs-f-2-e-browser-canvas-574-e4b.1813e1995fac3a0b265f.js"],"content---docs-f-2-e-browser-fetch-147-732":["/content---docs-f-2-e-browser-fetch-147-732.4b77cc030d6fcc4a55de.js"],"metadata---docs-f-2-e-browser-fetch-918-58f":["/metadata---docs-f-2-e-browser-fetch-918-58f.cc0feaf5fde941b28b00.js"],"content---docs-f-2-e-browser-v-8-c-83-515":["/content---docs-f-2-e-browser-v-8-c-83-515.af92aca2ee062f44a220.js"],"metadata---docs-f-2-e-browser-v-8-e-60-c45":["/metadata---docs-f-2-e-browser-v-8-e-60-c45.57701f6e5e5f93440660.js"],"content---docs-f-2-e-browser-dom-018-426":["/content---docs-f-2-e-browser-dom-018-426.79da2b05607e359cd2e8.js"],"metadata---docs-f-2-e-browser-domb-41-90c":["/metadata---docs-f-2-e-browser-domb-41-90c.a68725319308c561bcaf.js"],"content---docs-f-2-e-browser-storage-0-e-2-cd2":["/content---docs-f-2-e-browser-storage-0-e-2-cd2.e2afb1f7b5ce65f73dcb.js"],"metadata---docs-f-2-e-browser-storagea-21-a7b":["/metadata---docs-f-2-e-browser-storagea-21-a7b.b6fe71fba42fd975c697.js"],"content---docs-f-2-e-browser-eventa-5-d-93e":["/content---docs-f-2-e-browser-eventa-5-d-93e.70071a72fde5e308a144.js"],"metadata---docs-f-2-e-browser-event-0-cc-f3c":["/metadata---docs-f-2-e-browser-event-0-cc-f3c.005110b1d06c91b411fa.js"],"content---docs-f-2-e-coding-standarda-1-c-070":["/content---docs-f-2-e-coding-standarda-1-c-070.871c8af958e1bcaa7323.js"],"metadata---docs-f-2-e-coding-standardeed-27d":["/metadata---docs-f-2-e-coding-standardeed-27d.7f76f5edc2351a8b78b7.js"],"content---docs-f-2-e-browser-work-31-f-d77":["/content---docs-f-2-e-browser-work-31-f-d77.09d78e5bc47f63bc3423.js"],"metadata---docs-f-2-e-browser-work-9-d-7-1ef":["/metadata---docs-f-2-e-browser-work-9-d-7-1ef.90702a344ea3fca73a98.js"],"content---docs-f-2-e-css-code-98-f-375":["/content---docs-f-2-e-css-code-98-f-375.bbfe5629e0d23bbcb5fb.js"],"metadata---docs-f-2-e-css-codea-4-f-118":["/metadata---docs-f-2-e-css-codea-4-f-118.4f0f2f002d7cef7420e7.js"],"content---docs-f-2-e-css-animationebd-9f7":["/content---docs-f-2-e-css-animationebd-9f7.3127ed5aa70b7eaaa206.js"],"metadata---docs-f-2-e-css-animationb-25-039":["/metadata---docs-f-2-e-css-animationb-25-039.55dbddaca9c8e19a4d39.js"],"content---docs-f-2-e-css-layout-73-d-568":["/content---docs-f-2-e-css-layout-73-d-568.902806eb55e6ee7cb0c8.js"],"metadata---docs-f-2-e-css-layout-58-b-f0d":["/metadata---docs-f-2-e-css-layout-58-b-f0d.8e6f967dedb8524c8ded.js"],"content---docs-f-2-e-css-indexf-55-541":["/content---docs-f-2-e-css-indexf-55-541.c664584d9ef0b54a6ebc.js"],"metadata---docs-f-2-e-css-indexe-08-461":["/metadata---docs-f-2-e-css-indexe-08-461.32fb4ee6e1809594beb3.js"],"content---docs-f-2-e-css-selector-3-f-9-a15":["/content---docs-f-2-e-css-selector-3-f-9-a15.256829a85c39442a9140.js"],"metadata---docs-f-2-e-css-selector-165-76b":["/metadata---docs-f-2-e-css-selector-165-76b.eb576f6c336b2de8d19c.js"],"content---docs-f-2-e-css-syntaxa-16-ceb":["/content---docs-f-2-e-css-syntaxa-16-ceb.c40a9dfa609fca68f578.js"],"metadata---docs-f-2-e-css-syntaxfcc-a98":["/metadata---docs-f-2-e-css-syntaxfcc-a98.ca8bc0ee5d2b8c355db2.js"],"content---docs-f-2-e-html-index-9-d-1-79a":["/content---docs-f-2-e-html-index-9-d-1-79a.71322d72b353749a4753.js"],"metadata---docs-f-2-e-html-index-24-f-1e4":["/metadata---docs-f-2-e-html-index-24-f-1e4.dc73c758dbfa5a89b788.js"],"content---docs-f-2-e-html-meta-0-c-5-579":["/content---docs-f-2-e-html-meta-0-c-5-579.e1a260c160df4a5201fc.js"],"metadata---docs-f-2-e-html-metab-46-fe4":["/metadata---docs-f-2-e-html-metab-46-fe4.3fb94791217d48f8f3f2.js"],"content---docs-f-2-e-javascript-exec-02-c-147":["/content---docs-f-2-e-javascript-exec-02-c-147.311ae572cc5ab66b1305.js"],"metadata---docs-f-2-e-javascript-exec-1-d-7-4bf":["/metadata---docs-f-2-e-javascript-exec-1-d-7-4bf.39b984ea948550deef55.js"],"content---docs-f-2-e-javascript-grammer-447-369":["/content---docs-f-2-e-javascript-grammer-447-369.a0f320f58fb81b51083a.js"],"metadata---docs-f-2-e-javascript-grammer-6-df-3af":["/metadata---docs-f-2-e-javascript-grammer-6-df-3af.71a7dfcc02e43cd9a91a.js"],"content---docs-f-2-e-javascript-encode-8-ce-811":["/content---docs-f-2-e-javascript-encode-8-ce-811.fbd577c63d9533cbdfa7.js"],"metadata---docs-f-2-e-javascript-encodeaaf-cab":["/metadata---docs-f-2-e-javascript-encodeaaf-cab.5c01d458cbe54c41349a.js"],"content---docs-f-2-e-javascript-asynceb-2-d37":["/content---docs-f-2-e-javascript-asynceb-2-d37.98fa86d92a1f187b99c2.js"],"metadata---docs-f-2-e-javascript-async-09-f-030":["/metadata---docs-f-2-e-javascript-async-09-f-030.4e44f9f5e231282b212a.js"],"content---docs-f-2-e-javascript-modulee-10-ff1":["/content---docs-f-2-e-javascript-modulee-10-ff1.c392ebbf53975b3459d9.js"],"metadata---docs-f-2-e-javascript-moduleee-6-b43":["/metadata---docs-f-2-e-javascript-moduleee-6-b43.c5c0e7ad8f4e500dc87c.js"],"content---docs-f-2-e-javascript-oop-3-a-2-e5a":["/content---docs-f-2-e-javascript-oop-3-a-2-e5a.dbf330f59985c429e266.js"],"metadata---docs-f-2-e-javascript-oopaa-3-9b9":["/metadata---docs-f-2-e-javascript-oopaa-3-9b9.daaa39b09b252a81ff26.js"],"content---docs-f-2-e-monitor-index-391-ad0":["/content---docs-f-2-e-monitor-index-391-ad0.03d79fd20865510e5ef4.js"],"metadata---docs-f-2-e-monitor-indexa-56-d7f":["/metadata---docs-f-2-e-monitor-indexa-56-d7f.6097e2a4bac5ce6596b5.js"],"content---docs-f-2-e-performance-indexaef-e1d":["/content---docs-f-2-e-performance-indexaef-e1d.6c81d6ec4435c169fa63.js"],"metadata---docs-f-2-e-performance-index-3-de-87c":["/metadata---docs-f-2-e-performance-index-3-de-87c.642dc4b1791464d5542a.js"],"content---docs-f-2-e-javascript-type-58-e-e47":["/content---docs-f-2-e-javascript-type-58-e-e47.f1e5b828b7f2f30fad34.js"],"metadata---docs-f-2-e-javascript-typef-33-dde":["/metadata---docs-f-2-e-javascript-typef-33-dde.108cd1f6acd7eecae765.js"],"content---docs-f-2-e-javascript-skill-687-c8f":["/content---docs-f-2-e-javascript-skill-687-c8f.c65e80fe43b2dac2a33f.js"],"metadata---docs-f-2-e-javascript-skilld-97-3a2":["/metadata---docs-f-2-e-javascript-skilld-97-3a2.1e71fc25637525430415.js"],"content---docs-f-2-e-javascript-regexp-987-85e":["/content---docs-f-2-e-javascript-regexp-987-85e.816ecccb6df39604eb86.js"],"metadata---docs-f-2-e-javascript-regexp-239-ff9":["/metadata---docs-f-2-e-javascript-regexp-239-ff9.082c1352e52499c5d95e.js"],"content---docs-f-2-e-react-index-0-cb-3f0":["/content---docs-f-2-e-react-index-0-cb-3f0.fbfd320c23ca1d884510.js"],"metadata---docs-f-2-e-react-indexc-85-6a6":["/metadata---docs-f-2-e-react-indexc-85-6a6.058bf827f7db4b9fee29.js"],"content---docs-f-2-e-react-native-alert-6-d-1-303":["/content---docs-f-2-e-react-native-alert-6-d-1-303.3351ecbbba0be4728879.js"],"metadata---docs-f-2-e-react-native-alert-5-f-9-3e3":["/metadata---docs-f-2-e-react-native-alert-5-f-9-3e3.0c8dffe7999d45e4cd35.js"],"content---docs-f-2-e-react-native-bugly-8-d-4-ab2":["/content---docs-f-2-e-react-native-bugly-8-d-4-ab2.80938850a9605388c8e9.js"],"metadata---docs-f-2-e-react-native-buglyadb-596":["/metadata---docs-f-2-e-react-native-buglyadb-596.962cfe1a0756cef2e2cc.js"],"content---docs-f-2-e-react-native-camera-597-89d":["/content---docs-f-2-e-react-native-camera-597-89d.e0b692bcefcda82fcfe0.js"],"metadata---docs-f-2-e-react-native-camera-27-a-253":["/metadata---docs-f-2-e-react-native-camera-27-a-253.c69af9ba3cf0844bb66f.js"],"content---docs-f-2-e-react-native-androide-34-3a4":["/content---docs-f-2-e-react-native-androide-34-3a4.d35509cf5f1acbc4ff06.js"],"metadata---docs-f-2-e-react-native-android-0-b-3-456":["/metadata---docs-f-2-e-react-native-android-0-b-3-456.caf9471f8d085bf31684.js"],"content---docs-f-2-e-react-native-code-pusha-39-174":["/content---docs-f-2-e-react-native-code-pusha-39-174.93dc89e9bdf287b5105a.js"],"metadata---docs-f-2-e-react-native-code-push-7-b-7-231":["/metadata---docs-f-2-e-react-native-code-push-7-b-7-231.8f50bb168c36b33d1070.js"],"content---docs-f-2-e-react-native-deploy-500-e54":["/content---docs-f-2-e-react-native-deploy-500-e54.f3399f8fbae5ea5dafa7.js"],"metadata---docs-f-2-e-react-native-deploy-4-cf-03c":["/metadata---docs-f-2-e-react-native-deploy-4-cf-03c.4b149d3b3410c983d863.js"],"content---docs-f-2-e-react-native-gitf-9-e-d83":["/content---docs-f-2-e-react-native-gitf-9-e-d83.9ab8d05e6169259a9216.js"],"metadata---docs-f-2-e-react-native-git-3-f-0-1e2":["/metadata---docs-f-2-e-react-native-git-3-f-0-1e2.b229ce41cb52decee710.js"],"content---docs-f-2-e-react-native-fetch-756-af5":["/content---docs-f-2-e-react-native-fetch-756-af5.82438e595adae680c57a.js"],"metadata---docs-f-2-e-react-native-fetchd-41-27d":["/metadata---docs-f-2-e-react-native-fetchd-41-27d.37092c8e6082f000fe65.js"],"content---docs-f-2-e-react-native-issue-0-f-6-864":["/content---docs-f-2-e-react-native-issue-0-f-6-864.f15aeab57c74cc167ed5.js"],"metadata---docs-f-2-e-react-native-issue-214-5cd":["/metadata---docs-f-2-e-react-native-issue-214-5cd.be53d72c630319aac526.js"],"content---docs-f-2-e-react-native-loading-84-c-73a":["/content---docs-f-2-e-react-native-loading-84-c-73a.6415d699d69144e70eff.js"],"metadata---docs-f-2-e-react-native-loadingf-98-f5d":["/metadata---docs-f-2-e-react-native-loadingf-98-f5d.d18d838ab901bb169b46.js"],"content---docs-f-2-e-react-native-index-889-a61":["/content---docs-f-2-e-react-native-index-889-a61.e3970f3ea50156cd3ab4.js"],"metadata---docs-f-2-e-react-native-indexb-92-e43":["/metadata---docs-f-2-e-react-native-indexb-92-e43.83243b57fcad3e1a3e9f.js"],"content---docs-f-2-e-react-native-react-native-videoc-1-d-e43":["/content---docs-f-2-e-react-native-react-native-videoc-1-d-e43.7abbd5ab45615d821a63.js"],"metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa":["/metadata---docs-f-2-e-react-native-react-native-video-97-c-eaa.edf7c63616799f20fca6.js"],"content---docs-f-2-e-react-native-save-to-camera-693-68d":["/content---docs-f-2-e-react-native-save-to-camera-693-68d.902cde7992e787f5a0a3.js"],"metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735":["/metadata---docs-f-2-e-react-native-save-to-camera-7-a-4-735.1dc595ee285f7a882dca.js"],"content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b":["/content---docs-f-2-e-react-native-share-to-wechatf-7-d-17b.271c82e3c629b8a8dfd2.js"],"metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a":["/metadata---docs-f-2-e-react-native-share-to-wechatd-32-d2a.197271c4725e02693f26.js"],"content---docs-f-2-e-react-native-source-877-2ea":["/content---docs-f-2-e-react-native-source-877-2ea.e6b9d4e17f6c7ca6598b.js"],"metadata---docs-f-2-e-react-native-source-9-b-5-f09":["/metadata---docs-f-2-e-react-native-source-9-b-5-f09.cdf3cb93585560da2c3d.js"],"content---docs-f-2-e-react-native-tech-226-30f":["/content---docs-f-2-e-react-native-tech-226-30f.9917eed8f727fa4cabed.js"],"metadata---docs-f-2-e-react-native-techbca-407":["/metadata---docs-f-2-e-react-native-techbca-407.f4c773cd94efddc9c80a.js"],"content---docs-f-2-e-react-native-size-5-b-4-c24":["/content---docs-f-2-e-react-native-size-5-b-4-c24.4242d7f5a536445b5a16.js"],"metadata---docs-f-2-e-react-native-sizefa-9-e54":["/metadata---docs-f-2-e-react-native-sizefa-9-e54.01b59bc567eeb74ed843.js"],"content---docs-f-2-e-react-native-update-rn-93-f-50e":["/content---docs-f-2-e-react-native-update-rn-93-f-50e.4ad569eb900093f45055.js"],"metadata---docs-f-2-e-react-native-update-rn-323-92d":["/metadata---docs-f-2-e-react-native-update-rn-323-92d.ee29ffb56e41d1ce9d89.js"],"content---docs-f-2-e-react-native-waterfall-629-6ad":["/content---docs-f-2-e-react-native-waterfall-629-6ad.0f46e100e1e89bfc41dc.js"],"metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37":["/metadata---docs-f-2-e-react-native-waterfall-2-d-9-e37.7dc57195e7e57c4a2d33.js"],"content---docs-f-2-e-react-native-wechate-7-f-088":["/content---docs-f-2-e-react-native-wechate-7-f-088.2943228d5ae52eb2c0d2.js"],"metadata---docs-f-2-e-react-native-wechate-47-3f8":["/metadata---docs-f-2-e-react-native-wechate-47-3f8.1d96f99919477a8714e9.js"],"content---docs-f-2-e-safe-index-165-7db":["/content---docs-f-2-e-safe-index-165-7db.78036e6c15d2f985287b.js"],"metadata---docs-f-2-e-safe-index-647-b0c":["/metadata---docs-f-2-e-safe-index-647-b0c.607005ab58498ec29c4a.js"],"content---docs-f-2-e-test-jestfc-3-df1":["/content---docs-f-2-e-test-jestfc-3-df1.2b195367b07ca290dbc7.js"],"metadata---docs-f-2-e-test-jestda-3-2d2":["/metadata---docs-f-2-e-test-jestda-3-2d2.fd7a8f87be9f6a3bb698.js"],"content---docs-f-2-e-vue-origind-8-a-797":["/content---docs-f-2-e-vue-origind-8-a-797.712e77564fda4e9f250f.js"],"metadata---docs-f-2-e-vue-origin-587-f6e":["/metadata---docs-f-2-e-vue-origin-587-f6e.fab0ae07191bf1f6d953.js"],"content---docs-f-2-e-vue-zf-6-bb-fd6":["/content---docs-f-2-e-vue-zf-6-bb-fd6.e6b7aee6f3fc1ba79c6f.js"],"metadata---docs-f-2-e-vue-zf-258-73c":["/metadata---docs-f-2-e-vue-zf-258-73c.b37d2e3d03ced3db06c1.js"],"content---docs-f-2-e-vue-index-02-b-a5c":["/content---docs-f-2-e-vue-index-02-b-a5c.cca171b44f729b6dab1d.js"],"metadata---docs-f-2-e-vue-indexefd-70b":["/metadata---docs-f-2-e-vue-indexefd-70b.a8a2676b8e89225aa604.js"],"content---docs-f-2-e-webpack-jkc-08-e88":["/content---docs-f-2-e-webpack-jkc-08-e88.b2f09aad2dbddd49aecb.js"],"metadata---docs-f-2-e-webpack-jkd-6-f-981":["/metadata---docs-f-2-e-webpack-jkd-6-f-981.8e6347cfa911be54097d.js"],"content---docs-source-jquery-event-088-dda":["/content---docs-source-jquery-event-088-dda.d677e39a030dff99ac29.js"],"metadata---docs-source-jquery-event-095-2e1":["/metadata---docs-source-jquery-event-095-2e1.1105ece02afd7be54517.js"],"content---docs-f-2-e-test-index-1-ae-bf1":["/content---docs-f-2-e-test-index-1-ae-bf1.14646972358a0c669ca9.js"],"metadata---docs-f-2-e-test-index-47-d-1a6":["/metadata---docs-f-2-e-test-index-47-d-1a6.bc1b3983f6e1d42ade13.js"],"content---docs-f-2-e-webpack-basicdf-5-0e9":["/content---docs-f-2-e-webpack-basicdf-5-0e9.26433d39c6604c6d2eb2.js"],"metadata---docs-f-2-e-webpack-basic-586-d94":["/metadata---docs-f-2-e-webpack-basic-586-d94.dbe0f5108d7bbea2013c.js"],"content---docs-f-2-e-webpack-principlec-11-22c":["/content---docs-f-2-e-webpack-principlec-11-22c.3f44b22a63fb51da98fe.js"],"metadata---docs-f-2-e-webpack-principle-80-d-cb5":["/metadata---docs-f-2-e-webpack-principle-80-d-cb5.29318e5bdc87217625fb.js"],"content---docs-f-2-e-webpack-basic-indexb-92-061":["/content---docs-f-2-e-webpack-basic-indexb-92-061.bd5a8de0fc5a92f6421f.js"],"metadata---docs-f-2-e-webpack-basic-indexe-25-12c":["/metadata---docs-f-2-e-webpack-basic-indexe-25-12c.6f15fbb82a0c9cbb5782.js"],"content---docs-f-2-e-webpack-principle-indexab-1-27c":["/content---docs-f-2-e-webpack-principle-indexab-1-27c.e32cdfff986e3832a9c9.js"],"metadata---docs-f-2-e-webpack-principle-index-6-fa-123":["/metadata---docs-f-2-e-webpack-principle-index-6-fa-123.90e0788ecc203f20181e.js"],"component---theme-blog-tags-posts-page-687-b6c":["/component---theme-blog-tags-posts-page-687-b6c.d73172c1c42f2fdd935d.js"],"metadata---blog-tags-house-375-d32":["/metadata---blog-tags-house-375-d32.5d7b794f1125ea63ec9c.js"],"metadata---blog-tags-translate-53-c-1f3":["/metadata---blog-tags-translate-53-c-1f3.4d92f9e549bfa897bfa6.js"],"metadata---blog-tags-thinkd-55-455":["/metadata---blog-tags-thinkd-55-455.908c2ed7918192426d27.js"],"component---theme-blog-tags-list-page-01-a-d0b":["/component---theme-blog-tags-list-page-01-a-d0b.b11fa1d635eed9c59d46.js"],"tags---blog-tagse-51-a7c":["/tags---blog-tagse-51-a7c.6198a19628a1c18d396f.js"]};/*]]>*/</script>

<title data-react-helmet="true">JavaScript 执行机制</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="JavaScript 执行机制"/><meta data-react-helmet="true" name="description" content="## 宏任务和微任务"/><meta data-react-helmet="true" property="og:description" content="## 宏任务和微任务"/><meta data-react-helmet="true" property="og:url" content="https://www.banli17.com/docs/f2e/javascript/exec"/><meta data-react-helmet="true" name="twitter:card" content="summary"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.d719e73e126f22665d27.css" />

<link rel="stylesheet" type="text/css" href="/1.196ce05925ea6d776920.css" />

<link rel="stylesheet" type="text/css" href="/2.76ced7e22babc8d30c3a.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-page-9-e-7-ca5.f43a35144d87a5017ffc.css" />

<link rel="stylesheet" type="text/css" href="/3.76fc2d47232fd1193413.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-legacy-item-031-769.2f2552f02b6a918fee59.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a><a class="navbar__item navbar__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a><a class="navbar__item navbar__link" label="服务端" position="left" href="/docs/linux/index">服务端</a><a class="navbar__item navbar__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a><a class="navbar__item navbar__link" label="经验集" position="left" href="/docs/other/mac">经验集</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="博客" position="right" href="/blog">博客</a><a class="navbar__item navbar__link" label="关于" position="right" href="/docs/about">关于</a><a class="navbar__item navbar__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="板栗17的博客"/><strong>banli17.com</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="前端" position="left" href="/docs/f2e/html/index">前端</a></li><li class="menu__list-item"><a class="menu__link" label="服务端" position="left" href="/docs/linux/index">服务端</a></li><li class="menu__list-item"><a class="menu__link" label="计算机基础" position="left" href="/docs/base/h5">计算机基础</a></li><li class="menu__list-item"><a class="menu__link" label="经验集" position="left" href="/docs/other/mac">经验集</a></li><li class="menu__list-item"><a class="menu__link" label="博客" position="right" href="/blog">博客</a></li><li class="menu__list-item"><a class="menu__link" label="关于" position="right" href="/docs/about">关于</a></li><li class="menu__list-item"><a class="menu__link" href="https://github.com/banli17" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="container container--fluid"><div class="row"><div class="col col--3"><div class="sidebar_135b"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_3BXC" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Html</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/html/index">HTML</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/html/meta">元信息类标签</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Css</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/index">css基础</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/syntax">语法</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/selector">选择器</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/layout">css 布局</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/animation">css 动画</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/css/code">常用 css 代码</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Javascript</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/grammer">语法</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/type">数据类型</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/encode">编码知识</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/oop">面向对象</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/module">模块化编程</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/async">异步编程</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/f2e/javascript/exec">执行机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/regexp">正则表达式</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/javascript/skill">高级技巧</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">浏览器原理与API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/dom">DOM</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/work">浏览器工作原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/event">事件机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/fetch">网络请求与表单</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/storage">浏览器存储</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/devtool">Chrome 开发者工具</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/cache">浏览器缓存机制</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/v8">V8 引擎原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/browser/canvas">Canvas</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">其它</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/monitor/index">前端监控</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/performance/index">建立性能体系</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/test/index">前端测试与jest</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/safe/index">web 安全</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/basic">webpack 知识总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/webpack/principle">webpack (2): 原理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/react/index">React 知识点总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/interview">壹题面试题解答</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">vue</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/index">知识点总结</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/f2e/vue/origin">原理分析</a></li></ul></li></ul></div></div></div><main class="col"><div><div class="padding-vert--lg"><div class="row"><div class="col"><div class="docItemContainer_1VCq"><header><h1 class="margin-bottom--lg">JavaScript 执行机制</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="宏任务和微任务"></a><a aria-hidden="true" class="hash-link" href="#宏任务和微任务">#</a>宏任务和微任务</h2><h3><a aria-hidden="true" class="anchor" id="简介"></a><a aria-hidden="true" class="hash-link" href="#简介">#</a>简介</h3><p>JavaScript 的执行过程是：</p><ol><li>宿主(浏览器或node)将 JS 代码交给 JS 引擎，让它执行。</li><li>JS 引擎执行时，遇到如 setTimeout 之类的浏览器 API，会通知浏览器执行定时任务。然后 JS 引擎继续执行代码。</li><li>浏览器定时到了之后，再通知 JS 引擎，JS 引擎开始执行定时器中的函数。</li><li>ES6 引入了 Promise 后，JS 引擎会自己发起任务，不需要再让浏览器安排。</li></ol><p>宿主发起的任务叫做宏任务，JS 引擎自己发起的任务叫做微任务(microtask)。</p><p>其中宏任务和微任务分别有：</p><ul><li>宏任务 macro-task(task)：Event、setTimeout、setInterval、setImmediate(ie)、I/O、UI rendering、MessageChannel。</li><li>微任务 micro-task(jobs)：process.nextTick、Promise、MutationObserver、Object.observer(已废弃)。</li></ul><h3><a aria-hidden="true" class="anchor" id="为什么有微任务"></a><a aria-hidden="true" class="hash-link" href="#为什么有微任务">#</a>为什么有微任务</h3><p>其实宏任务对于我们开发就够了，为什么还要有微任务呢？</p><p>根据 HTML 标准，在每个宏任务运行完以后，UI 都会重新渲染，那么在微中就完成数据更新，因此当前宏任务结束就可以得到最新的 UI了。反之，如果新建一个宏任务来做数据更新的话，那么渲染会执行两次。查看<a href="https://www.zhihu.com/question/55364497/answer/144215284">更多</a>。</p><p>那么宏任务和微任务有哪些呢？</p><h3><a aria-hidden="true" class="anchor" id="执行过程"></a><a aria-hidden="true" class="hash-link" href="#执行过程">#</a>执行过程</h3><p>JS 引擎等待浏览器分配宏任务，在操作系统中，通常等待的行为都是一个事件循环。</p><p>底层的 C/C++ 代码简化如下：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">while(TRUE){</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    r = wait();</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    execute(r);</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>整个循环就是反复等待-执行的过程。等待就是等宿主发起的宏任务。这里每次执行的过程，就是一个宏任务，可以这样理解：宏任务队列就是事件循环。</p><p>而微任务是在宏任务里面的，在宏任务中，JS 的 Promise 也会产生异步代码，JS 必须保证这些异步代码在一个宏任务中执行，所以每个宏任务中又包含一个微任务队列。如下图所示。</p><p><img src="/img/js/eventloop-1.jpg"/></p><p>接下来，来看一个例子理解:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> r </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Promise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;a&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">resolve</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;d&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">then</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;c&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码，执行流程如下：</p><ol><li>浏览器将代码交给 JS 引擎，执行任务。这是一个宏任务。var r = new Promise() 会立即执行(注意 Promise 的 then 才是异步的)，打印输出 a。</li><li>执行过程中，遇到 setTimeout，让浏览器去执行定时(即倒数秒)，定时到后，就是下一个宏任务。</li><li>执行到 then，这是一个 Promise 微任务。放到微任务队列里。</li><li>执行 console.log(&quot;b&quot;)，输出 b。</li><li>执行宏任务里的微任务，即第 3 步的任务，打印出 c。</li><li>执行下一个宏任务，即第 2 步的 setTimeout 任务，打印出 d。</li></ol><p>最终结果为: a、b、c、d。画个图如下：</p><p><img src="/img/js/eventloop-2.jpg"/></p><h2><a aria-hidden="true" class="anchor" id="执行上下文"></a><a aria-hidden="true" class="hash-link" href="#执行上下文">#</a>执行上下文</h2><p>JS 标准把一段代码，执行所需的所有信息定义为执行上下文。它包括：</p><ul><li>lexical environment: 词法环境，当获取变量或者 this 值时使用。</li><li>variable environment: 变量环境，当声明变量时使用。</li><li>code evaluation state: 用户恢复代码执行位置。</li><li>Function: 执行任务是函数时使用，表示正在被执行的函数。</li><li>ScriptOrModule: 执行任务是脚本或模块时使用，表示正在执行的代码。</li><li>Realm: 使用的基础库和内置对象实例。</li><li>Generator: 仅生成器上下文有这个属性，表示当前生成器。</li></ul><h2><a aria-hidden="true" class="anchor" id="闭包"></a><a aria-hidden="true" class="hash-link" href="#闭包">#</a>闭包</h2><p>闭包就是处于执行环境中的函数。它包含两部分：</p><ul><li>环境部分<ul><li>环境：函数的词法环境(执行上下文的一部分)</li><li>标识符列表：函数中用到的未声明的变量</li></ul></li><li>表达式部分: 函数体</li></ul><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">function A() {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  let a = 1</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  window.B = function () {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      console.log(a)</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  }</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">A()</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">B() // 1</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><blockquote><p>面试题，循环中使用闭包解决 <code>var</code> 定义函数的问题</p></blockquote><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>上面代码中，setTimeout 的函数 timer 会在 for 循环执行完后再执行。这时 i 已经是 6 了。所以全部输出 6。</p><p>解决方法有：
1. 使用 let (推荐)
2. 使用闭包</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><ol start="3"><li>使用 setTimeout 的第三个参数，它会当作 timer 函数的参数传入。</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(127, 219, 202)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">setTimeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">timer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="函数"></a><a aria-hidden="true" class="hash-link" href="#函数">#</a>函数</h2><h3><a aria-hidden="true" class="anchor" id="函数种类"></a><a aria-hidden="true" class="hash-link" href="#函数种类">#</a>函数种类</h3><ul><li>普通函数</li><li>箭头函数</li><li>方法，class 中定义的函数</li><li>生成器函数 function *</li><li>类，class 也是函数</li><li>异步函数：async + 普通函数/箭头函数/生成器函数</li></ul><h3><a aria-hidden="true" class="anchor" id="this"></a><a aria-hidden="true" class="hash-link" href="#this">#</a>this</h3><p>this 是 JavaScript 的一个关键字，它的使用方法类似一个变量。</p><p>一句话总结 this：调用函数时使用的引用，决定了函数执行时的 this 值。</p><p>JavaScript 用一个栈来管理执行上下文，这个栈的每一项又包含一个链表，指向上层的执行上下文。</p><p><img src="/img/js/exec-this.jpg"/></p><p>JavaScript 标准中规定了，函数有个私有属性<code>[[Environment]]</code>，用来保存定义时上下文。</p><p>当函数运行时，会创建一条新的执行环境记录，记录的外层词法环境(outer lexical environment)会被设置为函数的<code>[[Environment]]</code>，这个动作就是切换上下文。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">在别处定义了 foo：</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> b </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// error</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>函数执行时能访问定义时的上下文，但是不能访问执行时上下文。</p><p>JavaScript 标准定义了<code>[[thisMode]]</code>私有属性，它有三个取值：</p><ul><li>lexical: 表示上下文中找 this，这对应箭头函数。</li><li>global: 表示当 this 为 undefined 时，取全局对象，这对应普通函数。</li><li>strict: 表示严格模式下，this 严格按照调用时传入的值，可能时 null 或 undefined。对应严格模式和 class。</li></ul><p>函数创建新的执行上下文的词法环境记录时，会根据<code>[[thisMode]]</code>来标记新记录的<code>[[ThisBindingStatus]]</code>私有属性，代码执行遇到 this 时，会逐层检查当前词法环境记录中的<code>[[ThisBindingStatus]]</code>，当找到有 this 的环境记录时获取 this 的值。</p><p>箭头函数执行时，它的<code>[[thisMode]]</code>是lexical，<code>[[ThisBindingStatus]]</code>标记为lexical。遇到 this 时，就会到上下文中找 this。</p><h3><a aria-hidden="true" class="anchor" id="操作-this-的内置函数"></a><a aria-hidden="true" class="hash-link" href="#操作-this-的内置函数">#</a>操作 this 的内置函数</h3><p>call、apply 及 bind 可以用来修改 this 指向。它们用于箭头函数、class 也不会报错，只是无法修改 this，而只能传参。</p><p>下面来看看 call、apply 及 bind 函数内部实现。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">call</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">call</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token template-string string" style="color:rgb(173, 219, 103)">`Error`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 如果 context 是基本类型，需要是对象才能挂载 .fn 属性</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 下面最好用 Symbol，因为如果原对象可能有fn属性，这样会被覆盖掉</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 谁调用，this 就是谁</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">delete</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">apply</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">apply</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 处理参数和 call 有区别</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    result </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">delete</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> result</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bind</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">prototype</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">bind</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">!==</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;function&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">TypeError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Error&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> args </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">slice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">typeof</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;object&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">?</span><span class="token plain"> context </span><span class="token operator" style="color:rgb(127, 219, 202)">||</span><span class="token plain"> </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword null nil" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">this</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">            </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">context</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 139)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">        </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">fn</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token plain">arguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>要注意 myBind 返回一个函数，可以通过普通方式和 new 调用。</p><p>call 的性能要比 apply 好，具体可以看<a href="https://github.com/noneven/__/issues/6">call和apply的性能对比</a>。</p><h3><a aria-hidden="true" class="anchor" id="总结-this"></a><a aria-hidden="true" class="hash-link" href="#总结-this">#</a>总结 this</h3><p>this 指向总结：</p><ol><li>new 调用，指向新创建的对象。</li><li>call、apply、bind 绑定到指定对象。</li><li>上下文对象调用，绑定到上下文对象。</li><li>默认，严格模式下绑定到 undefined，否则绑定到全局对象。</li><li>箭头函数没有 this，会往上找。</li></ol><h2><a aria-hidden="true" class="anchor" id="语句执行"></a><a aria-hidden="true" class="hash-link" href="#语句执行">#</a>语句执行</h2><p>JavaScript 语句时，涉及到 Completion Record 类型，它标示着语句执行的完成状态。</p><p>Completion Record 表示一个语句执行完之后的结果，它有三个字段：</p><ul><li><code>[[type]]</code>: 表示完成的类型，有 break、continue、return、throw、normal 几种类型。</li><li><code>[[value]]</code>: 表示语句的返回值，如果没有，则是 empty。</li><li><code>[[target]]</code>: 表示语句的目标，通常是一个 JavaScript 标签。</li></ul><p>语句的分类</p><p><img src="/img/js/exec-statement.jpg"/></p><h3><a aria-hidden="true" class="anchor" id="普通语句"></a><a aria-hidden="true" class="hash-link" href="#普通语句">#</a>普通语句</h3><p>普通语句执行完成后，会得到<code>[[type]]: normal</code>的 Completion Record。JS 引擎会继续执行下一条语句。</p><p>这些语句中，只有表达式语句会产生<code>[[value]]</code>，Chrome控制台显示的就是 Completion Record 的<code>[[value]]</code>。</p><p><img src="/img/js/exec-completion-record.jpg"/></p><p>上面显示，声明语句的 Completion Record 的<code>[[value]]</code>为 undefined，而表达式语句有值。</p><h3><a aria-hidden="true" class="anchor" id="语句块"></a><a aria-hidden="true" class="hash-link" href="#语句块">#</a>语句块</h3><p>如果 Completion Record 的<code>[[type]]</code>不是 normal，会打断语句块中后续语句执行。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">{</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  console.log(1)</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  return </span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  console.log(2)  // 不执行</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="控制型语句"></a><a aria-hidden="true" class="hash-link" href="#控制型语句">#</a>控制型语句</h3><p>控制型语句分为：</p><ul><li>对内造成影响：if switch while/for try</li><li>对外造成影响：break continue return throw</li></ul><p><img src="/img/js/exec-control.jpg"/></p><p>上面穿透后，会向上找消费者。</p><p>所以 try...catch...finally 语句。try 里的 return 完成后，还是会走 finally，而且 finally 里的 return 能覆盖 try 里的 return。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-js codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">finally</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain">   </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 最终返回 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="带标签语句"></a><a aria-hidden="true" class="hash-link" href="#带标签语句">#</a>带标签语句</h3><p>任何语句前面都可以加标签<code>xx:</code>。主要作用是跳出多层循环。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2av3"><pre class="prism-code language-undefined codeBlock_2GNs" style="color:#d6deeb;background-color:#011627"><div class="token-line" style="color:#d6deeb"><span class="token plain">outer: while(true) {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  inner: while(true) {</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">      break outer;</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">  }</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">}</span></div><div class="token-line" style="color:#d6deeb"><span class="token plain">console.log(&quot;finished&quot;)</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1Zmi">Copy</button></div></pre><p>break/continue 语句后面跟了关键字，会产生带 target 的 Completion Record。</p><h2><a aria-hidden="true" class="anchor" id="参考资料"></a><a aria-hidden="true" class="hash-link" href="#参考资料">#</a>参考资料</h2><ul><li>重学前端</li></ul></div></article><div class="margin-top--xl margin-bottom--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/f2e/javascript/async"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->javascript 异步编程</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/f2e/javascript/regexp"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">正则表达式之理论与实战<!-- --> »</h4></a></div></nav><div id="gitalk-container"></div></div></div></div><div class="col col--3"><div class="tableOfContents_1X5y"><ul class="contents contents__left-border"><li><a href="#宏任务和微任务" class="contents__link">宏任务和微任务</a><ul class=""><li><a href="#简介" class="contents__link">简介</a></li><li><a href="#为什么有微任务" class="contents__link">为什么有微任务</a></li><li><a href="#执行过程" class="contents__link">执行过程</a></li></ul></li><li><a href="#执行上下文" class="contents__link">执行上下文</a></li><li><a href="#闭包" class="contents__link">闭包</a></li><li><a href="#函数" class="contents__link">函数</a><ul class=""><li><a href="#函数种类" class="contents__link">函数种类</a></li><li><a href="#this" class="contents__link">this</a></li><li><a href="#操作-this-的内置函数" class="contents__link">操作 this 的内置函数</a></li><li><a href="#总结-this" class="contents__link">总结 this</a></li></ul></li><li><a href="#语句执行" class="contents__link">语句执行</a><ul class=""><li><a href="#普通语句" class="contents__link">普通语句</a></li><li><a href="#语句块" class="contents__link">语句块</a></li><li><a href="#控制型语句" class="contents__link">控制型语句</a></li><li><a href="#带标签语句" class="contents__link">带标签语句</a></li></ul></li><li><a href="#参考资料" class="contents__link">参考资料</a></li></ul></div></div></div></div></div></main></div></div>
</div>

<script type="text/javascript" src="/runtime~main.b638eff09843138ee0a2.js"></script>

<script type="text/javascript" src="/main.ddb0be86a33fa9788cae.js"></script>

<script type="text/javascript" src="/0.332801c171c82ba47541.js"></script>

<script type="text/javascript" src="/1.aa6262bfc6b50e8138b5.js"></script>

<script type="text/javascript" src="/2.070cfdc8316b6191447c.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-page-9-e-7-ca5.1a19b16b46c54bedcbb2.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-9-a-9-239.73bad6bb3e4908795f1c.js"></script>

<script type="text/javascript" src="/3.1443f7b10e6e9c392567.js"></script>

<script type="text/javascript" src="/component---theme-doc-legacy-item-031-769.9fb8a2eff3940da426d2.js"></script>

<script type="text/javascript" src="/content---docs-f-2-e-javascript-exec-02-c-147.311ae572cc5ab66b1305.js"></script>

<script type="text/javascript" src="/metadata---docs-f-2-e-javascript-exec-1-d-7-4bf.39b984ea948550deef55.js"></script>

</body>
</html>